require=function i(s,n,a){function o(t,e){if(!n[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=n[t]={exports:{}},s[t][0].call(r.exports,function(e){return o(s[t][1][e]||e)},r,r.exports,i,s,n,a)}return n[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e,t,r){if("function"!=typeof t||r||(r=t,t=void 0),e=(new this).setAsync(e,t),"function"!=typeof r)return e;e.then(r)}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e,...t){return(0,i.format)(e,(0,s.clean)(this.data),...t)},r.get=function(e={}){(0,p.validateOutputOptions)(e);var t=Object.assign({},this.defaultOptions,this._options.output,e),{type:r,style:i}=t,[i,s]=i.split("-"),n="citation"===i?"bibliography":"csl"===i?"data":i,a="string"===r?"text":"json"===r?"object":r;let o;switch(n){case"bibliography":var{lang:l,append:u,prepend:m}=t;o={template:s,lang:l,format:a,append:u,prepend:m};break;case"data":case"bibtex":case"bibtxt":case"ndjson":case"ris":o={type:a};break;default:throw new Error(`Invalid style "${n}"`)}i=this.format(n,Object.assign(o,e._newOptions)),r=t.format;return"real"===r&&"html"===a&&"undefined"!=typeof document&&"function"==typeof document.createElement?((e=document.createElement("div")).innerHTML=i,e.firstChild):"string"===r&&"object"==typeof i?JSON.stringify(i):i},r.getIds=function(){return this.data.map(e=>e.id)};var p=e("./validate.js"),i=e("../plugins/output.js"),s=e("../plugins/input/csl.js")},{"../plugins/input/csl.js":24,"../plugins/output.js":32,"./validate.js":9}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=u(e("./log.js")),s=u(e("./options.js")),n=u(e("./set.js")),a=u(e("./sort.js")),o=u(e("./get.js")),e=u(e("./static.js"));function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}function m(e,t={}){return this instanceof m?(this._options=t,this.log=[],this.data=[],this.set(e,t),this.options(t),this):new m(e,t)}Object.assign(m.prototype,i,s,n,a,o),m.prototype[Symbol.iterator]=function*(){yield*this.data},Object.assign(m,e);r.default=m},{"./get.js":2,"./log.js":4,"./options.js":5,"./set.js":6,"./sort.js":7,"./static.js":8}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.currentVersion=function(){return this.log.length},r.retrieveLastVersion=function(){return this.retrieveVersion(this.currentVersion())},r.retrieveVersion=function(e=1){{var t,r;return e<=0||e>this.currentVersion()?null:([r,t]=this.log[e-1],(r=new this.constructor(JSON.parse(r),JSON.parse(t))).log=this.log.slice(0,e),r)}},r.save=function(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this},r.undo=function(e=1){return this.retrieveVersion(this.currentVersion()-e)}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultOptions=void 0,r.options=function(e,t){(0,i.validateOutputOptions)(e),t&&this.save();return Object.assign(this._options,e),this};var i=e("./validate.js");r.defaultOptions={format:"real",type:"json",style:"csl",lang:"en-US"}},{"./validate.js":9}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t={},r=!1){!0!==t&&!0!==r||this.save();return this.data.push(...(0,i.chain)(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=(0,s.default)(this.getIds(),"temp_id_")}),this},r.addAsync=async function(e,t={},r=!1){!0!==t&&!0!==r||this.save();return this.data.push(...await(0,i.chainAsync)(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=(0,s.default)(this.getIds(),"temp_id_")}),this},r.reset=function(e){e&&this.save();return this.data=[],this._options={},this},r.set=function(e,t={},r=!1){!0!==t&&!0!==r||this.save();return this.data=[],"boolean"!=typeof t?this.add(e,t):this.add(e)},r.setAsync=async function(e,t={},r=!1){!0!==t&&!0!==r||this.save();return this.data=[],"boolean"!=typeof t?this.addAsync(e,t):this.addAsync(e)};var i=e("../plugins/input/index.js"),s=(r=e("../util/fetchId.js"))&&r.__esModule?r:{default:r}},{"../plugins/input/index.js":28,"../util/fetchId.js":36}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sort=function(e=[],t){t&&this.save();return this.data.sort("function"==typeof e?e:function(...s){return(e,t)=>{var r=s.slice();let i=0;for(;!i&&r.length;)i=o(e,t,r.shift());return i}}(...e,"label")),this};var s=e("../plugin-common/output/label.js"),n=e("@citation-js/name");function a(e,t,r="label"===t){let i=r?(0,s.getLabel)(e):e[t];switch(t){case"author":case"editor":return i.map(e=>e.literal||e.family||(0,n.format)(e));case"accessed":case"issued":return i["date-parts"][0];case"page":return i.split("-").map(e=>parseInt(e));case"edition":case"issue":case"volume":return i=parseInt(i),isNaN(i)?-1/0:i;default:return i||-1/0}}function o(e,t,r,i=/^!/.test(r)){e=a(e,r=r.replace(/^!/,"")),t=a(t,r);return(i?-1:1)*(t<e?1:e<t?-1:0)}},{"../plugin-common/output/label.js":19,"@citation-js/name":46}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,s={async:!0},n=(Object.defineProperty(r,"async",{enumerable:!0,get:function(){return n.default}}),(i=e("./async.js"))&&i.__esModule?i:{default:i}),a=e("./validate.js");Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(s,e)||e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})})},{"./async.js":1,"./validate.js":9}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOptions=function(e){if("object"!=typeof e)throw new TypeError("Options should be an object");if(e.output)i(e.output);else{if(e.maxChainLength&&"number"!=typeof e.maxChainLength)throw new TypeError("Option maxChainLength should be a number");if(e.forceType&&"string"!=typeof e.forceType)throw new TypeError("Option forceType should be a string");if(null!=e.generateGraph&&"boolean"!=typeof e.generateGraph)throw new TypeError("Option generateGraph should be a boolean");if(null!=e.strict&&"boolean"!=typeof e.strict)throw new TypeError("Option strict should be a boolean");if(null!=e.target&&"string"!=typeof e.target)throw new TypeError("Option target should be a boolean")}return!0},r.validateOutputOptions=i;const a=["real","string"],o=["json","html","string","rtf"],l=["csl","bibtex","bibtxt","citation-*","ris","ndjson"],u=["string","function"];function i(e){if("object"!=typeof e)throw new TypeError("Options not an object!");var{format:e,type:t,style:r,lang:i,append:s,prepend:n}=e;if(e&&!a.includes(e))throw new TypeError(`Option format ("${e}") should be one of: `+a);if(t&&!o.includes(t))throw new TypeError(`Option type ("${t}") should be one of: `+o);if(r&&!l.includes(r)&&!/^citation/.test(r))throw new TypeError(`Option style ("${r}") should be one of: `+l);if(i&&"string"!=typeof i)throw new TypeError("Option lang should be a string, but is a "+typeof i);if(n&&!u.includes(typeof n))throw new TypeError("Option prepend should be a string or a function, but is a "+typeof n);if(s&&!u.includes(typeof s))throw new TypeError("Option append should be a string or a function, but is a "+typeof s);if(/^citation/.test(r)&&"json"===t)throw new Error(`Combination type/style of json/citation-* is not valid: ${t}/`+r);return!0}},{}],10:[function(e,t,s){!function(e){!function(){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;const r={_output(e,t,r){this._log.push(t,r),this._levels.indexOf(e)<this._levels.indexOf(this.level)||this._console.log(t,...r)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(const i of r._levels)r[i]=(e,...t)=>r._output(i,e,t);"function"==typeof console.Console?r._console=new console.Console(e.stderr):r._console=console;s.default=r}.call(this)}.call(this,e("_process"))},{_process:88}],11:[function(e,t,r){"use strict";var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var n;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=s?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r])}return i.default=e,t&&t.set(e,i),i}(e("../plugins")),s=e("./input/"),e=(e=e("./output/"))&&e.__esModule?e:{default:e};function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}i.add(s.ref,{input:s.formats,output:e.default})},{"../plugins":22,"./input/":14,"./output/":17}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(){return[]}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(e){return e.value||e.textContent}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ref=r.parsers=r.formats=void 0;var i=o(e("./empty.js")),s=o(e("./json.js")),n=o(e("./jquery.js")),e=o(e("./html.js"));function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}r.ref="@else",r.parsers={empty:i,json:s,jquery:n,html:e},r.formats={"@empty/text":{parse:i.parse,parseType:{dataType:"String",predicate:e=>""===e}},"@empty/whitespace+text":{parse:i.parse,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:i.parse,parseType:{dataType:"Primitive",predicate:e=>null==e}},"@else/json":{parse:s.parse,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:n.parse,parseType:{dataType:"ComplexObject",predicate(e){return"undefined"!=typeof jQuery&&e instanceof jQuery}}},"@else/html":{parse:e.parse,parseType:{dataType:"ComplexObject",predicate(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}}}}},{"./empty.js":12,"./html.js":13,"./jquery.js":15,"./json.js":16}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(e){return e.val()||e.text()||e.html()}},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.parse=function(r){if("string"!=typeof r)return JSON.parse(r);try{return JSON.parse(r)}catch(e){return i.default.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),s.forEach(([e,t])=>{r=r.replace(e,t)}),JSON.parse(r)}};var i=(r=e("../../logger.js"))&&r.__esModule?r:{default:r};const s=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']]},{"../../logger.js":10}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=s(e("./json.js")),e=s(e("./label.js"));function s(e){return e&&e.__esModule?e:{default:e}}r.default=Object.assign({},i.default,e.default)},{"./json.js":18,"./label.js":19}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getJsonWrapper=function(e){return p(e,s.dict.get("html"))};var s=i(e("../../plugins/index.js")),n=i(e("../../util/index.js")),a=(e=e("../../logger.js"))&&e.__esModule?e:{default:e};function o(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(o=function(e){return e?r:t})(e))}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=o(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}function l(e,t,r){return e+(t<r.length-1?",":"")}function u(t,r){var e=Array.isArray(t);let i;return i=(i=e?t.map(e=>m(e,r)):Object.keys(t).filter(e=>JSON.stringify(t[e])).map(e=>`"${e}": `+m(t[e],r))).map(l).map(e=>r.listItem.join(e)),i=r.list.join(i.join("")),e?`[${i}]`:`{${i}}`}function m(e,t){return"object"==typeof e&&null!==e?0===e.length?"[]":0===Object.keys(e).length?"{}":u(e,t):JSON.stringify(e)}function p(e,t){let r=e.map(e=>u(e,t));return r=(r=r.map(l).map(e=>t.entry.join(e))).join(""),t.bibliographyContainer.join(`[${r}]`)}r.default={data(e,{type:t,format:r=t||"text",version:i="1.0.2"}={}){return i<"1.0.2"&&(e=n.downgradeCsl(e)),"object"===r?n.deepCopy(e):"text"===r?JSON.stringify(e,null,2):(a.default.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),p(e,s.dict.get(r)))},ndjson(e,{version:t="1.0.2"}={}){return(e=t<"1.0.2"?n.downgradeCsl(e):e).map(e=>JSON.stringify(e)).join("\n")}}},{"../../logger.js":10,"../../plugins/index.js":22,"../../util/index.js":38}],19:[function(e,t,r){"use strict";function i(e){if("citation-label"in e)return e["citation-label"];let t="";return e.author&&(t+=e.author[0].family||e.author[0].literal),e.issued&&e.issued["date-parts"]&&e.issued["date-parts"][0]&&(t+=e.issued["date-parts"][0][0]),e["year-suffix"]?t+=e["year-suffix"]:e.title&&(t+=e.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.getLabel=i;r.default={label(e){return e.reduce((e,t)=>(e[t.id]=i(t),e),{})}}},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){i[e]=t},r.get=function(e){return i[e]},r.has=function(e){return Object.prototype.hasOwnProperty.call(i,e)},r.list=function(){return Object.keys(i)},r.remove=function(e){delete i[e]};const i={}},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){(function(e,t){{if("string"!=typeof e)throw new TypeError("Invalid dict name, expected string, got "+typeof e);if("object"!=typeof t)throw new TypeError("Invalid dict, expected object, got "+typeof t)}for(const i in t){var r=t[i];if(!Array.isArray(r)||r.some(e=>"string"!=typeof e))throw new TypeError(`Invalid dict entry "${i}", expected array of strings`)}})(e,t),i.set(e,t)},r.get=function(e){if(i.has(e))return i.get(e);throw new Error(`Dict "${e}" unavailable`)},r.has=function(e){return i.has(e)},r.htmlDict=void 0,r.list=function(){return i.list()},r.register=void 0,r.remove=function(e){i.remove(e)},r.textDict=void 0;e=(e=e("../util/register.js"))&&e.__esModule?e:{default:e};const i=r.register=new e.default({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["\t","\n"]}});r.htmlDict={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},r.textDict={wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"\t",li_end:"\n"}},{"../util/register.js":39}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t={}){var r=u[e]={};for(const a in t)if("config"===a)r.config={[e]:t.config},l.config.add(e,t.config);else{var i=r[a]={},s=t[a];for(const o in s){var n=s[o];i[o]=!0,l[a].add(o,n)}}},r.dict=r.config=void 0,r.has=function(e){return e in u},r.input=void 0,r.list=function(){return Object.keys(u)},r.output=void 0,r.remove=function(e){var t=u[e];for(const r in t)for(const i in t[r])l[r].remove(i);delete u[e]};var i=o(e("./input/index.js")),s=(r.input=i,o(e("./output.js"))),n=(r.output=s,o(e("./dict.js"))),e=(r.dict=n,o(e("./config.js")));function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}const l={input:i,output:s,dict:n,config:r.config=e},u={}},{"./config.js":20,"./dict.js":21,"./input/index.js":28,"./output.js":32}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.chainLinkAsync=r.chainLink=r.chainAsync=r.chain=void 0;var i,s=e("../../util/index.js"),n=(i=e("../../logger.js"))&&i.__esModule?i:{default:i},a=e("./register.js"),o=e("./type.js"),l=e("./data.js"),u=e("./graph.js");class m{constructor(e,t={}){this.options=Object.assign({generateGraph:!0,forceType:(0,o.type)(e),maxChainLength:10,strict:!0,target:"@csl/list+object"},t),this.type=this.options.forceType,this.data="object"==typeof e?(0,s.deepCopy)(e):e,this.graph=[{type:this.type,data:e}],this.iteration=0}iterate(){var e;return 0!==this.iteration&&((e=(0,a.get)(this.type))&&e.outputs?this.type=e.outputs:this.type=(0,o.type)(this.data),this.graph.push({type:this.type})),!this.error&&this.type!==this.options.target&&(this.iteration>=this.options.maxChainLength?(this.error=new RangeError(`Max. number of parsing iterations reached (${e=this.graph,e.reduce((e,t)=>{var r=e[e.length-1];return r&&r.type===t.type?r.count=r.count+1||2:e.push(t),e},[]).map(e=>(1<e.count?e.count+"x ":"")+e.type).join(" -> ")})`),!1):(this.iteration++,!0))}end(){if(this.error){if(n.default.error("[core]",this.error.message),!1!==this.options.strict)throw this.error;return[]}return"@csl/list+object"===this.options.target?(0,s.upgradeCsl)(this.data).map(this.options.generateGraph?e=>(0,u.applyGraph)(e,this.graph):u.removeGraph):this.data}}r.chain=(...e)=>{for(var t=new m(...e);t.iterate();)try{t.data=(0,l.data)(t.data,t.type)}catch(e){t.error=e}return t.end()},r.chainLink=e=>{var t=(0,o.type)(e),e=t.match(/array|object/)?(0,s.deepCopy)(e):e;return(0,l.data)(e,t)},r.chainAsync=async(...e)=>{const t=new m(...e);for(;t.iterate();)t.data=await(0,l.dataAsync)(t.data,t.type).catch(e=>{t.error=e});return t.end()};r.chainLinkAsync=async e=>{var t=(0,o.type)(e),e=t.match(/array|object/)?(0,s.deepCopy)(e):e;return(0,l.dataAsync)(e,t)}},{"../../logger.js":10,"../../util/index.js":38,"./data.js":25,"./graph.js":27,"./register.js":30,"./type.js":31}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clean=function(e,s=!0){return e.map(function(e){var t={};for(const i in e){var r=v(i,e[i],s);void 0!==r&&(t[i]=r)}return t})};var i=e("@citation-js/name");function n(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function m(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}const p=1,c=2,h=3,f=4,d={article:!0,"article-journal":!0,"article-magazine":!0,"article-newspaper":!0,bill:!0,book:!0,broadcast:!0,chapter:!0,classic:!0,collection:!0,dataset:!0,document:!0,entry:!0,"entry-dictionary":!0,"entry-encyclopedia":!0,event:!0,figure:!0,graphic:!0,hearing:!0,interview:!0,legal_case:!0,legislation:!0,manuscript:!0,map:!0,motion_picture:!0,musical_score:!0,pamphlet:!0,"paper-conference":!0,patent:!0,performance:!0,periodical:!0,personal_communication:!0,post:!0,"post-weblog":!0,regulation:!0,report:!0,review:!0,"review-book":!0,software:!0,song:!0,speech:!0,standard:!0,thesis:!0,treaty:!0,webpage:!0,"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"},g={author:c,chair:c,"collection-editor":c,compiler:c,composer:c,"container-author":c,contributor:c,curator:c,director:c,editor:c,"editorial-director":c,"executive-producer":c,guest:c,host:c,interviewer:c,illustrator:c,narrator:c,organizer:c,"original-author":c,performer:c,producer:c,"reviewed-author":c,recipient:c,"script-writer":c,"series-creator":c,translator:c,accessed:h,"available-date":h,container:h,"event-date":h,issued:h,"original-date":h,submitted:h,type:f,categories:"object",custom:"object",id:["string","number"],language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_collection:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-key":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",division:"string",DOI:"string",edition:["string","number"],event:"string","event-title":"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string","part-number":["string","number"],"part-title":"string",PMCID:"string",PMID:"string",printing:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string","reviewed-genre":"string",scale:"string",section:"string",source:"string",status:"string",supplement:["string","number"],title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"volume-title":"string","volume-title-short":"string","year-suffix":"string"};function b(e,t){return"object"==typeof e&&null!==e&&(e.literal||e.given||e.family)?((e.ORCID||e.orcid||e._ORCID)&&(delete(e=m({_orcid:e.ORCID||e.orcid||e._ORCID},e)).ORCID,delete e.orcid,delete e._ORCID),e):t&&"string"==typeof e?(0,i.parse)(e):void 0}function y(e,t){return e.every(e=>"number"==typeof e)?e:t&&!e.some(e=>isNaN(parseInt(e)))?e.map(e=>parseInt(e)):void 0}function v(e,t,r){var i,s,n,a=[].concat(g[e]);switch(g[e]){case p:return b(t,r);case c:return n=r,(o=t)instanceof Array&&(o=o.map(e=>b(e,n)).filter(Boolean)).length?o:void 0;case h:{var o=t;var l=r;const u="date-parts";if("object"==typeof o&&null!==o)return o[u]instanceof Array&&o[u].every(e=>e instanceof Array)?(i=o[u].map(e=>y(e,l)).filter(Boolean)).length?m(m({},o),{},{"date-parts":i}):void 0:o instanceof Array&&o.every(e=>e[u]instanceof Array)?(i=o.map(e=>y(e[u],l)).filter(Boolean)).length?{"date-parts":i}:void 0:o[u]instanceof Array?(i=y(o[u],l))&&{"date-parts":[i]}:"literal"in o||"raw"in o?o:void 0;return}case f:return i=v("language",i=t,s=r),!0===d[i]?i:s&&i in d?d[i]:void 0}if(r){if("string"==typeof t&&a.includes("number")&&!a.includes("string")&&!isNaN(+t))return parseFloat(t);if("number"==typeof t&&a.includes("string")&&!a.includes("number"))return t.toString();if(Array.isArray(t)&&t.length)return v(e,t[0],r)}if(a.includes(typeof t))return t}},{"@citation-js/name":46}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addDataParser=function(e,{parser:t,async:r}){r?n[e]=t:s[e]=t},r.data=l,r.dataAsync=async function(e,t){{if("function"==typeof n[t])return n[t](e);if("function"==typeof o[t])return o[t](e);if(u(t,!1))return l(e,t);throw new TypeError("No parser found for "+t)}},r.hasDataParser=u,r.listDataParser=function(e){return Object.keys(e?n:s)},r.removeDataParser=function(e,t){delete(t?n:s)[e]};var i=e("./chain.js");const s={},n={},a={"@csl/object":e=>[e],"@csl/list+object":e=>e,"@else/list+object":e=>e.map(i.chain).flat(),"@invalid":()=>{throw new Error("This format is not supported or recognized")}},o={"@else/list+object":async e=>(await Promise.all(e.map(i.chainAsync))).flat()};function l(e,t){if("function"==typeof s[t])return s[t](e);if("function"==typeof a[t])return a[t](e);throw new TypeError("No synchronous parser found for "+t)}function u(e,t){return t?n[e]||o[e]:s[e]||a[e]}},{"./chain.js":23}],26:[function(e,t,r){"use strict";function i(e){switch(e){case void 0:return"Undefined";case null:return"Null";default:return e.constructor.name}}Object.defineProperty(r,"__esModule",{value:!0}),r.dataTypeOf=function(e){switch(typeof e){case"string":return"String";case"object":if(Array.isArray(e))return"Array";if("Object"===i(e))return"SimpleObject";if("Null"!==i(e))return"ComplexObject";default:return"Primitive"}},r.typeOf=i},{}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyGraph=function(e,t){{var r;e._graph&&-1!==(r=t.findIndex(({type:e})=>"@else/list+object"===e))&&t.splice(r+1,0,...e._graph.slice(0,-1))}return e._graph=t,e},r.removeGraph=function(e){return delete e._graph,e}},{}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={util:!0},s=(r.util=void 0,h(e("./dataType.js"))),n=h(e("./graph.js")),a=h(e("./parser.js")),o=h(e("./csl.js")),l=e("./register"),u=(Object.keys(l).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===l[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})}),e("./chain")),m=(Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),e("./type")),p=(Object.keys(m).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===m[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})}),e("./data"));function c(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(c=function(e){return e?r:t})(e))}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=c(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}Object.keys(p).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===p[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})});r.util=Object.assign({},s,n,a,o)},{"./chain":23,"./csl.js":24,"./data":25,"./dataType.js":26,"./graph.js":27,"./parser.js":29,"./register":30,"./type":31}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypeParser=r.FormatParser=r.DataParser=void 0;var i=e("./type.js");function s(e,t,r){(t=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}class n{constructor(e){s(this,"validDataTypes",["String","Array","SimpleObject","ComplexObject","Primitive"]),this.data=e}validateDataType(){var e=this.data.dataType;if(e&&!this.validDataTypes.includes(e))throw new RangeError(`dataType was ${e}; expected one of `+this.validDataTypes)}validateParseType(){var e=this.data.predicate;if(e&&!(e instanceof RegExp||"function"==typeof e))throw new TypeError(`predicate was ${typeof e}; expected RegExp or function`)}validateTokenList(){var e=this.data.tokenList;if(e&&"object"!=typeof e)throw new TypeError(`tokenList was ${typeof e}; expected object or RegExp`)}validatePropertyConstraint(){var e=this.data.propertyConstraint;if(e&&"object"!=typeof e)throw new TypeError(`propertyConstraint was ${typeof e}; expected array or object`)}validateElementConstraint(){var e=this.data.elementConstraint;if(e&&"string"!=typeof e)throw new TypeError(`elementConstraint was ${typeof e}; expected string`)}validateExtends(){var e=this.data.extends;if(e&&"string"!=typeof e)throw new TypeError(`extends was ${typeof e}; expected string`)}validate(){if(null===this.data||"object"!=typeof this.data)throw new TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let e=this.data.tokenList;if(!e)return[];const{token:t,split:r=/\s+/,trim:i=!0,every:s=!0}=e=e instanceof RegExp?{token:e}:e,n=s?"every":"some";return[e=>{return e=e,(i?e.trim():e).split(r)[n](e=>t.test(e))}]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:e,match:t,value:r})=>{switch(e=[].concat(e),t){case"any":case"some":return t=>e.some(e=>e in t&&(!r||r(t[e])));case"none":return t=>!e.some(e=>e in t&&(!r||r(t[e])));default:return t=>e.every(e=>e in t&&(!r||r(t[e])))}})}parseElementConstraint(){const t=this.data.elementConstraint;return t?[e=>e.every(e=>(0,i.type)(e)===t)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){const e=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return 0===e.length?()=>!0:1===e.length?e[0]:t=>e.every(e=>e(t))}getDataType(){return this.data.dataType||(this.data.predicate instanceof RegExp||this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive")}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}}r.TypeParser=n;class a{constructor(e,{async:t}={}){this.parser=e,this.async=t}validate(){var e=this.parser;if("function"!=typeof e)throw new TypeError(`parser was ${typeof e}; expected function`)}}r.DataParser=a;r.FormatParser=class{constructor(e,t={}){this.format=e,t.parseType&&(this.typeParser=new n(t.parseType)),t.parse&&(this.dataParser=new a(t.parse,{async:!1})),t.parseAsync&&(this.asyncDataParser=new a(t.parseAsync,{async:!0}))}validateFormat(){var e=this.format;if(!i.typeMatcher.test(e))throw new TypeError(`format name was "${e}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}}},{"./type.js":31}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){var r=new s.FormatParser(e,t),i=(r.validate(),o[e]||(o[e]={}));r.typeParser&&((0,n.addTypeParser)(e,r.typeParser),i.type=!0);r.dataParser&&((0,a.addDataParser)(e,r.dataParser),i.data=!0);r.asyncDataParser&&((0,a.addDataParser)(e,r.asyncDataParser),i.asyncData=!0);t.outputs&&(i.outputs=t.outputs)},r.get=function(e){return o[e]},r.has=function(e){return e in o},r.list=function(){return Object.keys(o)},r.remove=function(e){var t=o[e];t&&(t.type&&(0,n.removeTypeParser)(e),t.data&&(0,a.removeDataParser)(e),t.asyncData&&(0,a.removeDataParser)(e,!0),delete o[e])};var s=e("./parser.js"),n=e("./type.js"),a=e("./data.js");const o={}},{"./data.js":25,"./parser.js":29,"./type.js":31}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addTypeParser=function(e,{dataType:t,predicate:r,extends:i}){let s=[];e in l&&(s=l[e],delete l[e],n.default.debug("[core]",`Subclasses "${s}" finally registered to parent type "${e}"`));r={predicate:r,extensions:s};a[e]=r,i?(r=a[i])?r.extensions.push(e):(l[i]||(l[i]=[]),l[i].push(e),n.default.debug("[core]",`Subclass "${e}" is waiting on parent type "${i}"`)):(o[t]||(o[t]=[])).push(e)},r.hasTypeParser=function(e){return Object.prototype.hasOwnProperty.call(a,e)},r.listTypeParser=function(){return Object.keys(a)},r.removeTypeParser=function(r){delete a[r];var e=[...Object.keys(o).map(e=>o[e]),...Object.keys(a).map(e=>a[e].extensions).filter(e=>0<e.length)];e.forEach(e=>{var t=e.indexOf(r);-1<t&&e.splice(t,1)})},r.treeTypeParser=function(){const t=e=>({name:e,children:a[e].extensions.map(t)});return{name:"Type tree",children:Object.keys(o).map(e=>({name:e,children:o[e].map(t)}))}},r.type=m,r.typeMatcher=void 0;var i,n=(i=e("../../logger.js"))&&i.__esModule?i:{default:i},s=e("./dataType.js");const a={},o={},l={};function u(e,t){switch(t){case"Array":return 0===e.length||e.every(e=>"@csl/object"===m(e))?"@csl/list+object":"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}}function m(e){var t=(0,s.dataTypeOf)(e);return("Array"!==t||0!==e.length)&&function e(t=[],r){for(const i of t)if(a[i].predicate(r))return e(a[i].extensions,r)||i}(o[t],e)||u(e,t)}r.typeMatcher=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/},{"../../logger.js":10,"./dataType.js":26}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=function(e,t){(function(e,t){{if("string"!=typeof e)throw new TypeError("Invalid output format name, expected string, got "+typeof e);if("function"!=typeof t)throw new TypeError("Invalid formatter, expected function, got "+typeof t)}})(e,t),i.set(e,t)},r.format=function(e,t,...r){if(i.has(e))return i.get(e)(t,...r);throw new Error(`Output format "${e}" unavailable`)},r.has=function(e){return i.has(e)},r.list=function(){return i.list()},r.register=void 0,r.remove=function(e){i.remove(e)};e=(e=e("../util/register.js"))&&e.__esModule?e:{default:e};const i=r.register=new e.default},{"../util/register.js":39}],33:[function(e,t,r){"use strict";function n(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function i(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}Object.defineProperty(r,"__esModule",{value:!0}),r.downgradeCsl=function e(t){if(Array.isArray(t))return t.map(e);t=i({},t);"event-title"in t&&(t.event=t["event-title"],delete t["event-title"]);"software"===t.type&&(t.type="book");return t},r.upgradeCsl=function e(t){if(Array.isArray(t))return t.map(e);t=i({},t);"event"in t&&(t["event-title"]=t.event,delete t.event);"book"===t.type&&"version"in t&&(t.type="software");return t}},{}],34:[function(e,t,r){"use strict";function n(e,t=new Set){if("object"!=typeof e||null===e||e.constructor!==Object&&e.constructor!==Array)return e;if(t.has(e))throw new TypeError("Recursively copying circular structure");t.add(e);let r;if(e.constructor===Array)r=e.map(e=>n(e,t));else{var i={};for(const s in e)i[s]=n(e[s],t);r=i}return t.delete(e),r}Object.defineProperty(r,"__esModule",{value:!0}),r.deepCopy=n,r.default=void 0;r.default=n},{}],35:[function(f,e,d){!function(h){!function(){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,d.fetchFile=c,d.fetchFileAsync=async function(e,t){const r=m(t);return i.default.http("[core]",r.method,e,r),n(e,r).then(e=>p(e,r)).then(e=>e.text())},d.setUserAgent=function(e){l=e};var s=r(f("sync-fetch")),e=r(f("fetch-ponyfill")),i=r(f("../logger.js")),t=r(f("../../package.json"));function r(e){return e&&e.__esModule?e:{default:e}}const{fetch:n,Headers:a}=(0,e.default)(),o="undefined"!=typeof location&&"undefined"!=typeof document;let l=o?"":`Citation.js/${t.default.version} Node.js/`+h.version;function u(e){var t,r,i={};for([t,r]of e instanceof a||e instanceof s.default.Headers?Array.from(e):Object.entries(e))i[t.toLowerCase()]=r.toString();return i}function m(e={}){var t,r={headers:{accept:"*/*"},method:"GET",checkContentType:e.checkContentType};return l&&!o&&(r.headers["user-agent"]=l),e.body&&(r.method="POST",t="string"!=typeof e.body,r.body=t?JSON.stringify(e.body):e.body,r.headers["content-type"]=t?"application/json":"text/plain"),e.headers&&Object.assign(r.headers,u(e.headers)),r}function p(e,t){var{status:r,headers:i}=e;let s;if(400<=r?s=new Error("Server responded with status code "+r):!0!==t.checkContentType||function(e,t){if(!e.accept||"*/*"===e.accept||!t["content-type"])return 1;const[r,i]=t["content-type"].split(";")[0].trim().split("/");return e.accept.split(",").map(e=>e.split(";")[0].trim().split("/")).some(([e,t])=>!(e!==r&&"*"!==e||t!==i&&"*"!==t))}(t.headers,u(i))||(s=new Error("Server responded with content-type "+i.get("content-type"))),s)throw s.status=r,s.headers=i,s.body=e.body,s;return e}function c(e,t){t=m(t);return i.default.http("[core]",t.method,e,t),p((0,s.default)(e,t),t).text()}d.default=c}.call(this)}.call(this,f("_process"))},{"../../package.json":42,"../logger.js":10,_process:88,"fetch-ponyfill":85,"sync-fetch":89}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e,t){let r;for(;void 0===r||e.includes(r);)r=""+t+Math.random().toString().slice(2);return r}},{}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Grammar=void 0;var i=e("./deepCopy.js");r.Grammar=class{constructor(e,t){this.rules=e,this.defaultState=t,this.mainRule=Object.keys(e)[0],this.log=[]}parse(e,t){return this.lexer=e,this.token=this.lexer.next(),this.state=(0,i.deepCopy)(this.defaultState),this.log=[],this.consumeRule(t||this.mainRule)}matchEndOfFile(){return!this.token}matchToken(e){return this.token&&e===this.token.type}consumeToken(e,t){var r=this.token;if(!e||r&&r.type===e)return this.token=this.lexer.next(),r;if(!t)throw t=r?`"${r.type}"`:"EOF",(r=new SyntaxError(this.lexer.formatError(r,`expected "${e}", got `+t))).message+=` (${this.log.join("->")})`,r}consumeRule(e){this.log.push(e);e=this.rules[e].call(this);return this.log.pop(),e}}},{"./deepCopy.js":34}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Grammar",{enumerable:!0,get:function(){return u.Grammar}}),Object.defineProperty(r,"Register",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"TokenStack",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Translator",{enumerable:!0,get:function(){return m.Translator}}),Object.defineProperty(r,"deepCopy",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"downgradeCsl",{enumerable:!0,get:function(){return i.downgradeCsl}}),Object.defineProperty(r,"fetchFile",{enumerable:!0,get:function(){return n.fetchFile}}),Object.defineProperty(r,"fetchFileAsync",{enumerable:!0,get:function(){return n.fetchFileAsync}}),Object.defineProperty(r,"fetchId",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"setUserAgent",{enumerable:!0,get:function(){return n.setUserAgent}}),Object.defineProperty(r,"upgradeCsl",{enumerable:!0,get:function(){return i.upgradeCsl}});var i=e("./csl.js"),s=p(e("./deepCopy.js")),n=e("./fetchFile.js"),a=p(e("./fetchId.js")),o=p(e("./stack.js")),l=p(e("./register.js")),u=e("./grammar.js"),m=e("./translator.js");function p(e){return e&&e.__esModule?e:{default:e}}},{"./csl.js":33,"./deepCopy.js":34,"./fetchFile.js":35,"./fetchId.js":36,"./grammar.js":37,"./register.js":39,"./stack.js":40,"./translator.js":41}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=class{constructor(e={}){this.data=e}set(e,t){return this.data[e]=t,this}add(...e){return this.set(...e)}delete(e){return delete this.data[e],this}remove(...e){return this.delete(...e)}get(e){return this.data[e]}has(e){return Object.prototype.hasOwnProperty.call(this.data,e)}list(){return Object.keys(this.data)}}},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;class u{constructor(e){this.stack=e,this.index=0,this.current=this.stack[this.index]}static getPatternText(e){return`"${e instanceof RegExp?e.source:e}"`}static getMatchCallback(t){if(Array.isArray(t)){const e=t.map(u.getMatchCallback);return t=>e.some(e=>e(t))}return t instanceof Function?t:t instanceof RegExp?e=>t.test(e):e=>t===e}tokensLeft(){return this.stack.length-this.index}matches(e){return u.getMatchCallback(e)(this.current,this.index,this.stack)}matchesSequence(e){const r=this.stack.slice(this.index,this.index+e.length).join("");return"string"==typeof e?r===e:e.every((e,t)=>u.getMatchCallback(e)(r[t]))}consumeToken(e=/^[\s\S]$/,{spaced:t=!0}={}){t&&this.consumeWhitespace();var r=this.current;if(u.getMatchCallback(e)(r,this.index,this.stack))return this.current=this.stack[++this.index],t&&this.consumeWhitespace(),r;throw new SyntaxError(`Unexpected token at index ${this.index}: Expected ${u.getPatternText(e)}, got "${r}"`)}consumeWhitespace(e=/^\s$/,{optional:t=!0}={}){return this.consume(e,{min:+!t})}consumeN(e){if(this.tokensLeft()<e)throw new SyntaxError("Not enough tokens left");for(var t=this.index;e--;)this.current=this.stack[++this.index];return this.stack.slice(t,this.index).join("")}consumeSequence(e){if(this.matchesSequence(e))return this.consumeN(e.length);throw new SyntaxError(`Expected "${e}", got "${this.consumeN(e.length)}"`)}consume(e=/^[\s\S]$/,{min:t=0,max:r=1/0,inverse:i=!1,tokenMap:s,tokenFilter:n}={}){for(var a=this.index,o=u.getMatchCallback(e);o(this.current,this.index,this.stack)!==i;)this.current=this.stack[++this.index];let l=this.stack.slice(a,this.index);if(l.length<t)throw new SyntaxError("Not enough "+u.getPatternText(e));if(l.length>r)throw new SyntaxError("Too many "+u.getPatternText(e));return s&&(l=l.map(s)),(l=n?l.filter(n):l).join("")}}r.default=u},{}],41:[function(e,t,r){"use strict";function i(e,t){let r,i,s,n;if("string"==typeof e)r=i=e;else{if(!e)return null;r=t?e.target:e.source,i=t?e.source:e.target,e.convert&&(s=t?e.convert.toSource:e.convert.toTarget),e.when&&null!=(n=t?e.when.target:e.when.source)&&(n=(a=n,function(r){return"boolean"==typeof a?a:Object.keys(a).every(e=>{var t=a[e];return!0===t?e in r:!1===t?!(e in r):"function"==typeof t?t(r[e]):Array.isArray(t)?t.includes(r[e]):r[e]===t})}))}var a;return r=[].concat(r).filter(Boolean),i=[].concat(i).filter(Boolean),{inputProp:r,outputProp:i,convert:s,condition:n}}function s(o,t){return t=t===n.CONVERT_TO_SOURCE,o=o.map(e=>i(e,t)).filter(Boolean),function(t){const i={};for(var{inputProp:s,outputProp:n,convert:e,condition:r}of o)if(0!==n.length&&(!r||r(t))&&(0===s.length||!s.every(e=>!(e in t)))){let r=s.map(e=>t[e]);if(e)try{var a=e.apply(t,r);r=1===n.length?[a]:a}catch(e){throw new Error(`Failed to convert ${s} to `+n,{cause:e})}n.forEach((e,t)=>{t=r[t];void 0!==t&&(i[e]=t)})}return i}}Object.defineProperty(r,"__esModule",{value:!0}),r.Translator=void 0;class n{constructor(e){this.convertToSource=s(e,n.CONVERT_TO_SOURCE),this.convertToTarget=s(e,n.CONVERT_TO_TARGET)}}(r.Translator=n).CONVERT_TO_SOURCE=Symbol("convert to source"),n.CONVERT_TO_TARGET=Symbol("convert to target")},{}],42:[function(e,t,r){t.exports={name:"@citation-js/core",version:"0.7.9",description:"Convert different bibliographic metadata sources",keywords:["citation-js","citation","bibliography"],author:"Lars Willighagen <lars.willighagen@gmail.com>",license:"MIT",main:"lib/index.js",module:"lib-mjs/index.js",directories:{lib:"src",test:"__tests__"},homepage:"https://citation.js.org/",repository:{type:"git",url:"https://github.com/citation-js/citation-js.git",directory:"packages/core"},bugs:{url:"https://github.com/citation-js/citation-js/issues"},engines:{node:">=16.0.0"},files:["lib","lib-mjs"],scripts:{test:"mocha -c -R dot test/*.spec.js"},dependencies:{"@citation-js/date":"^0.5.0","@citation-js/name":"^0.4.2","fetch-ponyfill":"^7.1.0","sync-fetch":"^0.4.1"},gitHead:"8fa1b9d3d420f489f9a8a57f9759b50a6369182c"}},{}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"format",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return i.default}});var i=n(e("./input")),s=n(e("./output"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./input":44,"./output":45}],44:[function(e,t,r){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,s,n=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,s=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw s}}return n}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const s={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},n=/ (?:to|[-/]) | ?(?:--|[–—]) ?/,o=/^(\d{4}-\d{2}-\d{2})\/(\d{4}-\d{2}-\d{2})$/;function l(e){return s[e.toLowerCase().slice(0,3)]}const u=function(e){var t,r=/^(\d{4}|[-+]\d{6,})-(\d{2})(?:-(\d{2}))?/;return"string"==typeof e&&r.test(e)?(r=(e=a(e.match(r),4))[1],t=e[2],e=e[3],+t?+e?[r,t,e]:[r,t]:[r]):null},m=function(e){var t,r=/^(?:[a-z]{3},\s*)?(\d{1,2}) ([a-z]{3}) (\d{4,})/i;return"string"==typeof e&&r.test(e)&&(r=(e=a(e.match(r),4))[1],t=e[2],e=e[3],t=l(t))?[e,t,r]:null};function p(e){r=e,i=new Date(r);var t,r,i=("number"!=typeof r||isNaN(i.valueOf())?null:[i.getFullYear(),i.getMonth()+1,i.getDate()])||u(e)||m(e)||(r=/^(\d{1,2})\/(\d{1,2})\/(\d{2}(?:\d{2})?)/,"string"==typeof(i=e)&&r.test(i)&&(r=(i=a(i.match(r),4))[1],t=i[2],i=i[3],new Date(i,r,t).getMonth()===parseInt(r))?[i,r,t]:null)||function(e){var t=/^(\d{1,2})[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](-?\d+)/i,r=/^(-?\d+)[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](\d{1,2})/i;let i,s,n;if("string"!=typeof e)return null;if(t.test(e)){t=a(e.match(t),4);n=t[1],s=t[2],i=t[3]}else{if(!r.test(e))return null;t=a(e.match(r),4);i=t[1],s=t[2],n=t[3]}if(l(s))s=l(s);else if(isNaN(s))return null;return[i,s,n]}(e)||function(t){var r=/^([a-z]{3,10}|-?\d+)[^\w-]+([a-z]{3,10}|-?\d+)$/i;if("string"==typeof t&&r.test(t)){t=t.match(r).slice(1,3);let e;if(l(t[1]))e=l(t.pop());else if(l(t[0]))e=l(t.shift());else{if(t.some(isNaN)||t.every(e=>+e<0))return null;e=+t[0]<0||+t[0]>+t[1]&&0<+t[1]?t.pop():t.shift()}return[t.pop(),e]}return null}(e)||function(e){if("string"!=typeof e)return null;var t=e.match(/^(\d+) ?(a\.?d\.?|b\.?c\.?)$/i);if(t){const r=t.slice(1),i=a(r,2),e=i[0],s=i[1];return[e*("a"===s.toLowerCase()[0]?1:-1)]}return/^-?\d+$/.test(e)?[e]:null}(e);return i&&i.map(e=>parseInt(e))}r.default=function(e,t){var r=[],i="string"==typeof e&&(i=e,o.test(i)?i.match(o).slice(1,3):i.split(n)),s=(t?r.push(e,t):i&&2===i.length?r.push(...i):r.push(e),r.map(p));return s.filter(Boolean).length===r.length?{"date-parts":s}:{raw:t?r.join("/"):e}}},{}],45:[function(e,t,r){"use strict";function i(e,t,r){if(e.length>=t)return e;for(;e.length<t;)e=r+e;return e.slice(-t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e,t="-"){if(!e["date-parts"])return e.raw;var r=e["date-parts"][0].map(e=>e.toString());switch(r.length){case 3:r[2]=i(r[2],2,"0");case 2:r[1]=i(r[1],2,"0");case 1:r[0]=i(r[0],4,"0")}return r.join(t)}},{}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"format",{enumerable:!0,get:function(){return s.default}});var i=n(e("./input")),s=n(e("./output"));function n(e){return e&&e.__esModule?e:{default:e}}},{"./input":47,"./output":48}],47:[function(e,t,r){"use strict";function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],i=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.parse=r.types=r.scope=void 0;var i=e=>e.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1"),s=e=>`(?:${e.join("|")})\\b`,n=(e,t)=>new RegExp(`(?:^| )(${e}$)`,t),a=s(["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"].map(i));const p=s(["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"].map(i));i=s(["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"]);const c=new RegExp(`^((?:${a} )*)(.*)$`,"i"),h=n(`(?:${p}, )*(?:${p})`,"i"),f=n(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source+".*"),d=n(`(?:${/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source}.*|${i}.*|\\S*)`);r.default=r.parse=function(e=""){"string"!=typeof e&&(e+="");let t="",r="",i="";r=/[^.], /.test(e)?(s=e.split(", "),i=s.shift(),n=RegExp(p).exec(s.join(", ")),t=s.splice(n&&0!==n.index?0:-1,1)[0],s.join(", ")):(s=(n=e.split(h,2)).shift().split(d,2),t=s[0],i=s[1],n.pop());var s=t.match(c),n=m(s,3),s=n[1],n=n[2],a=r,o=m(i.split(f,2).reverse(),2),l=o[0],o=o[1];if(!n&&l)return l.includes(" ")?{literal:l}:{family:l};if(l){const u={"dropping-particle":s,given:n,suffix:a,"non-dropping-particle":o,family:l};return Object.keys(u).forEach(e=>{u[e]||delete u[e]}),u}return{literal:e}},r.scope="@name";r.types="@name"},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const s=["dropping-particle","given"],n=["suffix"],a=["non-dropping-particle","family"];r.default=function(t,e=!1){var r,i=e=>e.map(e=>t[e]||"").filter(Boolean).join(" ");return t.literal||(e?(e=i(n)?", "+i(n):"",r=i(s)?", "+i(s):"",i(a)+e+r):""+i([...s,...n,...a]))}},{}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./mapping/biblatexTypes.json")),s=n(e("./mapping/bibtexTypes.json")),e=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var n;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=s?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r])}return i.default=e,t&&t.set(e,i),i}(e("./input/constants.js"));function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function n(e){return e&&e.__esModule?e:{default:e}}r.default={constants:e,types:{biblatex:i.default,bibtex:s.default},parse:{biblatex:!0,strict:!1,sentenceCase:"never"},format:{useIdAsLabel:!1,asciiOnly:!0},biber:{annotationMarker:"+an",namedAnnotationMarker:":"}}},{"./input/constants.js":52,"./mapping/biblatexTypes.json":62,"./mapping/bibtexTypes.json":64}],50:[function(e,t,r){"use strict";var i=e("@citation-js/core"),s=e("./input/index.js"),n=a(e("./config.js")),e=a(e("./output/index.js"));function a(e){return e&&e.__esModule?e:{default:e}}i.plugins.add(s.ref,{input:s.formats,output:e.default,config:n.default})},{"./config.js":49,"./input/index.js":56,"./output/index.js":71,"@citation-js/core":"citation-js"}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.textEntry=r.text=r.parse=void 0;const s={splitEntries:/\n\s*(?=\[)/g,parseEntry:/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,splitPairs:/((?=.)\s)*\n\s*/g,splitPair:/:(.*)/},i=e=>{var[,e,t]=e.match(s.parseEntry)||[];if(e&&t){const i={type:"book",label:e,properties:{}};return t.trim().split(s.splitPairs).filter(e=>e).forEach(e=>{let[t,r]=e.split(s.splitPair);r&&(t=t.trim(),r=r.trim(),"type"===t?i.type=r:i.properties[t]=r)}),i}return{}};r.textEntry=i;r.text=r.parse=e=>e.trim().split(s.splitEntries).map(i)},{}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sentenceCaseLanguages=r.required=r.mathScripts=r.mathScriptFormatting=r.mathCommands=r.ligatures=r.ligaturePattern=r.formattingEnvs=r.formattingCommands=r.formatting=r.fieldTypes=r.diacritics=r.defaultStrings=r.commands=r.argumentCommands=void 0;var i=n(e("./required.json")),s=n(e("./fieldTypes.json")),e=n(e("./unicode.json"));function n(e){return e&&e.__esModule?e:{default:e}}r.required=i.default,r.fieldTypes=s.default,r.diacritics=e.default.diacritics,r.commands=e.default.commands,r.mathCommands=e.default.mathCommands,r.defaultStrings={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},r.formattingEnvs={it:"italics",itshape:"italics",sl:"italics",slshape:"italics",em:"italics",bf:"bold",bfseries:"bold",sc:"smallcaps",scshape:"smallcaps",rm:void 0,sf:void 0,tt:void 0},r.formattingCommands={textit:"italics",textsl:"italics",emph:"italics",mkbibitalic:"italics",mkbibemph:"italics",textbf:"bold",strong:"bold",mkbibbold:"bold",textsc:"smallcaps",textsuperscript:"superscript",textsubscript:"subscript",enquote:"quotes",mkbibquote:"quotes",textmd:void 0,textrm:void 0,textsf:void 0,texttt:void 0,textup:void 0},r.formatting={italics:["<i>","</i>"],bold:["<b>","</b>"],superscript:["<sup>","</sup>"],subscript:["<sub>","</sub>"],smallcaps:['<span style="font-variant:small-caps;">',"</span>"],nocase:['<span class="nocase">',"</span>"],quotes:["“","”"]},r.argumentCommands={ElsevierGlyph(e){return String.fromCharCode(parseInt(e,16))},href(e,t){return e},url(e){return e}},r.ligaturePattern=/---?|''|``|~/g,r.ligatures={"--":"–","---":"—","``":"“","''":"”","~":" "},r.mathScriptFormatting={"^":"superscript",sp:"superscript",_:"subscript",sb:"subscript",mathrm:void 0},r.mathScripts={"^":{0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻","=":"⁼","(":"⁽",")":"⁾",i:"ⁱ",n:"ⁿ"},_:{0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉","+":"₊","-":"₋","=":"₌","(":"₍",")":"₎",a:"ₐ",e:"ₑ",o:"ₒ",x:"ₓ","ə":"ₔ",h:"ₕ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",s:"ₚ",p:"ₛ",t:"ₜ"}},r.sentenceCaseLanguages=["american","british","canadian","english","australian","newzealand","usenglish","ukenglish","en","eng","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","anglais"]},{"./fieldTypes.json":54,"./required.json":58,"./unicode.json":59}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(e){i.default.parse.strict&&u(e,n.required.biblatex);return(0,s.parse)(e.map(m))},r.parseBibtex=function(e){i.default.parse.strict&&u(e,n.required.bibtex);return(0,s.parseBibtex)(e.map(m))};var i=(r=e("../config.js"))&&r.__esModule?r:{default:r},s=e("../mapping/index.js"),a=e("./value.js"),n=e("./constants.js");function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function l(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}function u(e,t){var r=[];for(const{type:s,label:n,properties:a}of e)if(s in t){var i=[];for(const o of t[s])Array.isArray(o)&&!o.some(e=>e in a)?i.push(o.join("/")):"string"!=typeof o||o in a||i.push(o);i.length&&r.push([n,"missing fields: "+i.join(", ")])}else r.push([n,`invalid type: "${s}"`]);if(r.length)throw new RangeError(["Invalid entries:"].concat(r.map(([e,t])=>`  - ${e} has `+t)).join("\n"))}function m(e){var t={};"language"in e.properties&&(t.language=(0,a.parse)(e.properties.language,"language"));for(const i in e.properties){var r=e.properties[i];""!==r&&(t[i]=(0,a.parse)(r+"",i,t.language))}for(const s in e.annotations)for(const n in e.annotations[s])t[s+"+an:"+n]=(0,a.parseAnnotation)(e.annotations[s][n]);return l(l({},e),{},{properties:t})}},{"../config.js":49,"../mapping/index.js":66,"./constants.js":52,"./value.js":60}],54:[function(e,t,r){t.exports={abstract:["field","literal"],addendum:["field","literal"],afterword:["list","name"],annotation:["field","literal"],annotator:["list","name"],author:["list","name"],authortype:["field","key"],bookauthor:["list","name"],bookpagination:["field","key"],booksubtitle:["field","literal"],booktitle:["field","title"],booktitleaddon:["field","literal"],chapter:["field","literal"],commentator:["list","name"],date:["field","date"],doi:["field","verbatim"],edition:["field","literal"],editor:["list","name"],editora:["list","name"],editorb:["list","name"],editorc:["list","name"],editortype:["field","key"],editoratype:["field","key"],editorbtype:["field","key"],editorctype:["field","key"],eid:["field","literal"],entrysubtype:["field","literal"],eprint:["field","verbatim"],eprintclass:["field","literal"],eprinttype:["field","literal"],eventdate:["field","date"],eventtitle:["field","title"],eventtitleaddon:["field","literal"],file:["field","verbatim"],foreword:["list","name"],holder:["list","name"],howpublished:["field","literal"],indextitle:["field","literal"],institution:["list","literal"],introduction:["list","name"],isan:["field","literal"],isbn:["field","literal"],ismn:["field","literal"],isrn:["field","literal"],issn:["field","literal"],issue:["field","literal"],issuesubtitle:["field","literal"],issuetitle:["field","literal"],iswc:["field","literal"],journalsubtitle:["field","literal"],journaltitle:["field","literal"],label:["field","literal"],language:["list","key"],library:["field","literal"],location:["list","literal"],mainsubtitle:["field","literal"],maintitle:["field","title"],maintitleaddon:["field","literal"],month:["field","literal"],nameaddon:["field","literal"],note:["field","literal"],number:["field","literal"],organization:["list","literal"],origdate:["field","date"],origlanguage:["list","key"],origlocation:["list","literal"],origpublisher:["list","literal"],origtitle:["field","title"],pages:["field","range"],pagetotal:["field","literal"],pagination:["field","key"],part:["field","literal"],publisher:["list","literal"],pubstate:["field","key"],reprinttitle:["field","literal"],series:["field","title"],shortauthor:["list","name"],shorteditor:["list","name"],shorthand:["field","literal"],shorthandintro:["field","literal"],shortjournal:["field","literal"],shortseries:["field","literal"],shorttitle:["field","title"],subtitle:["field","literal"],title:["field","title"],titleaddon:["field","literal"],translator:["list","name"],type:["field","title"],url:["field","uri"],urldate:["field","date"],venue:["field","literal"],version:["field","literal"],volume:["field","integer"],volumes:["field","integer"],year:["field","literal"],crossref:["field","entry key"],entryset:["separated","literal"],execute:["field","code"],gender:["field","gender"],langid:["field","identifier"],langidopts:["field","literal"],ids:["separated","entry key"],indexsorttitle:["field","literal"],keywords:["separated","literal"],options:["separated","options"],presort:["field","string"],related:["separated","literal"],relatedoptions:["separated","literal"],relatedtype:["field","identifier"],relatedstring:["field","literal"],sortkey:["field","literal"],sortname:["list","name"],sortshorthand:["field","literal"],sorttitle:["field","literal"],sortyear:["field","integer"],xdata:["separated","entry key"],xref:["field","entry key"],namea:["list","name"],nameb:["list","name"],namec:["list","name"],nameatype:["field","key"],namebtype:["field","key"],namectype:["field","key"],lista:["list","literal"],listb:["list","literal"],listc:["list","literal"],listd:["list","literal"],liste:["list","literal"],listf:["list","literal"],usera:["field","literal"],userb:["field","literal"],userc:["field","literal"],userd:["field","literal"],usere:["field","literal"],userf:["field","literal"],verba:["field","literal"],verbb:["field","literal"],verbc:["field","literal"],address:["list","literal"],annote:["field","literal"],archiveprefix:["field","literal"],journal:["field","literal"],key:["field","literal"],pdf:["field","verbatim"],primaryclass:["field","literal"],school:["list","literal"],numpages:["field","integer"],pmid:["field","literal"],pmcid:["field","literal"]}},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bibtexGrammar=void 0,r.parse=function(e){return h.parse(p.reset(e))};var n=e("@citation-js/core"),i=s(e("moo")),a=s(e("../config.js")),e=e("./constants.js");function s(e){return e&&e.__esModule?e:{default:e}}function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function l(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}var u=/[a-zA-Z_][a-zA-Z0-9_:+-]*/,m={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}};const p=i.default.states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:l(l({},m),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:u,next:"dataEntryContents"}}),otherEntryContents:l(l({},m),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:l(l({},m),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:l(l({},m),{},{identifier:u,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},quote:{match:'"',pop:!0},text:{match:/(?:\\[\\{]|[^{"])+/,lineBreaks:!0}},bracedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:"}",pop:!0},text:{match:/(?:\\[\\{}]|[^{}])+/,lineBreaks:!0}}}),c={"(":")","{":"}"},h=r.bibtexGrammar=new n.util.Grammar({Main(){for(var e=[];;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;e.push(this.consumeRule("Entry"))}return e.filter(Boolean)},_(){let e;for(;e!==this.token;)e=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){this.consumeToken("at"),this.consumeRule("_");var e,t,r=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase(),i=(this.consumeRule("_"),this.consumeToken("lbrace").value);this.consumeRule("_");let s;"string"===r?([e,t]=this.consumeRule("Field"),this.state.strings[e]=t):"preamble"===r?this.consumeRule("Expression"):(e=this.consumeToken("label").value,this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_"),t=this.consumeRule("EntryBody"),s=l({type:r,label:e},t)),this.consumeRule("_");r=this.consumeToken("rbrace").value;return r!==c[i]&&n.logger.warn("[plugin-bibtex]",`entry started with "${i}", but ends with "${r}"`),s},EntryBody(){for(var r={properties:{}};this.matchToken("identifier");){var[i,s]=this.consumeRule("Field");let e,t="default";if(i.endsWith(a.default.biber.annotationMarker)?e=i.slice(0,-a.default.biber.annotationMarker.length):i.includes(a.default.biber.annotationMarker+a.default.biber.namedAnnotationMarker)&&([e,t]=i.split(a.default.biber.annotationMarker+a.default.biber.namedAnnotationMarker)),e?(r.annotations||(r.annotations={}),r.annotations[e]||(r.annotations[e]={}),r.annotations[e][t]=s):r.properties[i]=s,this.consumeRule("_"),!this.consumeToken("comma",!0))break;this.consumeRule("_")}return r},Field(){var e=this.consumeToken("identifier").value.toLowerCase(),t=(this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_"),this.consumeRule("Expression"));return[e,t]},Expression(){let e=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),e+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return e},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value.toLowerCase()]||"":this.matchToken("number")?parseInt(this.consumeToken("number")):this.matchToken("quote")?this.consumeRule("QuoteString"):this.consumeRule("BracketString")},QuoteString(){let e="";for(this.consumeToken("quote");!this.matchToken("quote");)e+=this.consumeRule("Text");return this.consumeToken("quote"),e},BracketString(){let e="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)e+=this.consumeRule("Text");return this.consumeToken("rbrace"),e},Text(){return this.matchToken("lbrace")?`{${this.consumeRule("BracketString")}}`:this.consumeToken("text").value}},{strings:e.defaultStrings})},{"../config.js":49,"./constants.js":52,"@citation-js/core":"citation-js",moo:87}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ref=r.formats=void 0;var i=e("./file.js"),s=e("./bibtxt.js"),n=e("./entries.js");r.ref="@bibtex",r.formats={"@biblatex/text":{parse:i.parse,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@biblatex/entry+object":{parse(e){return(0,n.parse)([e])},parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@biblatex/entries+list":{parse:n.parse,parseType:{elementConstraint:"@biblatex/entry+object"}},"@bibtex/text":{parse:i.parse,outputs:"@bibtex/entries+list"},"@bibtex/entry+object":{parse(e){return(0,n.parseBibtex)([e])}},"@bibtex/entries+list":{parse:n.parseBibtex},"@bibtxt/text":{parse:s.parse,parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}}}},{"./bibtxt.js":51,"./entries.js":53,"./file.js":55}],57:[function(e,t,r){"use strict";function o(t){if(0!==t.length){let e="";for(;1<t.length;){var{value:r,hyphenated:i}=t.shift();e+=r+(i?"-":" ")}var s=e+t[0].value;return s[0]&&s}}function l(e,t=!0){var r=[],i=[];if(t)for(;1<e.length&&!1!==e[0].upperCase;){for(r.push(...i),i.length=0;1<e.length&&!1!==e[0].upperCase&&!e[0].hyphenated;)r.push(e.shift());for(;0<e.length&&!1!==e[0].upperCase&&e[0].hyphenated;)i.push(e.shift())}for(var s=[],n=[];1<e.length;){for(s.push(...n),n.length=0;1<e.length&&!1===e[0].upperCase;)s.push(e.shift());for(;0<e.length&&!1!==e[0].upperCase;)n.push(e.shift())}return i.length&&n.unshift(...i),e.length&&n.push(e[0]),[o(r),o(s),o(n)]}Object.defineProperty(r,"__esModule",{value:!0}),r.formatNameParts=o,r.getStringCase=function(t){var r=t.toUpperCase(),i=t.toLowerCase();for(let e=0;e<t.length;e++)if(r[e]!==i[e])return r[e]===t[e];return null},r.orderNameParts=l,r.orderNamePieces=function(e){if(e[0][0].label){const i={};for(var[{value:t,label:r}]of e)i[r]=t;return i}const i={},[s,n,a]=l(e[0],1===e.length);a&&(i.family=a);n&&(i.prefix=n);3===e.length?(i.given=o(e[2]),i.suffix=o(e[1])):2===e.length?i.given=o(e[1]):s&&(i.given=s);return i}},{}],58:[function(e,t,r){t.exports={biblatex:{article:["author","title","journaltitle",["year","date"]],book:["author","title",["year","date"]],mvbook:["author","title",["year","date"]],inbook:["author","title","booktitle",["year","date"]],booklet:[["author","editor"],"title",["year","date"]],collection:["editor","title",["year","date"]],mvcollection:["editor","title",["year","date"]],incollection:["author","title","booktitle",["year","date"]],dataset:[["author","editor"],"title",["year","date"]],online:[["author","editor"],"title",["year","date"],["doi","eprint","url"]],patent:["author","title","number",["year","date"]],periodical:["editor","title",["year","date"]],proceedings:["title",["year","date"]],mvproceedings:["title",["year","date"]],inproceedings:["author","title","booktitle",["year","date"]],report:["author","title","type","institution",["year","date"]],thesis:["author","title","type","institution",["year","date"]],unpublished:["author","title",["year","date"]],conference:["author","title","booktitle",["year","date"]],electronic:[["author","editor"],"title",["year","date"],["doi","eprint","url"]],mastersthesis:["author","title","institution",["year","date"]],phdthesis:["author","title","institution",["year","date"]],techreport:["author","title","institution",["year","date"]],www:[["author","editor"],"title",["year","date"],["doi","eprint","url"]]},bibtex:{article:["author","title","journal","year"],book:[["author","editor"],"title","publisher","year"],booklet:["title"],inbook:[["author","editor"],"title",["chapter","pages"],"publisher","year"],incollection:["author","title","booktitle","publisher","year"],inproceedings:["author","title","booktitle","year"],mastersthesis:["author","title","school","year"],phdthesis:["author","title","school","year"],proceedings:["title","year"],techreport:["author","title","institution","year"],unpublished:["author","title","note"]}}},{}],59:[function(e,t,r){t.exports={diacritics:{"`":"̀","'":"́","^":"̂","~":"̃","=":"̄",u:"̆",".":"̇",'"':"̈",r:"̊",H:"̋",v:"̌",b:"̲",d:"̣",c:"̧",k:"̨",t:"͡",textcommabelow:"̦"},commands:{textquotesingle:"'",textasciigrave:"`",textquotedbl:'"',textdollar:"$",textless:"<",textgreater:">",textbackslash:"\\",textasciicircum:"^",textunderscore:"_",textbraceleft:"{",textbar:"|",textbraceright:"}",textasciitilde:"~",textexclamdown:"¡",textcent:"¢",textsterling:"£",textcurrency:"¤",textyen:"¥",textbrokenbar:"¦",textsection:"§",textasciidieresis:"¨",textcopyright:"©",textordfeminine:"ª",guillemetleft:"«",guillemotleft:"«",textlnot:"¬",textregistered:"®",textasciimacron:"¯",textdegree:"°",textpm:"±",texttwosuperior:"²",textthreesuperior:"³",textasciiacute:"´",textmu:"µ",textparagraph:"¶",textperiodcentered:"·",textonesuperior:"¹",textordmasculine:"º",guillemetright:"»",guillemotright:"»",textonequarter:"¼",textonehalf:"½",textthreequarters:"¾",textquestiondown:"¿",AE:"Æ",DH:"Ð",texttimes:"×",O:"Ø",TH:"Þ",ss:"ß",ae:"æ",dh:"ð",textdiv:"÷",o:"ø",th:"þ",DJ:"Đ",dj:"đ",i:"ı",IJ:"Ĳ",ij:"ĳ",L:"Ł",l:"ł",NG:"Ŋ",ng:"ŋ",OE:"Œ",oe:"œ",textflorin:"ƒ",j:"ȷ",textasciicaron:"ˇ",textasciibreve:"˘",textacutedbl:"˝",textgravedbl:"˵",texttildelow:"˷",textbaht:"฿",SS:"ẞ",textcompwordmark:"‌",textendash:"–",textemdash:"—",textbardbl:"‖",textquoteleft:"‘",textquoteright:"’",quotesinglbase:"‚",textquotedblleft:"“",textquotedblright:"”",quotedblbase:"„",textdagger:"†",textdaggerdbl:"‡",textbullet:"•",textellipsis:"…",textperthousand:"‰",textpertenthousand:"‱",guilsinglleft:"‹",guilsinglright:"›",textreferencemark:"※",textinterrobang:"‽",textfractionsolidus:"⁄",textlquill:"⁅",textrquill:"⁆",textdiscount:"⁒",textcolonmonetary:"₡",textlira:"₤",textnaira:"₦",textwon:"₩",textdong:"₫",texteuro:"€",textpeso:"₱",textcelsius:"℃",textnumero:"№",textcircledP:"℗",textrecipe:"℞",textservicemark:"℠",texttrademark:"™",textohm:"Ω",textmho:"℧",textestimated:"℮",textleftarrow:"←",textuparrow:"↑",textrightarrow:"→",textdownarrow:"↓",textminus:"−",Hwithstroke:"Ħ",hwithstroke:"ħ",textasteriskcentered:"∗",textsurd:"√",textlangle:"〈",textrangle:"〉",textblank:"␢",textvisiblespace:"␣",textopenbullet:"◦",textbigcircle:"◯",textmusicalnote:"♪",textmarried:"⚭",textdivorced:"⚮",textinterrobangdown:"⸘",textcommabelow:null,copyright:"©"},mathCommands:{Gamma:"Γ",Delta:"Δ",Theta:"Θ",Lambda:"Λ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Phi:"Φ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",varepsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",pi:"π",rho:"ρ",varsigma:"ς",sigma:"σ",tau:"τ",upsilon:"υ",varphi:"φ",chi:"χ",psi:"ψ",omega:"ω",vartheta:"ϑ",Upsilon:"ϒ",phi:"ϕ",varpi:"ϖ",varrho:"ϱ",epsilon:"ϵ"}}},{}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(e,t,r=[]){t=a.fieldTypes[t]||[];return d.parse(c.reset(e,{state:function(e){if("name"===e[1])return"namesLiteral";switch(e[0]){case"list":return"listLiteral";case"separated":return"separatedLiteral";default:return"stringLiteral"}}(t),line:0,col:0}),function(e,t){if("name"===e[1])return"list"===e[0]?"StringNames":"Name";{var r;if("title"===e[1])return"always"===(r=n.default.parse.sentenceCase)||"english"===r&&function(e){if(Array.isArray(e))return e.every(g);return g(e)}(t)?"StringTitleCase":"String"}switch("field"===e[0]?e[1]:e[0]){case"list":return"StringList";case"separated":return"StringSeparated";case"verbatim":return"StringVerbatim";case"uri":return"StringUri";default:return"String"}}(t,r))},r.parseAnnotation=function(e){return d.parse(c.reset(e,{state:"annotation",line:0,col:0}),"Annotations")},r.valueGrammar=void 0;var i=e("@citation-js/core"),s=u(e("moo")),n=u(e("../config.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var r,i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e){var n;"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((n=s?Object.getOwnPropertyDescriptor(e,r):null)&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=e[r])}return i.default=e,t&&t.set(e,i),i}(e("./constants.js")),o=e("./name.js");function l(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(l=function(e){return e?r:t})(e))}function u(e){return e&&e.__esModule?e:{default:e}}function m(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function p(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}e={commandBegin:{match:"\\begin",push:"environment"},command:{match:/\\(?:[a-zA-Z]+|.) */,value:e=>e.slice(1).trim()},lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/[\s]+|~/,lineBreaks:!0,value(e){return"~"===e?" ":" "}}};const c=s.default.states({stringLiteral:p(p({},e),{},{text:/[^{$}\s~\\]+/}),namesLiteral:p(p({and:/\s+[aA][nN][dD]\s+/,comma:",",hyphen:"-",equals:"="},e),{},{text:/[^{$}\s~\\,=-]+/}),listLiteral:p(p({and:/\s+and\s+/},e),{},{text:/[^{$}\s~\\]+/}),separatedLiteral:p(p({comma:","},e),{},{text:/[^{$}\s~\\,]+/}),annotation:p(p({},e),{},{colon:":",equals:"=",comma:",",semicolon:";",quote:'"',itemCount:/\d+/,text:/[^{$}\s~\\":;,=]+/}),bracedLiteral:p(p({},e),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s~\\]+/}),mathLiteral:p(p({},e),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s~\\^_]+/}),environment:p(p({commandEnd:{match:"\\end",pop:!0}},e),{},{text:/[^{$}\s~\\]+/})});function h(e){return e[0],e}function f(e,t){return t in a.formatting?e&&a.formatting[t].join(e):e}const d=r.valueGrammar=new i.util.Grammar({String(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return h(e)},StringNames(){for(var e=[];;){if(this.consumeToken("whitespace",!0),e.push(this.consumeRule("Name")),this.consumeToken("whitespace",!0),this.matchEndOfFile())return e;this.consumeToken("and")}},Name(){for(var e=[];;){if(e.push(this.consumeRule("NamePiece")),this.matchEndOfFile()||this.matchToken("and"))return(0,o.orderNamePieces)(e);this.consumeToken("comma"),this.consumeToken("whitespace",!0)}},NamePiece(){for(var e=[];;){var t=this.consumeRule("NameToken");if(t.label)return t.label=(0,o.formatNameParts)([...e,{value:t.label}]),[t];if(e.push(t),this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma"))return e;for(;this.matchToken("hyphen")||this.matchToken("whitespace");)this.consumeToken()}},NameToken(){let e=null,t="";for(;;)if(null===e&&this.matchToken("text")){var r=this.consumeToken().value;t+=r,e=(0,o.getStringCase)(r)}else{if(this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma")||this.matchToken("whitespace"))return{value:t,upperCase:e};if(this.matchToken("hyphen"))return{value:t,upperCase:e,hyphenated:!0};if(this.matchToken("equals"))return this.consumeToken("equals"),(r=this.consumeRule("NamePiece"))[0].label&&(t+="="+r[0].label),{value:(0,o.formatNameParts)(r),label:t};t+=this.consumeRule("Text")}},StringList(){for(var t=[];!this.matchEndOfFile();){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("and");)e+=this.consumeRule("Text");t.push(h(e)),this.consumeToken("and",!0)}return 1===t.length?t[0]:t},StringSeparated(){for(var t=[];!this.matchEndOfFile();){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("comma");)e+=this.consumeRule("Text");t.push(e.trim()),this.consumeToken("comma",!0),this.consumeToken("whitespace",!0)}return t},StringVerbatim(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeToken().text;return h(e)},StringUri(){var t=this.consumeRule("StringVerbatim");try{return decodeURI(t)===t?encodeURI(t):t}catch(e){return encodeURI(t)}},StringTitleCase(){this.state.sentenceCase=!0;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return h(e)},Annotations(){for(var e={};;){var{scope:t,item:r,part:i,value:s}=this.consumeRule("Annotation");if("part"===t?(e.part||(e.part=[]),e.part[r]||(e.part[r]={}),e.part[r][i]=s):"item"===t?(e.item||(e.item=[]),e.item[r]=s):e.field=s,this.matchEndOfFile())break;this.consumeToken("semicolon"),this.consumeRule("_")}return e},Annotation(){var t={};if(this.matchToken("itemCount")?(t.item=parseInt(this.consumeToken("itemCount"))-1,this.matchToken("colon")?(this.consumeToken("colon"),t.part=this.consumeToken("text"),t.scope="part"):t.scope="item"):t.scope="field",this.consumeToken("equals"),this.consumeRule("_"),this.matchToken("quote")){this.consumeToken("quote");let e="";for(;!this.matchToken("quote");)this.matchToken("itemCount")||this.matchToken("colon")||this.matchToken("comma")||this.matchToken("semicolon")||this.matchToken("equals")?(e+=this.token.value,this.token=this.lexer.next()):e+=this.consumeRule("Text");this.consumeToken("quote"),t.value=h(e),this.consumeRule("_")}else{t.value=[];let e="";for(;;)if(e+=this.consumeRule("Text"),this.matchToken("comma"))this.consumeToken("comma"),this.consumeRule("_"),t.value.push(h(e)),e="";else if(this.matchEndOfFile()||this.matchToken("semicolon")){t.value.push(h(e));break}}return t},BracketString(){let e="";this.consumeToken("lbrace");var t=this.state.sentenceCase;for(this.state.sentenceCase=t&&this.matchToken("command"),(r=this.state).partlyLowercase&&(r.partlyLowercase=this.state.sentenceCase);!this.matchToken("rbrace");)e+=this.consumeRule("Text");var r=t&&!this.state.sentenceCase&&this.state.partlyLowercase;return this.state.sentenceCase=t,this.consumeToken("rbrace"),r?f(e,"nocase"):e},MathString(){let e="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");)if(this.matchToken("script")){const i=this.consumeToken("script").value;var t=this.consumeRule("Text").split("");t.every(e=>e in a.mathScripts[i])?e+=t.map(e=>a.mathScripts[i][e]).join(""):(r=a.mathScriptFormatting[i],e+=a.formatting[r].join(t.join("")))}else{if(this.matchToken("command")){var r=this.token.value;if(r in a.mathScriptFormatting){this.consumeToken("command");t=this.consumeRule("BracketString");e+=f(t,a.mathScriptFormatting[r]);continue}}e+=this.consumeRule("Text")}return this.consumeToken("mathShift"),e},Text(){var e,t,r,i,s;return this.matchToken("lbrace")?this.consumeRule("BracketString"):this.matchToken("mathShift")?this.consumeRule("MathString"):this.matchToken("whitespace")?this.consumeToken("whitespace").value:this.matchToken("commandBegin")?this.consumeRule("EnclosedEnv"):this.matchToken("command")?this.consumeRule("Command"):(e=this.consumeToken("text").value.replace(a.ligaturePattern,e=>a.ligatures[e]),t=this.state.afterPunctuation,this.state.afterPunctuation=/[?!.:]$/.test(e),this.state.sentenceCase?([r,...i]=e,s=(i=i.join("")).toLowerCase(),i!==s?e:t?r+s:e.toLowerCase()):((i=this.state).partlyLowercase||(i.partlyLowercase=e===e.toLowerCase()&&e!==e.toUpperCase()),e))},Command(){var e=this.consumeToken("command"),t=e.value;if(t in a.formattingEnvs)return f(this.consumeRule("Env"),a.formattingEnvs[t]);if(t in a.formattingCommands)return f(this.consumeRule("BracketString"),a.formattingCommands[t]);if(t in a.commands)return a.commands[t];if(t in a.mathCommands)return a.mathCommands[t];if(t in a.diacritics&&!this.matchEndOfFile())return((r=this.consumeRule("Text"))[0]+a.diacritics[t]).normalize("NFC")+r.slice(1);if(t in a.argumentCommands){var r=a.argumentCommands[t],i=[];let e=r.length;for(;0<e--;)this.consumeToken("whitespace",!0),i.push(this.consumeRule("BracketString"));return r(...i)}return/^[&%$#_{}]$/.test(t)?e.text.slice(1):e.text},Env(){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("rbrace");)e+=this.consumeRule("Text");return e},EnclosedEnv(){this.consumeToken("commandBegin");var e=this.consumeRule("BracketString");let t="";for(;!this.matchToken("commandEnd");)t+=this.consumeRule("Text");var r=this.consumeToken("commandEnd"),i=this.consumeRule("BracketString");if(e!==i)throw new SyntaxError(this.lexer.formatError(r,`environment started with "${e}", ended with "${i}"`));return f(t,a.formattingEnvs[e])},_(){for(;this.matchToken("whitespace");)this.consumeToken("whitespace")}},{sentenceCase:!1,partlyLowercase:!1,afterPunctuation:!0});function g(e){return a.sentenceCaseLanguages.includes(e.toLowerCase())}},{"../config.js":49,"./constants.js":52,"./name.js":57,"@citation-js/core":"citation-js",moo:87}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("@citation-js/core"),s=e("@citation-js/date"),n=(o=e("./biblatexTypes.json"))&&o.__esModule?o:{default:o},a=e("./shared.js");var o=[{source:"note",target:"accessed",when:{source:!1,target:{note:!1,addendum:!1}},convert:{toSource(e){return`[Online; accessed ${(0,s.format)(e)}]`}}},{source:"numpages",target:"number-of-pages",when:{source:{pagetotal:!1},target:!1}},{source:"pmid",target:"PMID",when:{source:{eprinttype(e){return"pmid"!==e},archiveprefix(e){return"pmid"!==e}},target:!1}},{source:"pmcid",target:"PMCID",when:{target:!1}},{source:"s2id",target:"custom",convert:{toTarget(e){return{S2ID:e}},toSource({S2ID:e}){return e}}}],e=[{source:"annote",target:"annote",when:{source:{annotation:!1},target:!1}},{source:"address",target:"publisher-place",convert:a.Converters.PICK,when:{source:{location:!1},target:!1}},{source:["eprint","archiveprefix"],target:"PMID",convert:a.Converters.EPRINT,when:{source:{eprinttype:!1},target:!1}},{source:"journal",target:"container-title",when:{source:{maintitle:!1,booktitle:!1,journaltitle:!1},target:!1}},{source:"school",target:"publisher",convert:a.Converters.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:!1}}];r.default=new i.util.Translator([...e,...o,{source:"abstract",target:"abstract"},{source:"urldate",target:"accessed",convert:a.Converters.DATE},{source:"annotation",target:"annote"},{source:["author","author+an:orcid"],target:"author",convert:a.Converters.NAMES_ORCID},{source:"library",target:"call-number"},{source:"chapter",target:"chapter-number"},{source:"bookauthor",target:"container-author",convert:a.Converters.NAMES},{source:["maintitle","mainsubtitle","maintitleaddon"],target:"container-title",when:{source:!0,target:{"number-of-volumes":!0}},convert:a.Converters.TITLE},{source:["booktitle","booksubtitle","booktitleaddon"],target:"container-title",when:{source:{maintitle:!1},target:{"number-of-volumes":!1,type(e){return!e||!e.startsWith("article")}}},convert:a.Converters.TITLE},{source:["journaltitle","journalsubtitle","journaltitleaddon"],target:"container-title",when:{source:{[a.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}},convert:a.Converters.TITLE},{source:"shortjournal",target:"container-title-short",when:{source:{[a.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"shortjournal",target:"journalAbbreviation",when:{source:!1,target:{"container-title-short":!1}}},{source:"number",target:"collection-number",when:{source:{[a.TYPE]:["book","mvbook","inbook","bookinbook","suppbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"shortseries",target:"collection-title-short"},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:a.Converters.NAMES},{source:[a.TYPE,"entrysubtype","type"],target:["type","genre"],convert:{toTarget(e,t,r){return r||("mastersthesis"===e&&(r="mathesis"),"phdthesis"===e&&(r="phdthesis"),"techreport"===e&&(r="techreport")),[n.default.source[e]||"document",r||t]},toSource(e,t){e=n.default.target[e]||"misc";return t in a.TYPE_KEYS?[e,void 0,t]:[e,t]}}},{source:a.TYPE,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"eventdate",target:"event-date",convert:a.Converters.DATE},{source:"venue",target:"event-place"},{source:["eventtitle","eventtitleaddon"],target:"event-title",convert:a.Converters.EVENT_TITLE},{source:["eventtitle","eventtitleaddon"],target:"event",convert:a.Converters.EVENT_TITLE,when:{source:!1,target:{"event-title":!1}}},{source:a.LABEL,target:["id","citation-key","author","issued","year-suffix","title"],convert:a.Converters.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"issue",target:"issue",when:{source:{number:!1,[a.TYPE]:["article","periodical"]},target:{issue(e){return"string"==typeof e&&!e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","periodical"]}}},{source:"number",target:"issue",when:{source:{[a.TYPE]:["article","periodical","inproceedings"]},target:{issue(e){return e&&("number"==typeof e||e.match(/\d+/))},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:"date",target:"issued",convert:a.Converters.DATE},{source:["year","month","day"],target:"issued",convert:a.Converters.YEAR_MONTH,when:{source:{date:!1},target:!1}},{source:"location",target:"jurisdiction",when:{source:{type:"patent"},target:{type:"patent"}}},{source:"keywords",target:"keyword",convert:a.Converters.KEYWORDS},{source:"language",target:"language",convert:a.Converters.PICK},{source:"langid",target:"language",when:{source:{language:!1},target:!1}},{source:"note",target:"note"},{source:"addendum",target:"note",when:{source:{note:!1},target:!1}},{source:"eid",target:"number",when:{target:{type:["article-journal"]}}},{source:["isan","ismn","isrn","iswc"],target:"number",convert:a.Converters.STANDARD_NUMBERS,when:{source:{[a.TYPE](e){return"patent"!==e}},target:{type(e){return"patent"!==e}}}},{source:"number",target:"number",when:{source:{[a.TYPE]:["patent","report","techreport","legislation"]},target:{type:["patent","report","legislation"]}}},{source:"origdate",target:"original-date",convert:a.Converters.DATE},{source:"origlocation",target:"original-publisher-place",convert:a.Converters.PICK},{source:"origpublisher",target:"original-publisher",convert:a.Converters.PICK},{source:"origtitle",target:"original-title"},{source:"pages",target:"page",when:{source:{bookpagination:[void 0,"page"]}},convert:a.Converters.PAGES},{source:"pagetotal",target:"number-of-pages"},{source:"part",target:"part-number"},{source:["eprint","eprinttype"],target:"PMID",convert:a.Converters.EPRINT},{source:"location",target:"publisher-place",convert:a.Converters.PICK},{source:"publisher",target:"publisher",convert:a.Converters.PICK,when:{source:!0,target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty"]}}},{source:"organization",target:"publisher",convert:a.Converters.PICK,when:{source:{publisher:!1},target:{type:"webpage"}}},{source:"institution",target:"publisher",convert:a.Converters.PICK,when:{source:{publisher:!1,organization:!1},target:{type:["report","thesis"]}}},{source:"howpublished",target:"publisher",convert:a.Converters.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1},target:{type:"manuscript"}}},{source:["pages","bookpagination"],target:"section",when:{source:{bookpagination:"section"},target:{page:!1}},convert:{toTarget(e){return e},toSource(e){return[e,"section"]}}},{source:"pubstate",target:"status",convert:a.Converters.STATUS},{source:"shorttitle",target:"title-short"},{source:"shorttitle",target:"shortTitle",when:{source:!1,target:{"title-short":!1}}},{source:["title","subtitle","titleaddon"],target:"title",convert:a.Converters.TITLE},{source:"translator",target:"translator",convert:a.Converters.NAMES},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:a.Converters.HOW_PUBLISHED,when:{source:{url:!1},target:!1}},{source:"version",target:"version"},{source:"volume",target:"volume"},{source:"volumes",target:"number-of-volumes"},{source:["issuetitle","issuesubtitle","issuetitleaddon"],target:"volume-title",convert:a.Converters.TITLE}])},{"./biblatexTypes.json":62,"./shared.js":67,"@citation-js/core":"citation-js","@citation-js/date":43}],62:[function(e,t,r){t.exports={source:{article:"article-journal",book:"book",mvbook:"book",inbook:"chapter",bookinbook:"book",booklet:"book",collection:"book",mvcollection:"book",incollection:"chapter",dataset:"dataset",manual:"report",misc:"document",online:"webpage",patent:"patent",periodical:"periodical",proceedings:"book",mvproceedings:"book",inproceedings:"paper-conference",reference:"book",mvreference:"book",inreference:"entry",report:"report",software:"software",thesis:"thesis",unpublished:"manuscript",artwork:"graphic",audio:"song",image:"figure",jurisdiction:"legal_case",legislation:"legislation",legal:"treaty",letter:"personal_communication",movie:"motion_picture",music:"musical_score",performance:"performance",review:"review",standard:"standard",video:"motion_picture",conference:"paper-conference",electronic:"webpage",mastersthesis:"thesis",phdthesis:"thesis",techreport:"report",www:"webpage"},target:{article:"article","article-journal":"article","article-magazine":"article","article-newspaper":"article",bill:"legislation",book:"book",broadcast:"audio",chapter:"inbook",classic:"unpublished",collection:"misc",dataset:"dataset",document:"misc",entry:"inreference","entry-dictionary":"inreference","entry-encyclopedia":"inreference",event:"misc",figure:"artwork",graphic:"artwork",hearing:"legal",interview:"audio",legal_case:"jurisdiction",legislation:"legislation",manuscript:"unpublished",motion_picture:"movie",musical_score:"music","paper-conference":"inproceedings",patent:"patent",performance:"performance",periodical:"periodical",personal_communication:"letter",post:"online","post-weblog":"online",regulation:"legal",report:"report",review:"review","review-book":"review",software:"software",song:"music",speech:"audio",standard:"standard",thesis:"thesis",treaty:"legal",webpage:"online"}}},{}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("@citation-js/core"),s=e("@citation-js/date"),n=(a=e("./bibtexTypes.json"))&&a.__esModule?a:{default:a},a=e("./shared.js");r.default=new i.util.Translator([{source:"note",target:"accessed",when:{source:!1,target:{note:!1}},convert:{toSource(e){return`[Online; accessed ${(0,s.format)(e)}]`}}},{source:"annote",target:"annote"},{source:"address",target:"publisher-place",convert:a.Converters.PICK},{source:"author",target:"author",convert:a.Converters.NAMES},{source:"chapter",target:"chapter-number"},{source:"number",target:"collection-number",when:{source:{[a.TYPE]:["book","mvbook","inbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"booktitle",target:"container-title",when:{target:{type:["chapter","paper-conference"]}}},{source:"journal",target:"container-title",when:{source:{[a.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:a.Converters.NAMES},{source:a.LABEL,target:["id","citation-key","author","issued","year-suffix","title"],convert:a.Converters.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"number",target:"issue",when:{source:{[a.TYPE]:["article","periodical","inproceedings"]},target:{issue(e){return"number"==typeof e||"string"==typeof e&&e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:["year","month","day"],target:"issued",convert:a.Converters.YEAR_MONTH},{source:"note",target:"note"},{source:"number",target:"number",when:{source:{[a.TYPE]:["patent","report","techreport"]},target:{type:["patent","report"]}}},{source:"eid",target:"number",when:{source:{number:!1},target:{type:["article-journal"]}}},{source:"pages",target:"page",convert:a.Converters.PAGES},{source:"publisher",target:"publisher",convert:a.Converters.PICK,when:{target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty","webpage"]}}},{source:"organization",target:"publisher",convert:a.Converters.PICK,when:{source:{publisher:!1},target:{type:"paper-conference"}}},{source:"institution",target:"publisher",convert:a.Converters.PICK,when:{source:{publisher:!1,organization:!1},target:{type:"report"}}},{source:"school",target:"publisher",convert:a.Converters.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:{type:"thesis"}}},{source:"howpublished",target:"publisher",convert:a.Converters.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1,school:!1},target:{type:"manuscript"}}},{source:"title",target:"title"},{source:[a.TYPE,"type"],target:["type","genre"],convert:{toTarget(e,t){var r=n.default.source[e]||"document";return t?[r,t]:"mastersthesis"===e?[r,"Master's thesis"]:"phdthesis"===e?[r,"PhD thesis"]:[r]},toSource(e,t){e=n.default.target[e]||"misc";return/^(master'?s|diploma) thesis$/i.test(t)?["mastersthesis"]:/^(phd|doctoral) thesis$/i.test(t)?["phdthesis"]:[e,t]}}},{source:a.TYPE,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:a.Converters.HOW_PUBLISHED,when:{target:{publisher:!1}}},{source:"volume",target:"volume"}])},{"./bibtexTypes.json":64,"./shared.js":67,"@citation-js/core":"citation-js","@citation-js/date":43}],64:[function(e,t,r){t.exports={source:{article:"article-journal",book:"book",booklet:"book",conference:"paper-conference",inbook:"chapter",incollection:"chapter",inproceedings:"paper-conference",manual:"report",mastersthesis:"thesis",misc:"document",phdthesis:"thesis",proceedings:"book",techreport:"report",unpublished:"manuscript"},target:{article:"article","article-journal":"article","article-magazine":"article","article-newspaper":"article",book:"book",chapter:"inbook",manuscript:"unpublished","paper-conference":"inproceedings",report:"techreport",review:"article","review-book":"article"}}},{}],65:[function(e,t,r){"use strict";function n(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function l(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=function(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}Object.defineProperty(r,"__esModule",{value:!0}),r.crossref=function e(t,r,i){if(r.crossref in i){const s=i[r.crossref];if(s.properties===r)return r;const n=l({},e(s.type,s.properties,i));if(delete n.ids,delete n.crossref,delete n.xref,delete n.entryset,delete n.entrysubtype,delete n.execute,delete n.label,delete n.options,delete n.presort,delete n.related,delete n.relatedoptions,delete n.relatedstring,delete n.relatedtype,delete n.shortand,delete n.shortandintro,delete n.sortkey,"mvbook"!==s.type&&"book"!==s.type||!u.has(t)||(n.bookauthor=n.author),s.type in p){const[a,o]=p[s.type];o.has(t)&&(n[a+"title"]=n.title,n[a+"subtitle"]=n.subtitle,"journal"!==a&&(n[a+"titleaddon"]=n.titleaddon),delete n.title,delete n.subtitle,delete n.titleaddon,delete n.shorttitle,delete n.sorttitle,delete n.indextitle,delete n.indexsorttitle)}return Object.assign(n,r)}return r};r=new Set(["book","inbook","bookinbook","suppbook"]);const u=new Set(["inbook","bookinbook","suppbook"]);var i=new Set(["collection","reference","incollection","inreference","suppcollection"]),s=new Set(["incollection","inreference","suppcollection"]),a=new Set(["proceedings","inproceedings"]),o=new Set(["inproceedings"]),m=new Set(["article","suppperiodical"]);const p={mvbook:["main",r],mvcollection:["main",i],mvreference:["main",i],mvproceedings:["main",a],book:["book",u],collection:["book",s],reference:["book",s],proceedings:["book",o],periodical:["journal",m]}},{}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e){return h(e,i.default)},r.formatBibtex=function(e){return h(e,s.default)},r.parse=function(e){return c(e,i.default)},r.parseBibtex=function(e){return c(e,s.default)};var n=e("./shared.js"),i=o(e("./biblatex.js")),s=o(e("./bibtex.js")),a=e("./crossref.js");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(null==e)return{};var r,i=function(e,t){if(null==e)return{};var r,i,s={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],0<=t.indexOf(r)||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(e),n=0;n<s.length;n++)r=s[n],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r]);return i}function u(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function m(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach(function(e){var t,r;t=i,r=s[e=e],(e=p(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(s,e))})}return i}function p(e){e=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}function c(e,i){const s={};for(const t of e)s[t.label]=t;return e.map(({type:e,label:t,properties:r})=>i.convertToTarget(m({[n.TYPE]:e,[n.LABEL]:t},(0,a.crossref)(e,r,s))))}function h(e,i){return e.map(e=>{var e=i.convertToSource(e),{[n.TYPE]:t,[n.LABEL]:r}=e;return{type:t,label:r,properties:l(e,[n.TYPE,n.LABEL].map(p))}})}},{"./biblatex.js":61,"./bibtex.js":63,"./crossref.js":65,"./shared.js":67}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TYPE_KEYS=r.TYPE=r.STANDARD_NUMBERS_PATTERN=r.MONTHS=r.LABEL=r.Converters=void 0,r.formatLabel=d,r.parseDate=h,r.parseMonth=f;var i=e("@citation-js/core"),o=(e=e("../config.js"))&&e.__esModule?e:{default:e};const s=new Set(["the","a","an"]),l=/(?:<\/?.*?>|[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F])+/g,n=/[^\u0020-\u007F]+/g;function a(e){return e?e.normalize("NFKD").replace(n,"").split(l).find(e=>e.length&&!s.has(e.toLowerCase())):""}const u=new i.util.Translator([{source:"given",target:"given"},{source:"family",target:"family"},{source:"suffix",target:"suffix"},{source:"prefix",target:"non-dropping-particle"},{source:"family",target:"literal",when:{source:!1,target:{family:!1,given:!1}}}]),m=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];r.TYPE="BibTeX type",r.LABEL="BibTeX label";const p=r.MONTHS={jan:1,feb:2,mar:3,apr:4,may:5,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,january:1,february:2,march:3,april:4,june:6,july:7,august:8,september:9,october:10,november:11,december:12};r.TYPE_KEYS={bathesis:"Bachelor's thesis",mathesis:"Master's thesis",phdthesis:"PhD thesis",candthesis:"Candidate thesis",techreport:"technical report",resreport:"research report",software:"computer software",datacd:"data cd",audiocd:"audio cd",patent:"patent",patentde:"German patent",patenteu:"European patent",patentfr:"French patent",patentuk:"British patent",patentus:"U.S. patent",patreq:"patent request",patreqde:"German patent request",patreqeu:"European patent request",patreqfr:"French patent request",patrequk:"British patent request",patrequs:"U.S. patent request"};const c=r.STANDARD_NUMBERS_PATTERN=/(^(?:ISAN )?(?:[0-9a-f]{4}-){4}[0-9a-z](?:-(?:[0-9a-f]{4}-){2}[0-9a-z])?$)|(^(?:979-?0-?|M-?)(?:\d{9}|(?=[\d-]{11}$)\d+-\d+-\d)$)|(^ISRN .{1,36}$)|(^(?:ISWC )?T-?\d{9}-?\d$)/i;function h(e){var e=e.split("T")[0].replace(/[?~%]$/,"").split("-"),t=+e[0].replace(/^Y(?=-?\d{4}\d+)/,"").replace(/X/g,"0"),r=+e[1],e=+e[2];return!r||20<r?[t]:e?[t,r,e]:[t,r]}function f(e){if(null==e)return[];if(+e)return[parseInt(e,10)];if((e=e.trim().toLowerCase())in p)return[p[e]];e=e.split(/\s+/);let t,r;return e[0]in p?(t=p[e[0]],r=parseInt(e[1])):e[1]in p&&(t=p[e[1]],r=parseInt(e[0])),r?[t,r]:t?[t]:[]}function d(e,t,r,i){let s="";return e&&e[0]&&(s+=a(e[0].family||e[0].literal)),t&&t["date-parts"]&&t["date-parts"][0]&&(s+=t["date-parts"][0][0]),r?s+=r:i&&(s+=a(i)),s}r.Converters={PICK:{toTarget(...e){return e.find(Boolean)},toSource(e){return[e]}},DATE:{toTarget(e){var t=e.split("/").map(e=>e&&".."!==e?h(e):void 0);return isNaN(t[0][0])?{literal:e}:{"date-parts":t}},toSource(e){if("date-parts"in e)return e["date-parts"].map(e=>e.map(e=>e.toString().padStart(2,"0")).join("-")).join("/")}},YEAR_MONTH:{toTarget(e,t,r){return isNaN(+e)?{literal:e}:isNaN(+r)||isNaN(+t)?{"date-parts":[[+e,...f(t)]]}:{"date-parts":[[+e,+t,+r]]}},toSource(e){var t,r;return"date-parts"in e?([e,t,r]=e["date-parts"][0],[e.toString(),t?r?m[t-1]+" "+r:t:void 0]):[]}},EPRINT:{toTarget(e,t){if("pubmed"===t)return e},toSource(e){return[e,"pubmed"]}},EVENT_TITLE:{toTarget(e,t){return t&&(e+=" ("+t+")"),e},toSource(e){return e.match(/^(.+)(?: \((.+)\))?$/).slice(1,3)}},HOW_PUBLISHED:{toTarget(e){if(e.startsWith("http"))return e}},KEYWORDS:{toTarget(e){return e.join(",")},toSource(e){return e.split(",")}},LABEL:{toTarget(e){return[e,e]},toSource(e,t,r,i,s,n){let a;return a=null===e?"null":void 0===e?"undefined":e.toString().replace(l,""),o.default.format.useIdAsLabel?a:t&&!l.test(t)?t:d(r,i,s,n)||a}},NAMES:{toTarget(e){return e.map(u.convertToTarget)},toSource(e){return e.map(u.convertToSource)}},NAMES_ORCID:{toTarget(e,i){return e.map((e,t)=>{var r,e=u.convertToTarget(e);return"string"==typeof(null==i||null==(r=i.item)?void 0:r[t])&&(e._orcid=i.item[t]),e})},toSource(t){var r=[],i=[];for(let e=0;e<t.length;e++)r.push(u.convertToSource(t[e])),t[e]._orcid&&(i[e]=t[e]._orcid);return[r,i.length?{item:i}:void 0]}},PAGES:{toTarget(e){return e.replace(/[–—]/,"-")},toSource(e){return e.replace("-","--")}},STANDARD_NUMBERS:{toTarget(...e){return e.find(Boolean)},toSource(e){e=e.toString().match(c);return e?e.slice(1,5):[]}},STATUS:{toSource(e){if(/^(inpreparation|submitted|forthcoming|inpress|prepublished)$/i.test(e))return e}},TITLE:{toTarget(e,t,r){return t&&(e+=": "+t),e},toSource(e){return[e]}}}},{"../config.js":49,"@citation-js/core":"citation-js"}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e,a){e=e.map(e=>{var t=e,r=a,i=[];for(const s in t.properties)if(i.push(l(s,t.properties[s],r)),t.annotations&&t.annotations[s])for(const n in t.annotations[s]){let e=s+o.default.biber.annotationMarker;"default"!==n&&(e+=o.default.biber.namedAnnotationMarker+n),i.push(l(e,t.annotations[s][n],r))}return r.entry.join(`@${t.type}{${t.label},${r.list.join(i.join(""))}}`)}).join("");return a.bibliographyContainer.join(e)};var o=(r=e("../config.js"))&&r.__esModule?r:{default:r};function l(e,t,r){return r.listItem.join(e+` = {${t}},`)}},{"../config.js":49}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e,s){e=e.map(e=>{var[{type:e,label:t,properties:r},i]=[e,s];return r=Object.entries(r).concat([["type",e]]).map(([e,t])=>i.listItem.join(e+": "+t)),i.entry.join(`[${t}]`+i.list.join(r.join("")))}).join("\n");return s.bibliographyContainer.join(e)}},{}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e){return(0,i.format)(e).map(s)},r.formatBibtex=function(e){return(0,i.formatBibtex)(e).map(s)};var i=e("../mapping/index.js"),l=e("./value.js");function s({type:e,label:t,properties:r}){var i={type:e,label:t,properties:{}};for(const o in r){var s=r[o],[n,a]=o.split("+an:");a?(i.annotations||(i.annotations={}),i.annotations[n]||(i.annotations[n]={}),i.annotations[n][a]=(0,l.formatAnnotation)(s)):i.properties[o]=(0,l.format)(o,s)}return i}},{"../mapping/index.js":66,"./value.js":72}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;function i(i,s){return function(e,t={}){var{type:r,format:r=r||"text"}=t;if(e=i(e),"object"===r)return e;if(n.plugins.dict.has(r))return s(e,n.plugins.dict.get(r),t);throw new RangeError(`Output dictionary "${r}" not available`)}}var n=e("@citation-js/core"),s=e("./entries.js"),a=e("./bibtex.js"),e=e("./bibtxt.js");r.default={bibtex:i(s.formatBibtex,a.format),biblatex:i(s.format,a.format),bibtxt:i(s.formatBibtex,e.format)}},{"./bibtex.js":68,"./bibtxt.js":69,"./entries.js":70,"@citation-js/core":"citation-js"}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.format=function(e,t){if(!(e in s.fieldTypes))return f(t,"verbatim");var[e,r]=s.fieldTypes[e];return e in m?function(e,t,r){const i=m[r];return e.map(e=>{e=f(e,t);return e.includes(i)?`{${e}}`:e}).join(i)}(t,r,e):f(t,r)},r.formatAnnotation=function(e){var t=[];e.field&&t.push("="+d(e.field));if(e.item)for(var[r,i]of Object.entries(e.item))i&&(r=parseInt(r)+1,t.push(r+"="+d(i)));if(e.part)for(var[s,n]of Object.entries(e.part))if(n){var a=parseInt(s)+1;for(const o in n)n[o]&&t.push(a+":"+o+"="+d(n[o]))}return t.join("; ")};var i=(r=e("../config.js"))&&r.__esModule?r:{default:r},s=e("../input/constants.js");const n={};for(const g in s.commands)n[s.commands[g]]=g;for(const b in s.diacritics)n[s.diacritics[b]]=b;for(const y in s.ligatures)n[s.ligatures[y]]=y;const a={};for(const v in s.mathCommands)a[s.mathCommands[v]]=v;const o=/[^a-zA-Z0-9\s!"#%&'()*+,\-./:;=?@[\]{}\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,l=/.[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]+/g,u=/[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,m={separated:",",list:" and "},p={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"};function c(e){return i.default.format.asciiOnly?e.normalize("NFKD").replace(o,e=>{return(e=e)in n?n[e]in s.ligatures?n[e]:`\\${n[e]}{}`:e in a?`$\\${a[e]}$`:""}).replace(l,e=>Array.from(e).reduce((e,t)=>`{\\${n[t]} ${e}}`)).replace(u,""):e}function h(e){const r=[];let t=e.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return(t=t.map((e,t)=>t%2==0?c(e):e in p?(r.push("/"+e.split(" ")[0]),p[e]):e===r[r.length-1]?(r.pop(),"}"):"")).join("")}function f(e,t){switch(t){case"title":return h(e).split(/(:\s*)/).map((e,t)=>t%2?e:e.replace(/([^\\])\b([a-z]*[A-Z].*?)\b/g,"$1{$2}")).join("");case"literal":return h(e.toString());case"name":return(r=e).family&&!r.prefix&&!r.given&!r.suffix?r.family.includes(m.list)?r.family:`{${r.family}}`:(i=[""],r.prefix&&r.family&&(i[0]+=r.prefix+" "),r.family&&(i[0]+=r.family),r.suffix?(i.push(r.suffix),i.push(r.given||"")):i.push(r.given),c(i.join(", ").trim()));case"verbatim":case"uri":return e.toString();default:return c(e.toString())}var r,i}function d(e){return Array.isArray(e)?e.map(e=>c(e).replace(/([;,"])/g,"{$1}")).join(", "):'"'+c(e).replace(/(["])/g,"{$1}")+'"'}},{"../config.js":49,"../input/constants.js":52}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPrefixedEntry=r.getAttributedEntry=void 0;const i=(e,t,r)=>e.replace(/^\s*<[a-z]+/i,`$& data-${t}="${r}"`);r.getAttributedEntry=i;r.getPrefixedEntry=(e,t)=>i(e,"csl-entry-id",t)},{}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t={}){const{template:r="apa",lang:i,format:s="text",nosort:n=!1}=t,a=t.entry?[].concat(t.entry):e.map(({id:e})=>e),o=(e=c.util.downgradeCsl(e),(0,h.default)(e,r,i,s)),l=o.updateItems(a,n);if(t.append||t.prepend){const p=e.reduce((e,t)=>(e[t.id]=t,e),{});o.sys.wrapBibliographyEntry=function(e){e=p[e];return[d(e,t.prepend),d(e,t.append)]}}var e=o.makeBibliography(),[{bibstart:e,bibend:u},m]=e,m=m.map((e,t)=>(0,f.getPrefixedEntry)(e,l[t]));if(t.asEntryArray)return m.map((e,t)=>[l[t],e]);return e+m.join("")+u};var c=e("@citation-js/core"),h=(r=e("./engines.js"))&&r.__esModule?r:{default:r},f=e("./attr.js");const d=(e,t)=>"function"==typeof t?t(e):t||""},{"./attr.js":73,"./engines.js":76,"@citation-js/core":"citation-js"}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t={}){var{template:r="apa",lang:i,format:s="text"}=t,n=e.map(({id:e})=>e),n=t.entry||n,e=(e=a.util.downgradeCsl(e),(0,o.default)(e,r,i,s)),r=u(t.citationsPre),i=l(n),n=u(t.citationsPost),t=e.rebuildProcessorState([...r,i,...n],s,[]);return t[r.length][2]};var a=e("@citation-js/core"),o=(r=e("./engines.js"))&&r.__esModule?r:{default:r};function i(e){return"object"==typeof e?e:{id:e}}function l(e){return e.citationItems?e:{citationItems:[].concat(e).map(i),properties:{noteIndex:0}}}function u(e){return e?e.map(l):[]}},{"./engines.js":76,"@citation-js/core":"citation-js"}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchEngine=r.default=void 0;var i,a=(i=e("citeproc"))&&i.__esModule?i:{default:i},n=e("./styles.js"),o=e("./locales.js");const l=Symbol.for("proxied");function s(s){function e(e,t){var r,i;return e.sys.wrapBibliographyEntry&&([r,i]=e.sys.wrapBibliographyEntry(this.system_id),t=[r,t,i].join("")),s.call(this,e,t)}return e[l]=!0,e}for(const h in a.default.Output.Formats){var u=a.default.Output.Formats[h]["@bibliography/entry"];u&&!u[l]&&(a.default.Output.Formats[h]["@bibliography/entry"]=s(u))}function m(e){return o.locales.has(e)||(e=e.replace("-","_"),o.locales.has(e))?o.locales.get(e):{}}function p(e,t,r,i,s){e=e+"|"+t;let n;return c[e]instanceof a.default.Engine?((n=c[e]).sys.retrieveItem=i,n.sys.wrapBibliographyEntry=void 0,n.updateItems([])):n=c[e]=new a.default.Engine({retrieveLocale:s,retrieveItem:i},r,t,!0),n}const c={};r.fetchEngine=p;r.default=function(e,t,r,i){if(!a.default.Output.Formats[i]||!a.default.Output.Formats[i]["@bibliography/entry"])throw new TypeError(`Cannot find format '${i}'`);const s=e.reduce((e,t)=>(e[t.id]=t,e),{});e=n.templates.get(n.templates.has(t)?t:"apa"),r=o.locales.has(r)?r:void 0,t=p(t,r,e,function(e){if(Object.prototype.hasOwnProperty.call(s,e))return s[e];throw new Error(`Cannot find entry with id '${e}'`)},m);return t.setOutputFormat(i),t}},{"./locales.js":79,"./styles.js":81,citeproc:84}],77:[function(e,t,r){"use strict";var i=e("@citation-js/core"),s=e("./locales.js"),n=e("./styles.js"),a=l(e("./engines.js")),o=l(e("./bibliography.js")),e=l(e("./citation.js"));function l(e){return e&&e.__esModule?e:{default:e}}i.plugins.add("@csl",{output:{bibliography:o.default,citation:e.default},config:{engine:a.default,locales:s.locales,templates:n.templates}})},{"./bibliography.js":74,"./citation.js":75,"./engines.js":76,"./locales.js":79,"./styles.js":81,"@citation-js/core":"citation-js"}],78:[function(e,t,r){t.exports={"en-US":'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="en-US"><info><translator><name>Andrew Dunning</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Denis Meier</name></translator><translator><name>Brenton M. Wiernik</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2015-10-10T23:31:02+00:00</updated></info><style-options punctuation-in-quote="true"/><date form="text"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date><date form="numeric"><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> \x3c!-- sine nomine --\x3e<term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="original-work-published">original work published</term><term name="personal-communication">personal communication</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">accessed</term><term name="and">and</term><term name="and others">and others</term><term name="anonymous">anonymous</term><term name="anonymous" form="short">anon.</term><term name="at">at</term><term name="available at">available at</term><term name="by">by</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">cited</term><term name="edition"><single>edition</single><multiple>editions</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et al.</term><term name="forthcoming">forthcoming</term><term name="from">from</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in press</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">letter</term><term name="no date">no date</term><term name="no date" form="short">n.d.</term><term name="online">online</term><term name="presented at">presented at the</term><term name="reference"><single>reference</single><multiple>references</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">retrieved</term><term name="scale">scale</term><term name="version">version</term>\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">personal communication</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name="ad">AD</term><term name="bc">BC</term><term name="bce">BCE</term><term name="ce">CE</term>\n\x3c!-- PUNCTUATION --\x3e<term name="open-quote">“</term><term name="close-quote">”</term><term name="open-inner-quote">‘</term><term name="close-inner-quote">’</term><term name="page-range-delimiter">–</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>\n\x3c!-- ORDINALS --\x3e<term name="ordinal">th</term><term name="ordinal-01">st</term><term name="ordinal-02">nd</term><term name="ordinal-03">rd</term><term name="ordinal-11">th</term><term name="ordinal-12">th</term><term name="ordinal-13">th</term>\n\x3c!-- LONG ORDINALS --\x3e<term name="long-ordinal-01">first</term><term name="long-ordinal-02">second</term><term name="long-ordinal-03">third</term><term name="long-ordinal-04">fourth</term><term name="long-ordinal-05">fifth</term><term name="long-ordinal-06">sixth</term><term name="long-ordinal-07">seventh</term><term name="long-ordinal-08">eighth</term><term name="long-ordinal-09">ninth</term><term name="long-ordinal-10">tenth</term>\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name="act">\t\t\t <single>act</single><multiple>acts</multiple>\t\t\t\t\t\t </term><term name="appendix">\t\t\t <single>appendix</single><multiple>appendices</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>article</single><multiple>articles</multiple>\t\t\t\t\t\t </term><term name="canon">\t\t\t <single>canon</single><multiple>canons</multiple>\t\t\t\t\t\t </term><term name="elocation">\t\t\t <single>location</single><multiple>locations</multiple>\t\t\t\t\t\t </term><term name="equation">\t\t\t <single>equation</single><multiple>equations</multiple>\t\t\t\t\t\t </term><term name="rule">\t\t\t <single>rule</single><multiple>rules</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>scene</single><multiple>scenes</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>table</single><multiple>tables</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>title</single><multiple>titles</multiple>\t\t\t\t\t\t </term><term name="book"><single>book</single><multiple>books</multiple></term><term name="chapter"><single>chapter</single><multiple>chapters</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>number</single><multiple>numbers</multiple></term><term name="line"><single>line</single><multiple>lines</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraph</single><multiple>paragraphs</multiple></term><term name="part"><single>part</single><multiple>parts</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verse</single><multiple>verses</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term>\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name="appendix" form="short">\t\t\t <single>app.</single><multiple>apps.</multiple>\t\t\t\t\t\t </term><term name="article-locator" form="short">\t\t\t <single>art.</single><multiple>arts.</multiple></term><term name="elocation" form="short">\t\t\t <single>loc.</single><multiple>locs.</multiple></term><term name="equation" form="short">\t\t\t <single>eq.</single><multiple>eqs.</multiple></term><term name="rule" form="short">\t\t\t <single>r.</single><multiple>rr.</multiple>\t\t\t\t\t\t </term><term name="scene" form="short">\t\t\t <single>sc.</single><multiple>scs.</multiple>\t\t\t\t\t\t </term><term name="table" form="short">\t\t\t <single>tbl.</single><multiple>tbls.</multiple>\t\t\t\t\t\t </term><term name="timestamp" form="short"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator" form="short">\t\t\t <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short"><single>bk.</single><multiple>bks.</multiple></term><term name="chapter" form="short"><single>chap.</single><multiple>chaps.</multiple></term><term name="column" form="short"><single>col.</single><multiple>cols.</multiple></term><term name="figure" form="short"><single>fig.</single><multiple>figs.</multiple></term><term name="folio" form="short"><single>fol.</single><multiple>fols.</multiple></term><term name="issue" form="short"><single>no.</single><multiple>nos.</multiple></term><term name="line" form="short"><single>l.</single><multiple>ll.</multiple></term><term name="note" form="short"><single>n.</single><multiple>nn.</multiple></term><term name="opus" form="short"><single>op.</single><multiple>opp.</multiple></term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short"><single>para.</single><multiple>paras.</multiple></term><term name="part" form="short"><single>pt.</single><multiple>pts.</multiple></term><term name="section" form="short"><single>sec.</single><multiple>secs.</multiple></term><term name="sub-verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name="paragraph" form="symbol"><single>¶</single><multiple>¶¶</multiple></term><term name="section" form="symbol"><single>§</single><multiple>§§</multiple></term>\n\x3c!-- LONG ROLE FORMS --\x3e<term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>director</single><multiple>directors</multiple></term><term name="editor"><single>editor</single><multiple>editors</multiple></term><term name="editorial-director"><single>editor</single><multiple>editors</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>translator</single><multiple>translators</multiple></term><term name="editortranslator"><single>editor &amp; translator</single><multiple>editors &amp; translators</multiple></term>\n\x3c!-- SHORT ROLE FORMS --\x3e<term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ills.</multiple></term><term name="translator" form="short"><single>tran.</single><multiple>trans.</multiple></term><term name="editortranslator" form="short"><single>ed. &amp; tran.</single><multiple>eds. &amp; trans.</multiple></term>\n\x3c!-- VERB ROLE FORMS --\x3e<term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">by</term><term name="director" form="verb">directed by</term><term name="editor" form="verb">edited by</term><term name="editorial-director" form="verb">edited by</term><term name="illustrator" form="verb">illustrated by</term><term name="interviewer" form="verb">interview by</term><term name="recipient" form="verb">to</term><term name="reviewed-author" form="verb">by</term><term name="translator" form="verb">translated by</term><term name="editortranslator" form="verb">edited &amp; translated by</term>\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">dir. by</term><term name="editor" form="verb-short">ed. by</term><term name="editorial-director" form="verb-short">ed. by</term><term name="illustrator" form="verb-short">illus. by</term><term name="translator" form="verb-short">trans. by</term><term name="editortranslator" form="verb-short">ed. &amp; trans. by</term>\n\x3c!-- LONG MONTH FORMS --\x3e<term name="month-01">January</term><term name="month-02">February</term><term name="month-03">March</term><term name="month-04">April</term><term name="month-05">May</term><term name="month-06">June</term><term name="month-07">July</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">October</term><term name="month-11">November</term><term name="month-12">December</term>\n\x3c!-- SHORT MONTH FORMS --\x3e<term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">Mar.</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">May</term><term name="month-06" form="short">Jun.</term><term name="month-07" form="short">Jul.</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Oct.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dec.</term>\n\x3c!-- SEASONS --\x3e<term name="season-01">Spring</term><term name="season-02">Summer</term><term name="season-03">Autumn</term><term name="season-04">Winter</term></terms>\n</locale>\n',"nl-NL":'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="nl-NL"><info><translator><name>Rintze M. Zelle</name><uri>http://twitter.com/rintzezelle</uri></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2017-04-01T12:00:00+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" suffix="-" range-delimiter="/"/><date-part name="month" form="numeric" suffix="-" range-delimiter="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> \x3c!-- sine nomine --\x3e<term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="original-work-published">original work published</term><term name="personal-communication">persoonlijke communicatie</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">geraadpleegd</term><term name="and">en</term><term name="and others">en anderen</term><term name="anonymous">anoniem</term><term name="anonymous" form="short">anon.</term><term name="at">bij</term><term name="available at">beschikbaar op</term><term name="by">door</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">geciteerd</term><term name="edition"><single>druk</single><multiple>drukken</multiple></term><term name="edition" form="short">dr.</term><term name="et-al">e.a.</term><term name="forthcoming">in voorbereiding</term><term name="from">van</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in druk</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">brief</term><term name="no date">zonder datum</term><term name="no date" form="short">z.d.</term><term name="online">online</term><term name="presented at">gepresenteerd bij</term><term name="reference"><single>referentie</single><multiple>referenties</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">geraadpleegd</term><term name="scale">schaal</term><term name="version">versie</term>\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">persoonlijke communicatie</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name="ad">AD</term><term name="bc">BC</term><term name="bce">BCE</term><term name="ce">CE</term>\n\x3c!-- PUNCTUATION --\x3e<term name="open-quote">‘</term><term name="close-quote">’</term><term name="open-inner-quote">“</term><term name="close-inner-quote">”</term><term name="page-range-delimiter">–</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>\n\x3c!-- ORDINALS --\x3e<term name="ordinal">ste</term><term name="ordinal-00" match="whole-number">de</term><term name="ordinal-02" match="last-two-digits">de</term><term name="ordinal-03" match="last-two-digits">de</term><term name="ordinal-04" match="last-two-digits">de</term><term name="ordinal-05" match="last-two-digits">de</term><term name="ordinal-06" match="last-two-digits">de</term><term name="ordinal-07" match="last-two-digits">de</term><term name="ordinal-09" match="last-two-digits">de</term><term name="ordinal-10">de</term><term name="ordinal-11">de</term><term name="ordinal-12">de</term><term name="ordinal-13">de</term><term name="ordinal-14">de</term><term name="ordinal-15">de</term><term name="ordinal-16">de</term><term name="ordinal-17">de</term><term name="ordinal-18">de</term><term name="ordinal-19">de</term>\n\x3c!-- LONG ORDINALS --\x3e<term name="long-ordinal-01">eerste</term><term name="long-ordinal-02">tweede</term><term name="long-ordinal-03">derde</term><term name="long-ordinal-04">vierde</term><term name="long-ordinal-05">vijfde</term><term name="long-ordinal-06">zesde</term><term name="long-ordinal-07">zevende</term><term name="long-ordinal-08">achtste</term><term name="long-ordinal-09">negende</term><term name="long-ordinal-10">tiende</term>\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name="act">\t\t\t <single>act</single><multiple>acts</multiple>\t\t\t\t\t\t </term><term name="appendix">\t\t\t <single>appendix</single><multiple>appendices</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>article</single><multiple>articles</multiple>\t\t\t\t\t\t </term><term name="canon">\t\t\t <single>canon</single><multiple>canons</multiple>\t\t\t\t\t\t </term><term name="elocation">\t\t\t <single>location</single><multiple>locations</multiple>\t\t\t\t\t\t </term><term name="equation">\t\t\t <single>equation</single><multiple>equations</multiple>\t\t\t\t\t\t </term><term name="rule">\t\t\t <single>rule</single><multiple>rules</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>scene</single><multiple>scenes</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>table</single><multiple>tables</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>title</single><multiple>titles</multiple>\t\t\t\t\t\t </term><term name="book"><single>boek</single><multiple>boeken</multiple></term><term name="chapter"><single>hoofdstuk</single><multiple>hoofdstukken</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figuur</single><multiple>figuren</multiple></term><term name="folio"><single>folio</single><multiple>folio\'s</multiple></term><term name="issue"><single>nummer</single><multiple>nummers</multiple></term><term name="line"><single>regel</single><multiple>regels</multiple></term><term name="note"><single>aantekening</single><multiple>aantekeningen</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="number-of-pages"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="paragraph"><single>paragraaf</single><multiple>paragrafen</multiple></term><term name="part"><single>deel</single><multiple>delen</multiple></term><term name="section"><single>sectie</single><multiple>secties</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>vers</single><multiple>versen</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term>\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name="appendix">\t\t\t <single>app.</single><multiple>apps.</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>art.</single><multiple>arts.</multiple></term><term name="elocation">\t\t\t <single>loc.</single><multiple>locs.</multiple></term><term name="equation">\t\t\t <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">\t\t\t <single>r.</single><multiple>rr.</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>sc.</single><multiple>scs.</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>tbl.</single><multiple>tbls.</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">bk.</term><term name="chapter" form="short">hfdst.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">nr.</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">par.</term><term name="part" form="short">deel</term><term name="section" form="short">sec.</term><term name="sub-verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name="paragraph" form="symbol"><single>¶</single><multiple>¶¶</multiple></term><term name="section" form="symbol"><single>§</single><multiple>§§</multiple></term>\n\x3c!-- LONG ROLE FORMS --\x3e<term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>regisseur</single><multiple>regisseurs</multiple></term><term name="editor"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="editorial-director"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>vertaler</single><multiple>vertalers</multiple></term><term name="editortranslator"><single>redacteur &amp; vertaler</single><multiple>redacteuren &amp; vertalers</multiple></term>\n\x3c!-- SHORT ROLE FORMS --\x3e<term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>reg.</single><multiple>reg.</multiple></term><term name="editor" form="short"><single>red.</single><multiple>red.</multiple></term><term name="editorial-director" form="short"><single>red.</single><multiple>red.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>vert.</single><multiple>vert.</multiple></term><term name="editortranslator" form="short"><single>red. &amp; vert.</single><multiple>red. &amp; vert.</multiple></term>\n\x3c!-- VERB ROLE FORMS --\x3e<term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">door</term><term name="director" form="verb">geregisseerd door</term><term name="editor" form="verb">onder redactie van</term><term name="editorial-director" form="verb">onder redactie van</term><term name="illustrator" form="verb">geïllustreerd door</term><term name="interviewer" form="verb">geïnterviewd door</term><term name="recipient" form="verb">ontvangen door</term><term name="reviewed-author" form="verb">door</term><term name="translator" form="verb">vertaald door</term><term name="editortranslator" form="verb">bewerkt &amp; vertaald door</term>\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">geregisseerd door</term><term name="editor" form="verb-short">onder redactie van</term><term name="editorial-director" form="verb-short">bewerkt door</term><term name="illustrator" form="verb-short">geïllustreerd door</term><term name="translator" form="verb-short">vertaald door</term><term name="editortranslator" form="verb-short">bewerkt &amp; vertaald door</term>\n\x3c!-- LONG MONTH FORMS --\x3e<term name="month-01">januari</term><term name="month-02">februari</term><term name="month-03">maart</term><term name="month-04">april</term><term name="month-05">mei</term><term name="month-06">juni</term><term name="month-07">juli</term><term name="month-08">augustus</term><term name="month-09">september</term><term name="month-10">oktober</term><term name="month-11">november</term><term name="month-12">december</term>\n\x3c!-- SHORT MONTH FORMS --\x3e<term name="month-01" form="short">jan.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mrt.</term><term name="month-04" form="short">apr.</term><term name="month-05" form="short">mei</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">aug.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">okt.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dec.</term>\n\x3c!-- SEASONS --\x3e<term name="season-01">lente</term><term name="season-02">zomer</term><term name="season-03">herst</term><term name="season-04">winter</term></terms>\n</locale>\n',"fr-FR":'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="fr-FR"><info><translator><name>Grégoire Colly</name></translator><translator><name>Collectif Zotero francophone</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false" limit-day-ordinals-to-day-1="true"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">publication en ligne anticipée</term><term name="album">album</term><term name="audio-recording">enregistrement audio</term><term name="film">film</term><term name="henceforth">désormais</term><term name="loc-cit">loc.&#160;cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="no-place">sans lieu</term><term name="no-place" form="short">s.&#160;l.</term><term name="no-publisher">sans nom</term> \x3c!-- sine nomine --\x3e<term name="no-publisher" form="short">s.&#160;n.</term><term name="on">sur</term><term name="op-cit">op.&#160;cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="original-work-published">édition originale</term><term name="personal-communication">communication personnelle</term><term name="podcast">podcast</term><term name="podcast-episode">épisode de podcast</term><term name="preprint">prépublication</term><term name="radio-broadcast">émission de radio</term><term name="radio-series">série radiophonique</term><term name="radio-series-episode">épisode de série radiophonique</term><term name="special-issue">numéro spécial</term><term name="special-section">section spéciale</term><term name="television-broadcast">émission de télévision</term><term name="television-series">série télévisée</term><term name="television-series-episode">épisode de série télévisée</term><term name="video">vidéo</term><term name="working-paper">document de travail</term><term name="accessed">consulté le</term><term name="and">et</term><term name="and others">et autres</term><term name="anonymous">anonyme</term><term name="anonymous" form="short">anon.</term><term name="at">sur</term><term name="available at">disponible sur</term><term name="by">par</term><term name="circa">vers</term><term name="circa" form="short">v.</term><term name="cited">cité</term><term name="edition" gender="feminine"><single>édition</single><multiple>éditions</multiple></term><term name="edition" form="short">éd.</term><term name="et-al">et al.</term><term name="forthcoming">à paraître</term><term name="from">à l\'adresse</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">sous presse</term><term name="internet">Internet</term><term name="interview">entretien</term><term name="letter">lettre</term><term name="no date">sans date</term><term name="no date" form="short">s.&#160;d.</term><term name="online">en ligne</term><term name="presented at">présenté à</term><term name="reference"><single>référence</single><multiple>références</multiple></term><term name="reference" form="short"><single>réf.</single><multiple>réf.</multiple></term><term name="retrieved">consulté</term><term name="scale">échelle</term><term name="version">version</term>\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name="article">article</term><term name="article-journal">article de revue</term><term name="article-magazine">article de magazine</term><term name="article-newspaper">article de presse</term><term name="bill">projet de loi</term><term name="book">livre</term><term name="broadcast">émission</term><term name="chapter">chapitre de livre</term><term name="classic">classique</term><term name="collection">collection</term><term name="dataset">jeu de données</term><term name="document">document</term><term name="entry">entrée</term><term name="entry-dictionary">entrée de dictionnaire</term><term name="entry-encyclopedia">entrée d\'encyclopédie</term><term name="event">événement</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic">image</term><term name="hearing">audience</term><term name="interview">interview</term><term name="legal_case">affaire</term><term name="legislation">acte juridique</term><term name="manuscript">manuscrit</term><term name="map">carte</term><term name="motion_picture">enregistrement vidéo</term><term name="musical_score">partition</term><term name="pamphlet">pamphlet</term><term name="paper-conference">article de colloque</term><term name="patent">brevet</term><term name="performance">interprétation</term><term name="periodical">périodique</term><term name="personal_communication">communication personnelle</term><term name="post">billet</term><term name="post-weblog">billet de blog</term><term name="regulation">règlement</term><term name="report">rapport</term><term name="review">recension</term><term name="review-book">recension de livre</term><term name="software">logiciel</term><term name="song">chanson</term><term name="speech">présentation</term><term name="standard">norme</term><term name="thesis">thèse</term><term name="treaty">traité</term><term name="webpage">page web</term>\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name="article-journal" form="short">art. de revue</term><term name="article-magazine" form="short">art. de mag.</term><term name="article-newspaper" form="short">art. de presse</term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap. de liv.</term><term name="document" form="short">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">ms</term><term name="motion_picture" form="short">enr. vidéo</term><term name="report" form="short">rap.</term><term name="review" form="short">recens.</term><term name="review-book" form="short">recens. de liv.</term><term name="song" form="short">enr. audio</term>\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name="ad">apr. J.-C.</term><term name="bc">av. J.-C.</term><term name="bce">av. n. è.</term><term name="ce">n. è.</term>\n\x3c!-- PUNCTUATION --\x3e<term name="open-quote">«&#160;</term><term name="close-quote">&#160;»</term><term name="open-inner-quote">“</term><term name="close-inner-quote">”</term><term name="page-range-delimiter">&#8209;</term> \x3c!-- non-breaking hyphen --\x3e<term name="colon">&#160;:</term><term name="comma">,</term><term name="semicolon">&#160;;</term>\n\x3c!-- ORDINALS --\x3e<term name="ordinal">ᵉ</term><term name="ordinal-01" gender-form="feminine" match="whole-number">ʳᵉ</term><term name="ordinal-01" gender-form="masculine" match="whole-number">ᵉʳ</term>\n\x3c!-- LONG ORDINALS --\x3e<term name="long-ordinal-01">premier</term><term name="long-ordinal-02">deuxième</term><term name="long-ordinal-03">troisième</term><term name="long-ordinal-04">quatrième</term><term name="long-ordinal-05">cinquième</term><term name="long-ordinal-06">sixième</term><term name="long-ordinal-07">septième</term><term name="long-ordinal-08">huitième</term><term name="long-ordinal-09">neuvième</term><term name="long-ordinal-10">dixième</term>\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name="act"><single>acte</single><multiple>actes</multiple></term><term name="appendix"><single>appendice</single><multiple>appendices</multiple></term><term name="article-locator"><single>article</single><multiple>articles</multiple></term><term name="canon"><single>canon</single><multiple>canons</multiple></term><term name="elocation"><single>emplacement</single><multiple>emplacements</multiple></term><term name="equation"><single>équation</single><multiple>équations</multiple></term><term name="rule"><single>règle</single><multiple>règles</multiple></term><term name="scene"><single>scène</single><multiple>scènes</multiple></term><term name="table"><single>tableau</single><multiple>tableaux</multiple></term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple></term><term name="title-locator"><single>titre</single><multiple>titres</multiple></term><term name="book"><single>livre</single><multiple>livres</multiple></term><term name="chapter"><single>chapitre</single><multiple>chapitres</multiple></term><term name="column"><single>colonne</single><multiple>colonnes</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue" gender="masculine"><single>numéro</single><multiple>numéros</multiple></term><term name="line"><single>ligne</single><multiple>lignes</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opus</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraphe</single><multiple>paragraphes</multiple></term><term name="part"><single>partie</single><multiple>parties</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verset</single><multiple>versets</multiple></term><term name="volume" gender="masculine"><single>volume</single><multiple>volumes</multiple></term>\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name="appendix"><single>append.</single><multiple>append.</multiple></term><term name="article-locator"><single>art.</single><multiple>art.</multiple></term><term name="elocation"><single>emplact</single><multiple>emplact</multiple></term><term name="equation"><single>eq.</single><multiple>eq.</multiple></term><term name="rule"><single>règle</single><multiple>règles</multiple></term><term name="scene"><single>sc.</single><multiple>sc.</multiple></term><term name="table"><single>tab.</single><multiple>tab.</multiple></term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple></term><term name="title-locator"><single>tit.</single><multiple>tit.</multiple></term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short"><single>fᵒ</single><multiple>fᵒˢ</multiple></term><term name="issue" form="short"><single>nᵒ</single><multiple>nᵒˢ</multiple></term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>p.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>p.</multiple></term><term name="paragraph" form="short">paragr.</term><term name="part" form="short">part.</term><term name="section" form="short">sect.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>v.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vol.</multiple></term>\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name="paragraph" form="symbol"><single>§</single><multiple>§</multiple></term><term name="section" form="symbol"><single>§</single><multiple>§</multiple></term>\n\x3c!-- LONG ROLE FORMS --\x3e<term name="chair"><single>président</single><multiple>présidents</multiple></term><term name="compiler"><single>compilateur</single><multiple>compilateurs</multiple></term><term name="contributor"><single>contributeur</single><multiple>contributeurs</multiple></term><term name="curator"><single>commissaire</single><multiple>commissaires</multiple></term><term name="executive-producer"><single>producteur exécutif</single><multiple>producteurs exécutifs</multiple></term><term name="guest"><single>invité</single><multiple>invités</multiple></term><term name="host"><single>hôte</single><multiple>hôtes</multiple></term><term name="narrator"><single>narrateur</single><multiple>narrateurs</multiple></term><term name="organizer"><single>organisateur</single><multiple>organisateurs</multiple></term><term name="performer"><single>interprète</single><multiple>interprètes</multiple></term><term name="producer"><single>producteur</single><multiple>producteurs</multiple></term><term name="script-writer"><single>scénariste</single><multiple>scénaristes</multiple></term><term name="series-creator"><single>créateur de série</single><multiple>créateurs de série</multiple></term><term name="director"><single>réalisateur</single><multiple>réalisateurs</multiple></term><term name="editor"><single>éditeur</single><multiple>éditeurs</multiple></term><term name="editorial-director"><single>directeur</single><multiple>directeurs</multiple></term><term name="illustrator"><single>illustrateur</single><multiple>illustrateurs</multiple></term><term name="translator"><single>traducteur</single><multiple>traducteurs</multiple></term><term name="editortranslator"><single>éditeur et traducteur</single><multiple>éditeurs et traducteurs</multiple></term>\n\x3c!-- SHORT ROLE FORMS --\x3e<term name="compiler" form="short"><single>compil.</single><multiple>compil.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contrib.</multiple></term><term name="curator" form="short"><single>commiss.</single><multiple>commiss.</multiple></term><term name="executive-producer" form="short"><single>prod. exé.</single><multiple>prod. exé.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narr.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>org.</multiple></term><term name="performer" form="short"><single>interpr.</single><multiple>interpr.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prod.</multiple></term><term name="script-writer" form="short"><single>scénar.</single><multiple>scénar.</multiple></term><term name="series-creator" form="short"><single>créat.</single><multiple>créat.</multiple></term><term name="director" form="short"><single>réal.</single><multiple>réal.</multiple></term><term name="editor" form="short"><single>éd.</single><multiple>éd.</multiple></term><term name="editorial-director" form="short"><single>dir.</single><multiple>dir.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trad.</multiple></term><term name="editortranslator" form="short"><single>éd. et trad.</single><multiple>éd. et trad.</multiple></term>\n\x3c!-- VERB ROLE FORMS --\x3e<term name="chair" form="verb">présidé par</term><term name="compiler" form="verb">compilé par</term><term name="contributor" form="verb">avec</term><term name="curator" form="verb">organisé par</term><term name="executive-producer" form="verb">production exécutive par</term><term name="guest" form="verb">avec pour invité</term><term name="host" form="verb">animé par</term><term name="narrator" form="verb">lu par</term><term name="organizer" form="verb">organisé par</term><term name="performer" form="verb">interprété par</term><term name="producer" form="verb">produit par</term><term name="script-writer" form="verb">scénario de</term><term name="series-creator" form="verb">créé par</term><term name="container-author" form="verb">par</term><term name="director" form="verb">réalisé par</term><term name="editor" form="verb">édité par</term><term name="editorial-director" form="verb">sous la direction de</term><term name="illustrator" form="verb">illustré par</term><term name="interviewer" form="verb">entretien réalisé par</term><term name="recipient" form="verb">à</term><term name="reviewed-author" form="verb">par</term><term name="translator" form="verb">traduit par</term><term name="editortranslator" form="verb">édité et traduit par</term>\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name="compiler" form="verb-short">compil. par</term><term name="contributor" form="verb-short">ac</term><term name="curator" form="verb-short">org. par</term><term name="executive-producer" form="verb-short">prod. exé. par</term><term name="guest" form="verb-short">ac pr inv.</term><term name="host" form="verb-short">anim. par</term><term name="narrator" form="verb-short">lu par</term><term name="organizer" form="verb-short">org. par</term><term name="performer" form="verb-short">interpr. par</term><term name="producer" form="verb-short">prod. par</term><term name="script-writer" form="verb-short">scénar. de</term><term name="series-creator" form="verb-short">créé par</term><term name="director" form="verb-short">réal. par</term><term name="editor" form="verb-short">éd. par</term><term name="editorial-director" form="verb-short">ss la dir. de</term><term name="illustrator" form="verb-short">ill. par</term><term name="translator" form="verb-short">trad. par</term><term name="editortranslator" form="verb-short">éd. et trad. par</term>\n\x3c!-- LONG MONTH FORMS --\x3e<term name="month-01" gender="masculine">janvier</term><term name="month-02" gender="masculine">février</term><term name="month-03" gender="masculine">mars</term><term name="month-04" gender="masculine">avril</term><term name="month-05" gender="masculine">mai</term><term name="month-06" gender="masculine">juin</term><term name="month-07" gender="masculine">juillet</term><term name="month-08" gender="masculine">août</term><term name="month-09" gender="masculine">septembre</term><term name="month-10" gender="masculine">octobre</term><term name="month-11" gender="masculine">novembre</term><term name="month-12" gender="masculine">décembre</term>\n\x3c!-- SHORT MONTH FORMS --\x3e<term name="month-01" form="short">janv.</term><term name="month-02" form="short">févr.</term><term name="month-03" form="short">mars</term><term name="month-04" form="short">avr.</term><term name="month-05" form="short">mai</term><term name="month-06" form="short">juin</term><term name="month-07" form="short">juill.</term><term name="month-08" form="short">août</term><term name="month-09" form="short">sept.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">déc.</term>\n\x3c!-- SEASONS --\x3e<term name="season-01">printemps</term><term name="season-02">été</term><term name="season-03">automne</term><term name="season-04">hiver</term></terms>\n</locale>\n',"de-DE":'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="de-DE"><info><translator><name>Till A. Heilmann</name></translator><translator><name>Ulrich</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>jakov</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" form="ordinal" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="."/><date-part name="month" form="numeric-leading-zeros" suffix="."/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> \x3c!-- sine nomine --\x3e<term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="original-work-published">original work published</term><term name="personal-communication">persönliche Kommunikation</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">zugegriffen</term><term name="and">und</term><term name="and others">und andere</term><term name="anonymous">ohne Autor</term><term name="anonymous" form="short">o.&#160;A.</term><term name="at">auf</term><term name="available at">verfügbar unter</term><term name="by">von</term><term name="circa">circa</term><term name="circa" form="short">ca.</term><term name="cited">zitiert</term><term name="edition"><single>Auflage</single><multiple>Auflagen</multiple></term><term name="edition" form="short">Aufl.</term><term name="et-al">u.&#160;a.</term><term name="forthcoming">i.&#160;E.</term><term name="from">von</term><term name="ibid">ebd.</term><term name="in">in</term><term name="in press">im Druck</term><term name="internet">Internet</term><term name="interview">Interview</term><term name="letter">Brief</term><term name="no date">ohne Datum</term><term name="no date" form="short">o.&#160;J.</term><term name="online">online</term><term name="presented at">gehalten auf der</term><term name="reference"><single>Referenz</single><multiple>Referenzen</multiple></term><term name="reference" form="short"><single>Ref.</single><multiple>Ref.</multiple></term><term name="retrieved">abgerufen</term><term name="scale">Maßstab</term><term name="version">Version</term>\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">persönliche Kommunikation</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name="ad">&#160;n.&#160;Chr.</term><term name="bc">&#160;v.&#160;Chr.</term><term name="bce">BCE</term><term name="ce">CE</term>\n\x3c!-- PUNCTUATION --\x3e<term name="open-quote">„</term><term name="close-quote">“</term><term name="open-inner-quote">‚</term><term name="close-inner-quote">‘</term><term name="page-range-delimiter">–</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>\n\x3c!-- ORDINALS --\x3e<term name="ordinal">.</term>\n\x3c!-- LONG ORDINALS --\x3e<term name="long-ordinal-01">erster</term><term name="long-ordinal-02">zweiter</term><term name="long-ordinal-03">dritter</term><term name="long-ordinal-04">vierter</term><term name="long-ordinal-05">fünfter</term><term name="long-ordinal-06">sechster</term><term name="long-ordinal-07">siebter</term><term name="long-ordinal-08">achter</term><term name="long-ordinal-09">neunter</term><term name="long-ordinal-10">zehnter</term>\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name="act">\t\t\t <single>act</single><multiple>acts</multiple>\t\t\t\t\t\t </term><term name="appendix">\t\t\t <single>appendix</single><multiple>appendices</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>article</single><multiple>articles</multiple>\t\t\t\t\t\t </term><term name="canon">\t\t\t <single>canon</single><multiple>canons</multiple>\t\t\t\t\t\t </term><term name="elocation">\t\t\t <single>location</single><multiple>locations</multiple>\t\t\t\t\t\t </term><term name="equation">\t\t\t <single>equation</single><multiple>equations</multiple>\t\t\t\t\t\t </term><term name="rule">\t\t\t <single>rule</single><multiple>rules</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>scene</single><multiple>scenes</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>table</single><multiple>tables</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>title</single><multiple>titles</multiple>\t\t\t\t\t\t </term><term name="book"><single>Buch</single><multiple>Bücher</multiple></term><term name="chapter"><single>Kapitel</single><multiple>Kapitel</multiple></term><term name="column"><single>Spalte</single><multiple>Spalten</multiple></term><term name="figure"><single>Abbildung</single><multiple>Abbildungen</multiple></term><term name="folio"><single>Blatt</single><multiple>Blätter</multiple></term><term name="issue"><single>Nummer</single><multiple>Nummern</multiple></term><term name="line"><single>Zeile</single><multiple>Zeilen</multiple></term><term name="note"><single>Note</single><multiple>Noten</multiple></term><term name="opus"><single>Opus</single><multiple>Opera</multiple></term><term name="page"><single>Seite</single><multiple>Seiten</multiple></term><term name="number-of-pages"><single>Seite</single><multiple>Seiten</multiple></term><term name="paragraph"><single>Absatz</single><multiple>Absätze</multiple></term><term name="part"><single>Teil</single><multiple>Teile</multiple></term><term name="section"><single>Abschnitt</single><multiple>Abschnitte</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>Vers</single><multiple>Verse</multiple></term><term name="volume"><single>Band</single><multiple>Bände</multiple></term>\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name="appendix">\t\t\t <single>app.</single><multiple>apps.</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>art.</single><multiple>arts.</multiple></term><term name="elocation">\t\t\t <single>loc.</single><multiple>locs.</multiple></term><term name="equation">\t\t\t <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">\t\t\t <single>r.</single><multiple>rr.</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>sc.</single><multiple>scs.</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>tbl.</single><multiple>tbls.</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">B.</term><term name="chapter" form="short">Kap.</term><term name="column" form="short">Sp.</term><term name="figure" form="short">Abb.</term><term name="folio" form="short">Fol.</term><term name="issue" form="short">Nr.</term><term name="line" form="short">Z.</term><term name="note" form="short">N.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>S.</single><multiple>S.</multiple></term><term name="number-of-pages" form="short"><single>S.</single><multiple>S.</multiple></term><term name="paragraph" form="short">Abs.</term><term name="part" form="short">Teil</term><term name="section" form="short">Abschn.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>V.</single><multiple>V.</multiple></term><term name="volume" form="short"><single>Bd.</single><multiple>Bde.</multiple></term>\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name="paragraph" form="symbol"><single>¶</single><multiple>¶¶</multiple></term><term name="section" form="symbol"><single>§</single><multiple>§§</multiple></term>\n\x3c!-- LONG ROLE FORMS --\x3e<term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>Regisseur</single><multiple>Regisseure</multiple></term><term name="editor"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="collection-editor"><single>Reihenherausgeber</single><multiple>Reihenherausgeber</multiple></term><term name="editorial-director"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="illustrator"><single>Illustrator</single><multiple>Illustratoren</multiple></term><term name="translator"><single>Übersetzer</single><multiple>Übersetzer</multiple></term><term name="editortranslator"><single>Herausgeber&#160;&amp; Übersetzer</single><multiple>Herausgeber&#160;&amp; Übersetzer</multiple></term>\n\x3c!-- SHORT ROLE FORMS --\x3e<term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>Reg.</single><multiple>Reg.</multiple></term><term name="editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="collection-editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="editorial-director" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="illustrator" form="short"><single>Ill.</single><multiple>Ill.</multiple></term><term name="translator" form="short"><single>Übers.</single><multiple>Übers.</multiple></term><term name="editortranslator" form="short"><single>Hrsg.&#160;&amp; Übers.</single><multiple>Hrsg.&#160;&amp; Übers.</multiple></term>\n\x3c!-- VERB ROLE FORMS --\x3e<term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">von</term><term name="director" form="verb">Regie von</term><term name="editor" form="verb">herausgegeben von</term><term name="collection-editor" form="verb">herausgegeben von</term><term name="editorial-director" form="verb">herausgegeben von</term><term name="illustrator" form="verb">illustriert von</term><term name="interviewer" form="verb">interviewt von</term><term name="recipient" form="verb">an</term><term name="reviewed-author" form="verb">von</term><term name="translator" form="verb">übersetzt von</term><term name="editortranslator" form="verb">herausgegeben und übersetzt von</term>\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">Reg.</term><term name="editor" form="verb-short">hg. von</term><term name="collection-editor" form="verb-short">hg. von</term><term name="editorial-director" form="verb-short">hg. von</term><term name="illustrator" form="verb-short">illus. von</term><term name="translator" form="verb-short">übers. von</term><term name="editortranslator" form="verb-short">hg.&#160;&amp; übers. von</term>\n\x3c!-- LONG MONTH FORMS --\x3e<term name="month-01">Januar</term><term name="month-02">Februar</term><term name="month-03">März</term><term name="month-04">April</term><term name="month-05">Mai</term><term name="month-06">Juni</term><term name="month-07">Juli</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">Oktober</term><term name="month-11">November</term><term name="month-12">Dezember</term>\n\x3c!-- SHORT MONTH FORMS --\x3e<term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">März</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">Mai</term><term name="month-06" form="short">Juni</term><term name="month-07" form="short">Juli</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Okt.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dez.</term>\n\x3c!-- SEASONS --\x3e<term name="season-01">Frühjahr</term><term name="season-02">Sommer</term><term name="season-03">Herbst</term><term name="season-04">Winter</term></terms>\n</locale>\n',"es-ES":'<?xml version="1.0" encoding="utf-8"?>\n<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="es-ES"><info><translator><name>javimat</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" de "/><date-part name="month" suffix=" de "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> \x3c!-- sine nomine --\x3e<term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> \x3c!-- like ibid., the abbreviated form is the regular form  --\x3e<term name="original-work-published">original work published</term><term name="personal-communication">comunicación personal</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">accedido</term><term name="and">y</term><term name="and others">y otros</term><term name="anonymous">anónimo</term><term name="anonymous" form="short">anón.</term><term name="at">en</term><term name="available at">disponible en</term><term name="by">de</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">citado</term><term name="edition"><single>edición</single><multiple>ediciones</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et&#160;al.</term><term name="forthcoming">previsto</term><term name="from">a partir de</term><term name="ibid">ibid.</term><term name="in">en</term><term name="in press">en imprenta</term><term name="internet">internet</term><term name="interview">entrevista</term><term name="letter">carta</term><term name="no date">sin fecha</term><term name="no date" form="short">s.&#160;f.</term><term name="online">en línea</term><term name="presented at">presentado en</term><term name="reference"><single>referencia</single><multiple>referencias</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">recuperado</term><term name="scale">escala</term><term name="version">versión</term>\n\x3c!-- LONG ITEM TYPE FORMS --\x3e<term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">comunicación personal</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>\n\x3c!-- SHORT ITEM TYPE FORMS --\x3e<term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term>\x3c!-- figure is in the list of locator terms --\x3e<term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>\n\x3c!-- HISTORICAL ERA TERMS --\x3e<term name="ad">d.&#160;C.</term><term name="bc">a.&#160;C.</term><term name="bce">BCE</term><term name="ce">CE</term>\n\x3c!-- PUNCTUATION --\x3e<term name="open-quote">«</term><term name="close-quote">»</term><term name="open-inner-quote">“</term><term name="close-inner-quote">”</term><term name="page-range-delimiter">-</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>\n\x3c!-- ORDINALS --\x3e<term name="ordinal">.ª</term>\n\x3c!-- LONG ORDINALS --\x3e<term name="long-ordinal-01">primera</term><term name="long-ordinal-02">segunda</term><term name="long-ordinal-03">tercera</term><term name="long-ordinal-04">cuarta</term><term name="long-ordinal-05">quinta</term><term name="long-ordinal-06">sexta</term><term name="long-ordinal-07">séptima</term><term name="long-ordinal-08">octava</term><term name="long-ordinal-09">novena</term><term name="long-ordinal-10">décima</term>\n\x3c!-- LONG LOCATOR FORMS --\x3e<term name="act">\t\t\t <single>act</single><multiple>acts</multiple>\t\t\t\t\t\t </term><term name="appendix">\t\t\t <single>appendix</single><multiple>appendices</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>article</single><multiple>articles</multiple>\t\t\t\t\t\t </term><term name="canon">\t\t\t <single>canon</single><multiple>canons</multiple>\t\t\t\t\t\t </term><term name="elocation">\t\t\t <single>location</single><multiple>locations</multiple>\t\t\t\t\t\t </term><term name="equation">\t\t\t <single>equation</single><multiple>equations</multiple>\t\t\t\t\t\t </term><term name="rule">\t\t\t <single>rule</single><multiple>rules</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>scene</single><multiple>scenes</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>table</single><multiple>tables</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>title</single><multiple>titles</multiple>\t\t\t\t\t\t </term><term name="book"><single>libro</single><multiple>libros</multiple></term><term name="chapter"><single>capítulo</single><multiple>capítulos</multiple></term><term name="column"><single>columna</single><multiple>columnas</multiple></term><term name="figure"><single>figura</single><multiple>figuras</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>número</single><multiple>números</multiple></term><term name="line"><single>línea</single><multiple>líneas</multiple></term><term name="note"><single>nota</single><multiple>notas</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>página</single><multiple>páginas</multiple></term><term name="number-of-pages"><single>página</single><multiple>páginas</multiple></term><term name="paragraph"><single>párrafo</single><multiple>párrafos</multiple></term><term name="part"><single>parte</single><multiple>partes</multiple></term><term name="section"><single>sección</single><multiple>secciones</multiple></term><term name="sub-verbo"><single>sub voce</single><multiple>sub vocibus</multiple></term><term name="verse"><single>verso</single><multiple>versos</multiple></term><term name="volume"><single>volumen</single><multiple>volúmenes</multiple></term>\n\x3c!-- SHORT LOCATOR FORMS --\x3e<term name="appendix">\t\t\t <single>app.</single><multiple>apps.</multiple>\t\t\t\t\t\t </term><term name="article-locator">\t\t\t <single>art.</single><multiple>arts.</multiple></term><term name="elocation">\t\t\t <single>loc.</single><multiple>locs.</multiple></term><term name="equation">\t\t\t <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">\t\t\t <single>r.</single><multiple>rr.</multiple>\t\t\t\t\t\t </term><term name="scene">\t\t\t <single>sc.</single><multiple>scs.</multiple>\t\t\t\t\t\t </term><term name="table">\t\t\t <single>tbl.</single><multiple>tbls.</multiple>\t\t\t\t\t\t </term><term name="timestamp"> \x3c!-- generally blank --\x3e<single></single><multiple></multiple>\t\t\t\t\t\t </term><term name="title-locator">\t\t\t <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">lib.</term><term name="chapter" form="short">cap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">n.º</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">párr.</term><term name="part" form="short">pt.</term><term name="section" form="short">sec.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>\n\x3c!-- SYMBOL LOCATOR FORMS --\x3e<term name="paragraph" form="symbol"><single>§</single><multiple>§</multiple></term><term name="section" form="symbol"><single>§</single><multiple>§</multiple></term>\n\x3c!-- LONG ROLE FORMS --\x3e<term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>director</single><multiple>directores</multiple></term><term name="editor"><single>editor</single><multiple>editores</multiple></term><term name="editorial-director"><single>editor</single><multiple>editores</multiple></term><term name="illustrator"><single>ilustrador</single><multiple>ilustradores</multiple></term><term name="translator"><single>traductor</single><multiple>traductores</multiple></term><term name="editortranslator"><single>editor y traductor</single><multiple>editores y traductores</multiple></term>\n\x3c!-- SHORT ROLE FORMS --\x3e<term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ilust.</single><multiple>ilusts.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trads.</multiple></term><term name="editortranslator" form="short"><single>ed. y trad.</single><multiple>eds. y trads.</multiple></term>\n\x3c!-- VERB ROLE FORMS --\x3e<term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">de</term><term name="director" form="verb">dirigido por</term><term name="editor" form="verb">editado por</term><term name="editorial-director" form="verb">editado por</term><term name="illustrator" form="verb">ilustrado por</term><term name="interviewer" form="verb">entrevistado por</term><term name="recipient" form="verb">a</term><term name="reviewed-author" form="verb">por</term><term name="translator" form="verb">traducido por</term><term name="editortranslator" form="verb">editado y traducido por</term>\n\x3c!-- SHORT VERB ROLE FORMS --\x3e<term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">dir.</term><term name="editor" form="verb-short">ed.</term><term name="editorial-director" form="verb-short">ed.</term><term name="illustrator" form="verb-short">ilust.</term><term name="translator" form="verb-short">trad.</term><term name="editortranslator" form="verb-short">ed. y trad.</term>\n\x3c!-- LONG MONTH FORMS --\x3e<term name="month-01">enero</term><term name="month-02">febrero</term><term name="month-03">marzo</term><term name="month-04">abril</term><term name="month-05">mayo</term><term name="month-06">junio</term><term name="month-07">julio</term><term name="month-08">agosto</term><term name="month-09">septiembre</term><term name="month-10">octubre</term><term name="month-11">noviembre</term><term name="month-12">diciembre</term>\n\x3c!-- SHORT MONTH FORMS --\x3e<term name="month-01" form="short">ene.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mar.</term><term name="month-04" form="short">abr.</term><term name="month-05" form="short">may</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">ago.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dic.</term>\n\x3c!-- SEASONS --\x3e<term name="season-01">primavera</term><term name="season-02">verano</term><term name="season-03">otoño</term><term name="season-04">invierno</term></terms>\n</locale>\n'}},{}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.locales=r.default=void 0;var i=e("@citation-js/core"),e=(e=e("./locales.json"))&&e.__esModule?e:{default:e};const s=r.locales=new i.util.Register(e.default);r.default=e=>s.has(e)?s.get(e):s.get("en-US")},{"./locales.json":78,"@citation-js/core":"citation-js"}],80:[function(e,t,r){t.exports={apa:'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never" page-range-format="expanded"><info><title>American Psychological Association 7th edition</title><title-short>APA</title-short><id>http://www.zotero.org/styles/apa</id><link href="http://www.zotero.org/styles/apa" rel="self"/><link href="http://www.zotero.org/styles/apa-6th-edition" rel="template"/><link href="https://apastyle.apa.org/style-grammar-guidelines/references/examples" rel="documentation"/><author><name>Brenton M. Wiernik</name><email>zotero@wiernik.org</email></author><category citation-format="author-date"/><category field="psychology"/><category field="generic-base"/><updated>2022-01-31T14:43:56+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><terms><term name="editortranslator" form="short"><single>ed. &amp; trans.</single><multiple>eds. &amp; trans.</multiple></term><term name="translator" form="short">trans.</term><term name="interviewer" form="short"><single>interviewer</single><multiple>interviewers</multiple></term><term name="collection-editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="circa" form="short">ca.</term><term name="bc"> B.C.E.</term><term name="ad"> C.E.</term><term name="letter">personal communication</term><term name="letter" form="short">letter</term><term name="issue" form="long"><single>issue</single><multiple>issues</multiple></term></terms></locale><locale xml:lang="af"><terms><term name="letter">persoonlike kommunikasie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="ar"><terms><term name="letter">اتصال شخصي</term><term name="letter" form="short">خطاب</term></terms></locale><locale xml:lang="bg"><terms><term name="letter">лична комуникация</term><term name="letter" form="short">писмо</term></terms></locale><locale xml:lang="ca"><terms><term name="letter">comunicació personal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="cs"><terms><term name="letter">osobní komunikace</term><term name="letter" form="short">dopis</term></terms></locale><locale xml:lang="cy"><terms><term name="letter">cyfathrebu personol</term><term name="letter" form="short">llythyr</term></terms></locale><locale xml:lang="da"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikation</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="de"><terms><term name="et-al">et al.</term><term name="letter">persönliche Kommunikation</term><term name="letter" form="short">Brief</term></terms></locale><locale xml:lang="el"><terms><term name="letter">προσωπική επικοινωνία</term><term name="letter" form="short">επιστολή</term></terms></locale><locale xml:lang="es"><terms><term name="from">de</term><term name="letter">comunicación personal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="et"><terms><term name="letter">isiklik suhtlus</term><term name="letter" form="short">kiri</term></terms></locale><locale xml:lang="eu"><terms><term name="letter">komunikazio pertsonala</term><term name="letter" form="short">gutuna</term></terms></locale><locale xml:lang="fa"><terms><term name="letter">ارتباط شخصی</term><term name="letter" form="short">نامه</term></terms></locale><locale xml:lang="fi"><terms><term name="letter">henkilökohtainen viestintä</term><term name="letter" form="short">kirje</term></terms></locale><locale xml:lang="fr"><terms><term name="letter">communication personnelle</term><term name="letter" form="short">lettre</term><term name="editor" form="short"><single>éd.</single><multiple>éds.</multiple></term></terms></locale><locale xml:lang="he"><terms><term name="letter">תקשורת אישית</term><term name="letter" form="short">מכתב</term></terms></locale><locale xml:lang="hr"><terms><term name="letter">osobna komunikacija</term><term name="letter" form="short">pismo</term></terms></locale><locale xml:lang="hu"><terms><term name="letter">személyes kommunikáció</term><term name="letter" form="short">levél</term></terms></locale><locale xml:lang="id"><terms><term name="letter">komunikasi pribadi</term><term name="letter" form="short">surat</term></terms></locale><locale xml:lang="is"><terms><term name="letter">persónuleg samskipti</term><term name="letter" form="short">bréf</term></terms></locale><locale xml:lang="it"><terms><term name="letter">comunicazione personale</term><term name="letter" form="short">lettera</term></terms></locale><locale xml:lang="ja"><terms><term name="letter">個人的なやり取り</term><term name="letter" form="short">手紙</term></terms></locale><locale xml:lang="ko"><terms><term name="letter">개인 서신</term><term name="letter" form="short">편지</term></terms></locale><locale xml:lang="la"><terms><term name="letter"/><term name="letter" form="short">epistula</term></terms></locale><locale xml:lang="lt"><terms><term name="letter">communicationis personalis</term><term name="letter" form="short"/></terms></locale><locale xml:lang="lv"><terms><term name="letter">personīga komunikācija</term><term name="letter" form="short">vēstule</term></terms></locale><locale xml:lang="mn"><terms><term name="letter">хувийн харилцаа холбоо</term><term name="letter" form="short">захиа</term></terms></locale><locale xml:lang="nb"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="nl"><terms><term name="et-al">et al.</term><term name="letter">persoonlijke communicatie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="nn"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="pl"><terms><term name="letter">osobista komunikacja</term><term name="letter" form="short">list</term></terms></locale><locale xml:lang="pt"><terms><term name="letter">comunicação pessoal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="ro"><terms><term name="letter">comunicare personală</term><term name="letter" form="short">scrisoare</term></terms></locale><locale xml:lang="ru"><terms><term name="letter">личная переписка</term><term name="letter" form="short">письмо</term></terms></locale><locale xml:lang="sk"><terms><term name="letter">osobná komunikácia</term><term name="letter" form="short">list</term></terms></locale><locale xml:lang="sl"><terms><term name="letter">osebna komunikacija</term><term name="letter" form="short">pismo</term></terms></locale><locale xml:lang="sr"><terms><term name="letter">лична комуникација</term><term name="letter" form="short">писмо</term></terms></locale><locale xml:lang="sv"><terms><term name="letter">personlig kommunikation</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="th"><terms><term name="letter">การสื่อสารส่วนบุคคล</term><term name="letter" form="short">จดหมาย</term></terms></locale><locale xml:lang="tr"><terms><term name="letter">kişisel iletişim</term><term name="letter" form="short">mektup</term></terms></locale><locale xml:lang="uk"><terms><term name="letter">особисте спілкування</term><term name="letter" form="short">лист</term></terms></locale><locale xml:lang="vi"><terms><term name="letter">giao tiếp cá nhân</term><term name="letter" form="short">thư</term></terms></locale><locale xml:lang="zh-CN"><terms><term name="letter">的私人交流</term><term name="letter" form="short">信函</term></terms></locale><locale xml:lang="zh-TW"><terms><term name="letter">私人通訊</term><term name="letter" form="short">信函</term></terms></locale>\x3c!-- General categories of item types:Periodical: article-journal article-magazine article-newspaper post-weblog review review-bookPeriodical or Booklike: paper-conferenceBooklike: article book broadcast chapter dataset entry entry-dictionary entry-encyclopedia figure graphic interview manuscript map motion_picture musical_score pamphlet patent personal_communication report song speech thesis post webpageLegal: bill legal_case legislation treaty--\x3e\x3c!-- APA references contain four parts: author, date, title, source --\x3e<macro name="author-bib"><names variable="composer" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></if></choose></if></choose>\x3c!-- Test for editortranslator and put that first as that becomes available --\x3e<names variable="editor" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="editorial-director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="collection-editor"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></substitute></names></macro><macro name="author-intext"><choose><if type="bill legal_case legislation treaty" match="any"><text macro="title-intext"/></if><else-if type="interview personal_communication" match="any"><choose>\x3c!-- These variables indicate that the letter is retrievable by the reader. If not, then use the APA in-text-only personal communication format --\x3e<if variable="archive container-title DOI publisher URL" match="none"><group delimiter=", "><names variable="author"><name and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names>\x3c!-- Replace with term="personal-communication" if that becomes available --\x3e<text term="letter"/></group></if><else><names variable="author" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names></else></choose></else-if><else><names variable="composer" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"/><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><text macro="title-intext"/></if></choose></if></choose><names variable="editor"/><names variable="editorial-director"/><text macro="title-intext"/></substitute></names></else></choose></macro><macro name="date-bib"><group delimiter=" " prefix="(" suffix=")"><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/><choose><if type="article-magazine article-newspaper broadcast interview motion_picture pamphlet personal_communication post post-weblog song speech webpage" match="any">\x3c!-- Many video and audio examples in manual give full dates. Err on the side of too much information. --\x3e<date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if><else-if type="paper-conference">\x3c!-- Capture \'speech\' stored as \'paper-conference\' --\x3e<choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if></choose></else-if>\x3c!-- Only year: article article-journal book chapter entry entry-dictionary entry-encyclopedia dataset figure graphic manuscript map musical_score paper-conference[published] patent report review review-book thesis --\x3e</choose></if><else-if variable="status"><group><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></group></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></group></group></macro><macro name="date-sort-group">\x3c!-- APA sorts 1. no-date items, 2. items with dates, 3. in-press (status) items --\x3e<choose><if variable="issued"><text value="1"/></if><else-if variable="status"><text value="2"/></else-if><else><text value="0"/></else></choose></macro><macro name="date-sort-date"><date variable="issued" form="numeric"/></macro><macro name="date-intext"><choose><if variable="issued"><group delimiter="/"><group delimiter=" "><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group><group delimiter=" "><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none">\x3c!-- These variables indicate that the communication is retrievable by the reader. If not, then use the in-text-only personal communication format --\x3e<date variable="issued" form="text"/></if><else><date variable="issued"><date-part name="year"/></date></else></choose></if><else><date variable="issued"><date-part name="year"/></date></else></choose><text variable="year-suffix"/></group></group></group></if><else-if variable="status"><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></macro>\x3c!-- APA has two description elements following the title:title (parenthetical) [bracketed]  --\x3e<macro name="title-and-descriptions"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/><text macro="bracketed"/></group></if><else><group delimiter=" "><text macro="bracketed"/><text macro="parenthetical"/></group></else></choose></macro><macro name="title"><choose><if type="post webpage" match="any">\x3c!-- Webpages are always italicized --\x3e<text variable="title" font-style="italic"/></if><else-if variable="container-title" match="any">\x3c!-- Other types are italicized based on presence of container-title.Assume that review and review-book are published in periodicals/blogs,not just on a web page (ex. 69) --\x3e<text variable="title"/></else-if><else><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text variable="title" font-style="italic"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=": " font-style="italic"><text variable="title"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></if><else><text variable="title" font-style="italic"/></else></choose></else-if><else><group delimiter=": " font-style="italic"><text variable="title"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></else></choose></else></choose></macro><macro name="title-intext"><choose><if variable="title" match="none"><text macro="bracketed-intext" prefix="[" suffix="]"/></if><else-if type="bill">\x3c!-- If a bill has no number or container-title, assume it is a hearing; italic --\x3e<choose><if variable="number container-title" match="none"><text variable="title" form="short" font-style="italic" text-case="title"/></if><else-if variable="title"><text variable="title" form="short" text-case="title"/></else-if><else><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none">\x3c!-- Replace with label variable="number" as that becomes available --\x3e<text term="issue" form="short"/></if></choose><text variable="number"/></group></group></else></choose></else-if><else-if type="legal_case" match="any">\x3c!-- Cases are italicized --\x3e<text variable="title" font-style="italic"/></else-if><else-if type="legislation treaty" match="any">\x3c!-- Legislation and treaties not italicized or quoted --\x3e<text variable="title" form="short" text-case="title"/></else-if><else-if type="post webpage" match="any">\x3c!-- Webpages are always italicized --\x3e<text variable="title" form="short" font-style="italic" text-case="title"/></else-if><else-if variable="container-title" match="any">\x3c!-- Other types are italicized or quoted based on presence of container-title. As in title macro. --\x3e<text variable="title" form="short" quotes="true" text-case="title"/></else-if><else><text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="parenthetical">\x3c!-- (Secondary contributors; Database location; Genre no. 123; Report Series 123, Version, Edition, Volume, Page) --\x3e<group prefix="(" suffix=")"><choose><if type="patent">\x3c!-- authority: U.S. ; genre: patent ; number: 123,445 --\x3e<group delimiter=" "><text variable="authority" form="short"/><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else>\x3c!-- This should be localized --\x3e<text value="patent" text-case="capitalize-first"/></else></choose><group delimiter=" ">\x3c!-- Replace with label variable="number" if that becomes available --\x3e<text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></group></if><else-if type="post webpage" match="any">\x3c!-- For post webpage, container-title is treated as publisher --\x3e<group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else-if><else-if variable="container-title"><group delimiter="; "><text macro="secondary-contributors"/><choose><if type="broadcast graphic map motion_picture song" match="any">\x3c!-- For audiovisual media, number information comes after title, not container-title --\x3e<text macro="number"/></if></choose></group></else-if><else><group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else></choose></group></macro><macro name="parenthetical-container"><choose><if variable="container-title" match="any"><group prefix="(" suffix=")"><group delimiter="; "><text macro="database-location"/><choose><if type="broadcast graphic map motion_picture song" match="none">\x3c!-- For audiovisual media, number information comes after title, not container-title --\x3e<text macro="number"/></if></choose><text macro="locators-booklike"/></group></group></if></choose></macro><macro name="bracketed">\x3c!-- [Descriptive information] --\x3e\x3c!-- If there is a number, genre is already printed in macro="number" --\x3e<group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any">\x3c!-- Reviewed item --\x3e<group delimiter="; "><group delimiter=", "><group delimiter=" ">\x3c!-- Assume that genre is entered as \'Review of the book\' or similar --\x3e<choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else>\x3c!-- Replace with term="review" as that becomes available --\x3e<text value="Review of"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else>\x3c!-- Replace with term="review" as that becomes available --\x3e<text value="Review of"/></else></choose></else></choose><text macro="reviewed-title"/></group><names variable="reviewed-author"><label form="verb-short" suffix=" "/><name and="symbol" initialize-with=". " delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else-if type="thesis">\x3c!-- Thesis type and institution --\x3e<group delimiter="; "><choose><if variable="number" match="none"><group delimiter=", "><text variable="genre" text-case="capitalize-first"/><choose><if variable="archive DOI URL" match="any">\x3c!-- Include the university in brackets if thesis is published --\x3e<text variable="publisher"/></if></choose></group></if></choose><text variable="medium" text-case="capitalize-first"/></group></else-if><else-if variable="interviewer" type="interview" match="any">\x3c!-- Interview information --\x3e<choose><if variable="title"><text macro="format"/></if><else-if variable="genre"><group delimiter="; "><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><group delimiter=" "><text term="author" form="verb"/><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/></names></group></group></group></else-if><else-if variable="interviewer"><group delimiter="; "><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/></names><text variable="medium" text-case="capitalize-first"/></group></else-if><else><text macro="format"/></else></choose></else-if><else-if type="personal_communication">\x3c!-- Letter information --\x3e<choose><if variable="recipient"><group delimiter="; "><group delimiter=" "><choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else><text macro="format"/></else></choose></else-if><else-if variable="composer" type="song" match="all">\x3c!-- Performer of classical music works --\x3e<group delimiter="; "><choose><if variable="number" match="none"><group delimiter=" "><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else-if><else>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></if><else><group delimiter=" "><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else>\x3c!-- Replace prefix with performer label as that becomes available --\x3e<names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></else></choose><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></else-if><else-if variable="container-title" match="none">\x3c!-- Other description --\x3e<text macro="format"/></else-if><else>\x3c!-- For conference presentations, chapters in reports, software, place bracketed after the container title --\x3e<choose><if type="paper-conference speech" match="any"><choose><if variable="collection-editor editor editorial-director issue page volume" match="any"><text macro="format"/></if></choose></if><else-if type="book"><choose><if variable="version" match="none"><text macro="format"/></if></choose></else-if><else-if type="report" match="none"><text macro="format"/></else-if></choose></else></choose></group></macro><macro name="bracketed-intext"><group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any">\x3c!-- This should be localized --\x3e<text macro="reviewed-title-intext" prefix="Review of "/></if><else-if variable="interviewer" type="interview" match="any"><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/><substitute><text macro="format-intext"/></substitute></names></else-if><else-if type="personal_communication">\x3c!-- Letter information --\x3e<choose><if variable="recipient"><group delimiter=" "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group></if><else><text macro="format-intext"/></else></choose></else-if><else><text macro="format-intext"/></else></choose></group></macro><macro name="bracketed-container"><group prefix="[" suffix="]"><choose><if type="paper-conference speech" match="any">\x3c!-- Conference presentations should describe the session [container] in bracketed unless published in a proceedings --\x3e<choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><text macro="format"/></if></choose></if><else-if type="book" variable="version" match="all">\x3c!-- For entries in mobile app reference works, place bracketed after the container-title --\x3e<text macro="format"/></else-if><else-if type="report">\x3c!-- For chapters in reports, place bracketed after the container title --\x3e<text macro="format"/></else-if></choose></group></macro><macro name="secondary-contributors"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text macro="secondary-contributors-periodical"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><text macro="secondary-contributors-booklike"/></if><else><text macro="secondary-contributors-periodical"/></else></choose></else-if><else><text macro="secondary-contributors-booklike"/></else></choose></macro><macro name="secondary-contributors-periodical"><group delimiter="; "><choose><if variable="title"><names variable="interviewer" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose><names variable="translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></macro><macro name="secondary-contributors-booklike"><group delimiter="; "><choose><if variable="title"><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose>\x3c!-- When editortranslator becomes available, add a test: variable="editortranslator" match="none"; then print translator --\x3e<choose><if type="post webpage" match="none">\x3c!-- Webpages treat container-title like publisher --\x3e<choose><if variable="container-title" match="none"><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></if></choose></if><else><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></else></choose></group></macro><macro name="database-location"><choose><if variable="archive-place" match="none">\x3c!-- With `archive-place`: physical archives. Without: online archives. --\x3e\x3c!-- Add archive_collection as that becomes available --\x3e<text variable="archive_location"/></if></choose></macro><macro name="number"><choose><if variable="number"><group delimiter=", "><group delimiter=" "><text variable="genre" text-case="title"/><choose><if is-numeric="number">\x3c!-- Replace with label variable="number" if that becomes available --\x3e<text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></if><else><text variable="number"/></else></choose></group><choose><if type="thesis"><choose>\x3c!-- Include the university in brackets if thesis is published --\x3e<if variable="archive DOI URL" match="any"><text variable="publisher"/></if></choose></if></choose></group></if></choose></macro><macro name="locators-booklike"><choose><if type="article-journal article-magazine article-newspaper broadcast interview patent post post-weblog review review-book speech webpage" match="any"/><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></if></choose></else-if><else><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></else></choose></macro><macro name="version"><choose><if is-numeric="version"><group delimiter=" ">\x3c!-- replace with label variable="version" if that becomes available --\x3e<text term="version" text-case="capitalize-first"/><text variable="version"/></group></if><else><text variable="version"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><label variable="edition" form="short"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="volume-booklike"><group delimiter=", ">\x3c!-- Report series [ex. 52] --\x3e<choose><if type="report"><group delimiter=" "><text variable="collection-title" text-case="title"/><text variable="collection-number"/></group></if></choose><choose><if variable="volume" match="any"><choose>\x3c!-- Non-numeric volumes are already printed as part of the book title --\x3e<if is-numeric="volume" match="none"/><else><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><number variable="volume" form="numeric"/></group></else></choose></if><else><group>\x3c!-- Replace with label variable="number-of-volumes" if that becomes available --\x3e<text term="volume" form="short" text-case="capitalize-first" suffix=" "/><text term="page-range-delimiter" prefix="1"/><number variable="number-of-volumes" form="numeric"/></group></else></choose><group delimiter=" "><label variable="issue" text-case="capitalize-first"/><text variable="issue"/></group><group delimiter=" "><label variable="page" form="short" suffix=" "/><text variable="page"/></group></group></macro><macro name="reviewed-title"><choose><if variable="reviewed-title">\x3c!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --\x3e<text variable="reviewed-title" font-style="italic"/></if><else>\x3c!-- Assume title is title of reviewed work --\x3e<text variable="title" font-style="italic"/></else></choose></macro><macro name="reviewed-title-intext"><choose><if variable="reviewed-title">\x3c!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --\x3e<text variable="reviewed-title" form="short" font-style="italic" text-case="title"/></if><else>\x3c!-- Assume title is title of reviewed work --\x3e<text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="format"><choose><if variable="genre medium" match="any"><group delimiter="; "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if></choose><text variable="medium" text-case="capitalize-first"/></group></if>\x3c!-- Generic labels for specific types --\x3e\x3c!-- These should be localized when possible --\x3e<else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all">\x3c!-- Replace with type="software" and term="software" as that becomes available --\x3e<text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro><macro name="format-intext"><choose><if variable="genre" match="any"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if>\x3c!-- Generic labels for specific types --\x3e\x3c!-- These should be localized when possible --\x3e<else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all">\x3c!-- Replace with type="software" and term="software" as that becomes available --\x3e<text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro>\x3c!-- APA \'source\' element contains four parts:container, event, publisher, access --\x3e<macro name="container"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any">\x3c!-- Periodical items --\x3e<text macro="container-periodical"/></if><else-if type="paper-conference">\x3c!-- Determine if paper-conference is a periodical or booklike --\x3e<choose><if variable="editor editorial-director collection-editor container-author" match="any"><text macro="container-booklike"/></if><else><text macro="container-periodical"/></else></choose></else-if><else-if type="post webpage" match="none">\x3c!-- post and webpage treat container-title like publisher --\x3e<text macro="container-booklike"/></else-if></choose></macro><macro name="container-periodical"><group delimiter=". "><group delimiter=", "><text variable="container-title" font-style="italic" text-case="title"/><choose><if variable="volume"><group><text variable="volume" font-style="italic"/><text variable="issue" prefix="(" suffix=")"/></group></if><else><text variable="issue" font-style="italic"/></else></choose><choose><if variable="page"><text variable="page"/></if><else>\x3c!-- Ex. 6: Journal article with article number or eLocator --\x3e\x3c!-- This should be localized --\x3e<text variable="number" prefix="Article "/></else></choose></group><choose><if variable="issued"><choose><if variable="issue page volume" match="none"><text variable="status" text-case="capitalize-first"/></if></choose></if></choose></group></macro><macro name="container-booklike"><choose><if variable="container-title" match="any"><group delimiter=" "><text term="in" text-case="capitalize-first"/><group delimiter=", "><names variable="editor translator" delimiter=", &amp; ">\x3c!-- Change to editortranslator and move editor to substitute as that becomes available --\x3e<name and="symbol" initialize-with=". " delimiter=", "/><label form="short" text-case="title" prefix=" (" suffix=")"/><substitute><names variable="editorial-director"/><names variable="collection-editor"/><names variable="container-author"/></substitute></names><group delimiter=": " font-style="italic"><text variable="container-title"/>\x3c!-- Replace with volume-title as that becomes available --\x3e<choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></group><text macro="parenthetical-container"/><text macro="bracketed-container"/></group></if></choose></macro><macro name="publisher"><group delimiter="; "><choose><if type="thesis"><choose><if variable="archive DOI URL" match="none"><text variable="publisher"/></if></choose></if><else-if type="post webpage" match="any">\x3c!-- For websites, treat container title like publisher --\x3e<group delimiter="; "><text variable="container-title" text-case="title"/><text variable="publisher"/></group></else-if><else-if type="paper-conference">\x3c!-- For paper-conference, don\'t print publisher if in a journal-like proceedings --\x3e<choose><if variable="collection-editor editor editorial-director" match="any"><text variable="publisher"/></if></choose></else-if><else-if type="article-journal article-magazine article-newspaper post-weblog" match="none"><text variable="publisher"/></else-if></choose><group delimiter=", "><choose><if variable="archive-place">\x3c!-- With `archive-place`: physical archives. Without: online archives. --\x3e\x3c!-- For physical archives, print the location before the archive name.For electronic archives, these are printed in macro="description". --\x3e\x3c!-- Split "archive_location" into "archive_collection" and "archive_location" as that becomes available --\x3e\x3c!-- Must test for archive_collection:With collection: archive_collection (archive_location), archive, archive-placeNo collection: archive (archive_location), archive-place--\x3e<text variable="archive_location"/></if></choose><text variable="archive"/><text variable="archive-place"/></group></group></macro><macro name="access"><choose><if variable="DOI" match="any"><text variable="DOI" prefix="https://doi.org/"/></if><else-if variable="URL"><group delimiter=" "><choose><if variable="issued status" match="none"><group delimiter=" "><text term="retrieved" text-case="capitalize-first"/><date variable="accessed" form="text" suffix=","/><text term="from"/></group></if></choose><text variable="URL"/></group></else-if></choose></macro><macro name="event"><choose><if variable="event">\x3c!-- To prevent Zotero from printing event-place due to its double-mapping of all \'place\' toboth publisher-place and event-place. Remove this \'choose\' when that is changed. --\x3e<choose><if variable="collection-editor editor editorial-director issue page volume" match="none">\x3c!-- Don\'t print event info if published in a proceedings --\x3e<group delimiter=", "><text variable="event"/><text variable="event-place"/></group></if></choose></if></choose></macro>\x3c!-- After \'source\', APA also prints publication history (original publication, reprint info, retraction info) --\x3e<macro name="publication-history"><choose><if type="patent" match="none"><group prefix="(" suffix=")"><choose><if variable="references">\x3c!-- This provides the option for more elaborate description of publication history, such as full "reprinted" references(examples 11, 43, 44) or retracted references --\x3e<text variable="references"/></if><else><group delimiter=" "><text value="Original work published"/><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group></else></choose></group></if><else><text variable="references" prefix="(" suffix=")"/></else></choose></macro>\x3c!-- Legal citations have their own rules --\x3e<macro name="legal-cites"><choose><if type="legal_case"><group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/></group><text variable="references"/></group><text macro="access"/></group></if><else-if type="bill">\x3c!-- Currently designed to handle bills, resolutions, hearings, rederal reports. --\x3e<group delimiter=". "><group delimiter=", "><choose><if variable="number container-title" match="none">\x3c!-- If no number or container-title, then assume it is a hearing --\x3e<text variable="title" font-style="italic"/></if><else><text variable="title"/></else></choose><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><choose><if variable="number container-title" match="none">\x3c!-- If no number or container-title, then assume it is a hearing --\x3e<names variable="author" prefix="(testimony of " suffix=")"><name and="symbol" delimiter=", "/></names></if><else><text variable="status" prefix="(" suffix=")"/></else></choose></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="legislation">\x3c!-- Currently designed to handle statutes, codified regulations, executive orders.For uncodified regulations, assume future code section is in status. --\x3e<group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><text variable="status" prefix="(" suffix=")"/></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="treaty">\x3c!-- APA generally defers to Bluebook for legal citations, but diverges withoutexplanation for treaty items. The Bluebook format that was used in APA 6thed. is used here. --\x3e<group delimiter=", "><text variable="title" text-case="title"/><names variable="author"><name initialize-with="." form="short" delimiter="-"/></names><text macro="date-legal"/><text macro="container-legal"/><text macro="access"/></group></else-if></choose></macro><macro name="date-legal"><choose><if type="legal_case"><group prefix="(" suffix=")" delimiter=" "><text variable="authority"/><choose><if variable="container-title" match="any">\x3c!-- Print only year for cases published in reporters--\x3e<date variable="issued" form="numeric" date-parts="year"/></if><else><date variable="issued" form="text"/></else></choose></group></if><else-if type="bill legislation" match="any"><group prefix="(" suffix=")" delimiter=" "><group delimiter=" "><date variable="original-date"><date-part name="year"/></date><text term="and" form="symbol"/></group><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="treaty"><date variable="issued" form="text"/></else-if></choose></macro><macro name="container-legal">\x3c!-- Expect legal item container-titles to be stored in short form --\x3e<choose><if type="legal_case"><group delimiter=" "><choose><if variable="container-title"><group delimiter=" "><text variable="volume"/><text variable="container-title"/><group delimiter=" ">\x3c!-- Change to label variable="section" as that becomes available --\x3e<text term="section" form="symbol"/><text variable="section"/></group><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><text value="___"/></else></choose></group></if><else><group delimiter=" "><choose><if is-numeric="number">\x3c!-- Replace with label variable="number" if that becomes available --\x3e<text term="issue" form="short" text-case="capitalize-first"/></if></choose><text variable="number"/></group></else></choose></group></if><else-if type="bill"><group delimiter=", "><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none">\x3c!-- Replace with label variable="number" as that becomes available --\x3e<text term="issue" form="short"/></if></choose><text variable="number"/></group></group><text variable="authority"/><text variable="chapter-number"/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></else-if><else-if type="legislation"><choose><if variable="number">\x3c!--There\'s a public law number--\x3e<group delimiter=", "><text variable="number" prefix="Pub. L. No. "/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></if><else><group delimiter=" "><text variable="volume"/><text variable="container-title"/><choose><if variable="section"><group delimiter=" ">\x3c!-- Change to label variable="section" as that becomes available --\x3e<text term="section" form="symbol"/><text variable="section"/></group></if><else><text variable="page-first"/></else></choose></group></else></choose></else-if><else-if type="treaty"><group delimiter=" "><number variable="volume"/><text variable="container-title"/><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><group delimiter=" ">\x3c!-- Replace with label variable="number" if that becomes available --\x3e<text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></else></choose></group></else-if></choose></macro><macro name="citation-locator"><group delimiter=" "><choose><if locator="chapter"><label variable="locator" text-case="capitalize-first"/></if><else><label variable="locator" form="short"/></else></choose><text variable="locator"/></group></macro><citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year" givenname-disambiguation-rule="primary-name-with-initials"><sort><key macro="author-bib" names-min="3" names-use-first="1"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><text macro="author-intext"/><text macro="date-intext"/><text macro="citation-locator"/></group></layout></citation><bibliography hanging-indent="true" et-al-min="21" et-al-use-first="19" et-al-use-last="true" entry-spacing="0" line-spacing="2"><sort><key macro="author-bib"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/><key macro="title"/></sort><layout><choose><if type="bill legal_case legislation treaty" match="any">\x3c!-- Legal items have different orders and delimiters --\x3e<choose><if variable="DOI URL" match="any"><text macro="legal-cites"/></if><else><text macro="legal-cites" suffix="."/></else></choose></if><else><group delimiter=" "><group delimiter=". " suffix="."><text macro="author-bib"/><text macro="date-bib"/><text macro="title-and-descriptions"/><text macro="container"/><text macro="event"/><text macro="publisher"/></group><text macro="access"/><text macro="publication-history"/></group></else></choose></layout></bibliography>\n</style>\n',vancouver:'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" initialize-with-hyphen="false" page-range-format="minimal"><info><title>Vancouver</title><id>http://www.zotero.org/styles/vancouver</id><link href="http://www.zotero.org/styles/vancouver" rel="self"/><link href="http://www.nlm.nih.gov/bsd/uniform_requirements.html" rel="documentation"/><author><name>Michael Berkowitz</name><email>mberkowi@gmu.edu</email></author><contributor><name>Sean Takats</name><email>stakats@gmu.edu</email></contributor><contributor><name>Sebastian Karcher</name></contributor><category citation-format="numeric"/><category field="medicine"/><summary>Vancouver style as outlined by International Committee of Medical Journal Editors Uniform Requirements for Manuscripts Submitted to Biomedical Journals: Sample References</summary><updated>2022-04-14T13:48:43+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><date form="text" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><terms><term name="collection-editor" form="long"><single>editor</single><multiple>editors</multiple></term><term name="presented at">presented at</term><term name="available at">available from</term><term name="section" form="short">sect.</term></terms></locale><locale xml:lang="fr"><date form="text" delimiter=" "><date-part name="day"/><date-part name="month" form="short" strip-periods="true"/><date-part name="year"/></date></locale><macro name="author"><names variable="author"><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/><substitute><names variable="editor"/></substitute></names></macro><macro name="editor"><names variable="editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names></macro><macro name="chapter-marker"><choose><if type="chapter paper-conference entry-dictionary entry-encyclopedia" match="any"><text term="in" text-case="capitalize-first"/></if></choose></macro><macro name="publisher"><choose>\x3c!--discard publisher info for articles--\x3e<if type="article-journal article-magazine article-newspaper" match="none"><group delimiter=": " suffix=";"><choose><if type="thesis"><text variable="publisher-place" prefix="[" suffix="]"/></if><else-if type="speech"/><else><text variable="publisher-place"/></else></choose><text variable="publisher"/></group></if></choose></macro><macro name="access"><choose><if variable="URL"><group delimiter=": "><text term="available at" text-case="capitalize-first"/><text variable="URL"/></group></if></choose></macro><macro name="accessed-date"><choose><if variable="URL"><group prefix="[" suffix="]" delimiter=" "><text term="cited" text-case="lowercase"/><date variable="accessed" form="text"/></group></if></choose></macro><macro name="container-title"><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="any"><group suffix="." delimiter=" "><choose><if type="article-journal review review-book" match="any"><text variable="container-title" form="short" strip-periods="true"/></if><else><text variable="container-title" strip-periods="true"/></else></choose><choose><if variable="URL"><text term="internet" prefix="[" suffix="]" text-case="capitalize-first"/></if></choose></group><text macro="edition" prefix=" "/></if>\x3c!--add event-name and event-place once they become available--\x3e<else-if type="bill legislation" match="any"><group delimiter=", "><group delimiter=". "><text variable="container-title"/><group delimiter=" "><text term="section" form="short" text-case="capitalize-first"/><text variable="section"/></group></group><text variable="number"/></group></else-if><else-if type="speech"><group delimiter=": " suffix=";"><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><text term="presented at"/></group><text variable="event"/></group></else-if><else><group delimiter=", " suffix="."><choose><if variable="collection-title" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose><text variable="container-title"/></group></else></choose></macro><macro name="title"><text variable="title"/><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="none"><choose><if variable="URL"><text term="internet" prefix=" [" suffix="]" text-case="capitalize-first"/></if></choose><text macro="edition" prefix=". "/></if></choose><choose><if type="thesis"><text variable="genre" prefix=" [" suffix="]"/></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="date"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><group suffix=";" delimiter=" "><date variable="issued" form="text"/><text macro="accessed-date"/></group></if><else-if type="bill legislation" match="any"><group delimiter=", "><date variable="issued" delimiter=" "><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="report"><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/></date><text macro="accessed-date" prefix=" "/></else-if><else-if type="patent"><group suffix="."><group delimiter=", "><text variable="number"/><date variable="issued"><date-part name="year"/></date></group><text macro="accessed-date" prefix=" "/></group></else-if><else-if type="speech"><group delimiter="; "><group delimiter=" "><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><text macro="accessed-date"/></group><text variable="event-place"/></group></else-if><else><group suffix="."><date variable="issued"><date-part name="year"/></date><text macro="accessed-date" prefix=" "/></group></else></choose></macro><macro name="pages"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><text variable="page" prefix=":"/></if><else-if type="book" match="any"><text variable="number-of-pages" prefix=" "/><choose><if is-numeric="number-of-pages"><label variable="number-of-pages" form="short" prefix=" " plural="never"/></if></choose></else-if><else><group prefix=" " delimiter=" "><label variable="page" form="short" plural="never"/><text variable="page"/></group></else></choose></macro><macro name="journal-location"><choose><if type="article-journal article-magazine review review-book" match="any"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="collection-details"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="none"><choose><if variable="collection-title"><group delimiter=" " prefix="(" suffix=")"><names variable="collection-editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names><group delimiter="; "><text variable="collection-title"/><group delimiter=" "><label variable="volume" form="short"/><text variable="volume"/></group></group></group></if></choose></if></choose></macro><macro name="report-details"><choose><if type="report"><text variable="number" prefix="Report No.: "/></if></choose></macro><citation collapse="citation-number"><sort><key variable="citation-number"/></sort><layout prefix="(" suffix=")" delimiter=","><text variable="citation-number"/></layout></citation><bibliography et-al-min="7" et-al-use-first="6" second-field-align="flush"><layout><text variable="citation-number" suffix=". "/><group delimiter=". " suffix=". "><text macro="author"/><text macro="title"/></group><group delimiter=" " suffix=". "><group delimiter=": "><text macro="chapter-marker"/><group delimiter=" "><text macro="editor"/><text macro="container-title"/></group></group><text macro="publisher"/><group><text macro="date"/><text macro="journal-location"/><text macro="pages"/></group></group><text macro="collection-details" suffix=". "/><text macro="report-details" suffix=". "/><text macro="access"/></layout></bibliography>\n</style>\n',harvard1:'<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" default-locale="en-GB"><info><title>Cite Them Right 11th edition - Harvard</title><id>http://www.zotero.org/styles/harvard-cite-them-right</id><link href="http://www.zotero.org/styles/harvard-cite-them-right" rel="self"/><link href="http://www.zotero.org/styles/harvard-cite-them-right-10th-edition" rel="template"/><link href="http://www.citethemrightonline.com/" rel="documentation"/><author><name>Patrick O\'Brien</name></author><category citation-format="author-date"/><category field="generic-base"/><summary>Harvard according to Cite Them Right, 11th edition.</summary><updated>2021-09-01T10:12:20+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en-GB"><terms><term name="editor" form="short"><single>ed.</single><multiple>eds</multiple></term><term name="editortranslator" form="verb">edited and translated by</term><term name="edition" form="short">edn.</term></terms></locale><macro name="editor"><choose><if type="chapter paper-conference" match="any"><names variable="container-author" delimiter=", " suffix=", "><name and="text" initialize-with=". " delimiter=", " sort-separator=", " name-as-sort-order="all"/></names><choose><if variable="container-author" match="none"><names variable="editor translator" delimiter=", "><name and="text" initialize-with="." name-as-sort-order="all"/><label form="short" prefix=" (" suffix=")"/></names></if></choose></if></choose></macro><macro name="secondary-contributors"><choose><if type="chapter paper-conference" match="none"><names variable="editor translator" delimiter=". "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" initialize-with="."/></names></if><else-if variable="container-author" match="any"><names variable="editor translator" delimiter=". "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" initialize-with=". " delimiter=", "/></names></else-if></choose></macro><macro name="author"><names variable="author"><name and="text" delimiter-precedes-last="never" initialize-with="." name-as-sort-order="all"/><label form="short" prefix=" (" suffix=")"/><et-al font-style="italic"/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="article-newspaper article-magazine" match="any"><text variable="container-title" text-case="title" font-style="italic"/></if><else><text macro="title"/></else></choose></substitute></names></macro><macro name="author-short"><names variable="author"><name form="short" and="text" delimiter=", " delimiter-precedes-last="never" initialize-with=". "/><et-al font-style="italic"/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="article-newspaper article-magazine" match="any"><text variable="container-title" text-case="title" font-style="italic"/></if><else><text macro="title"/></else></choose></substitute></names></macro><macro name="access"><choose><if variable="DOI"><text variable="DOI" prefix="doi:"/></if><else-if variable="URL"><text term="available at" suffix=": " text-case="capitalize-first"/><text variable="URL"/><group prefix=" (" delimiter=": " suffix=")"><text term="accessed" text-case="capitalize-first"/><date form="text" variable="accessed"><date-part name="day"/><date-part name="month"/><date-part name="year"/></date></group></else-if></choose></macro><macro name="number-volumes"><choose><if variable="volume" match="none"><group delimiter=" " prefix="(" suffix=")"><text variable="number-of-volumes"/><label variable="volume" form="short" strip-periods="true"/></group></if></choose></macro><macro name="title"><choose><if type="bill book legal_case legislation motion_picture report song thesis webpage graphic" match="any"><group delimiter=". "><group delimiter=" "><group delimiter=" "><text variable="title" font-style="italic"/><text variable="medium" prefix="[" suffix="]"/></group><text macro="number-volumes"/></group><text macro="edition"/></group></if><else><text variable="title" form="long" quotes="true"/></else></choose></macro><macro name="publisher"><choose><if type="thesis"><group delimiter=". "><text variable="genre"/><text variable="publisher"/></group></if><else-if type="report"><group delimiter=". "><group delimiter=" "><text variable="genre"/><text variable="number"/></group><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></group></else-if><else-if type="article-journal article-newspaper article-magazine" match="none"><group delimiter=" "><group delimiter=", "><choose><if type="speech" variable="event" match="any"><text variable="event" font-style="italic"/></if></choose><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></group><group prefix="(" suffix=")" delimiter=", "><text variable="collection-title"/><text variable="collection-number"/></group></group></else-if></choose></macro><macro name="year-date"><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/></if><else><text term="no date"/><text variable="year-suffix" prefix=" "/></else></choose></macro><macro name="locator"><choose><if type="article-journal"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="published-date"><choose><if type="article-newspaper article-magazine post-weblog speech" match="any"><date variable="issued"><date-part name="day" suffix=" "/><date-part name="month" form="long"/></date></if></choose></macro><macro name="pages"><choose><if type="chapter paper-conference article-journal article article-magazine article-newspaper book review review-book report" match="any"><group delimiter=" "><label variable="page" form="short"/><text variable="page"/></group></if></choose></macro><macro name="container-title"><choose><if variable="container-title"><group delimiter=". "><group delimiter=" "><text variable="container-title" font-style="italic"/><choose><if type="article article-journal" match="any"><choose><if match="none" variable="page volume"><text value="Preprint" prefix="[" suffix="]"/></if></choose></if></choose></group><text macro="edition"/></group></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short" strip-periods="true"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="container-prefix"><choose><if type="chapter paper-conference" match="any"><text term="in"/></if></choose></macro><citation et-al-min="4" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year"><sort><key macro="year-date"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><group delimiter=", "><text macro="author-short"/><text macro="year-date"/></group><group><label variable="locator" form="short" suffix=" "/><text variable="locator"/></group></group></layout></citation><bibliography and="text" et-al-min="4" et-al-use-first="1"><sort><key macro="author"/><key macro="year-date"/><key variable="title"/></sort><layout suffix="."><group delimiter=". "><group delimiter=" "><text macro="author"/><text macro="year-date" prefix="(" suffix=")"/><group delimiter=", "><text macro="title"/><group delimiter=" "><text macro="container-prefix"/><text macro="editor"/><text macro="container-title"/></group></group></group><text macro="secondary-contributors"/><text macro="publisher"/></group><group delimiter=", " prefix=", "><text macro="locator"/><text macro="published-date"/><text macro="pages"/></group><text macro="access" prefix=". "/></layout></bibliography>\n</style>\n'}},{}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.templates=r.default=void 0;var i=e("@citation-js/core"),e=(e=e("./styles.json"))&&e.__esModule?e:{default:e};const s=r.templates=new i.util.Register(e.default);r.default=e=>s.has(e)?s.get(e):s.get("apa")},{"./styles.json":80,"@citation-js/core":"citation-js"}],82:[function(e,t,r){"use strict";r.byteLength=function(e){var e=m(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,i=m(e),s=i[0],i=i[1],n=new u(function(e,t){return 3*(e+t)/4-t}(s,i)),a=0,o=0<i?s-4:s;for(r=0;r<o;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],n[a++]=t>>16&255,n[a++]=t>>8&255,n[a++]=255&t;2===i&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,n[a++]=255&t);1===i&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,n[a++]=t>>8&255,n[a++]=255&t);return n},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],n=0,a=r-i;n<a;n+=16383)s.push(function(e,t,r){for(var i,s=[],n=t;n<r;n+=3)i=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(255&e[n+2]),s.push(function(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}(i));return s.join("")}(e,n,a<n+16383?a:n+16383));1==i?(t=e[r-1],s.push(o[t>>2]+o[t<<4&63]+"==")):2==i&&(t=(e[r-2]<<8)+e[r-1],s.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"="));return s.join("")};for(var o=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,n=i.length;s<n;++s)o[s]=i[s],l[i.charCodeAt(s)]=s;function m(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],83:[function(C,e,N){!function(e){!function(){"use strict";var O=C("base64-js"),n=C("ieee754"),t=(N.Buffer=p,N.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},N.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=p.prototype,e}function p(e,t,r){if("number"!=typeof e)return i(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function i(e,t,r){if("string"==typeof e){var i=e,s=t;if(p.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))return n=0|c(i,s),a=l(n),a=(i=a.write(i,s))!==n?a.slice(0,i):a;throw new TypeError("Unknown encoding: "+s)}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)){var n=e,i=t,a=r;if(i<0||n.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<i+(a||0))throw new RangeError('"length" is outside of buffer bounds');return(n=void 0===i&&void 0===a?new Uint8Array(n):void 0===a?new Uint8Array(n,i):new Uint8Array(n,i,a)).__proto__=p.prototype,n}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return p.from(s,t,r);var o=function(e){{var t,r;if(p.isBuffer(e))return t=0|m(e.length),0!==(r=l(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||I(e.length)?l(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return s(e),l(e<0?0:0|m(e))}function u(e){for(var t=e.length<0?0:0|m(e.length),r=l(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function m(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function c(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(s)return i?-1:T(e).length;t=(""+t).toLowerCase(),s=!0}}function r(e,t,r){var i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var n=this,a=t,o=r,l=n.length;(!o||o<0||l<o)&&(o=l);for(var u="",m=a=!a||a<0?0:a;m<o;++m)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(n[m]);return u;case"utf8":case"utf-8":return A(this,t,r);case"ascii":var p=this,l=t,c=r,h="";c=Math.min(p.length,c);for(var f=l;f<c;++f)h+=String.fromCharCode(127&p[f]);return h;case"latin1":case"binary":var d=this,a=t,g=r,b="";g=Math.min(d.length,g);for(var y=a;y<g;++y)b+=String.fromCharCode(d[y]);return b;case"base64":return v=this,i=r,0===(_=t)&&i===v.length?O.fromByteArray(v):O.fromByteArray(v.slice(_,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,_=r,x=this.slice(v,_),w="",E=0;E<x.length;E+=2)w+=String.fromCharCode(x[E]+256*x[E+1]);return w;default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function o(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function h(e,t,r,i,s){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=I(r=+r)?s?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=p.from(t,i)),p.isBuffer(t))return 0===t.length?-1:f(e,t,r,i,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(s?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):f(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function f(e,t,r,i,s){var n=1,a=e.length,o=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a/=n=2,o/=2,r/=2}function l(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(s)for(var u=-1,m=r;m<a;m++)if(l(e,m)===l(t,-1===u?0:m-u)){if(m-(u=-1===u?m:u)+1===o)return u*n}else-1!==u&&(m-=m-u),u=-1;else for(m=r=a<r+o?a-o:r;0<=m;m--){for(var p=!0,c=0;c<o;c++)if(l(e,m+c)!==l(t,c)){p=!1;break}if(p)return m}return-1}function g(e,t,r,i){return S(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function b(e,t,r,i){return S(function(e,t){for(var r,i,s=[],n=0;n<e.length&&!((t-=2)<0);++n)r=e.charCodeAt(n),i=r>>8,s.push(r%256),s.push(i);return s}(t,e.length-r),e,r,i)}function A(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,a,o,l,u=e[s],m=null,p=239<u?4:223<u?3:191<u?2:1;if(s+p<=r)switch(p){case 1:u<128&&(m=u);break;case 2:128==(192&(n=e[s+1]))&&127<(l=(31&u)<<6|63&n)&&(m=l);break;case 3:n=e[s+1],a=e[s+2],128==(192&n)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&n)<<6|63&a)&&(l<55296||57343<l)&&(m=l);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],128==(192&n)&&128==(192&a)&&128==(192&o)&&65535<(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)&&l<1114112&&(m=l)}null===m?(m=65533,p=1):65535<m&&(i.push((m-=65536)>>>10&1023|55296),m=56320|1023&m),i.push(m),s+=p}var c=i,h=c.length;if(h<=y)return String.fromCharCode.apply(String,c);for(var f="",d=0;d<h;)f+=String.fromCharCode.apply(String,c.slice(d,d+=y));return f}N.kMaxLength=t,(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=i,p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,p.alloc=function(e,t,r){return t=t,r=r,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},p.allocUnsafe=a,p.allocUnsafeSlow=a,p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(j(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);if(void 0===t)for(s=t=0;s<e.length;++s)t+=e[s].length;for(var r=p.allocUnsafe(t),i=0,s=0;s<e.length;++s){var n=e[s];if(j(n,Uint8Array)&&(n=p.from(n)),!p.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(r,i),i+=n.length}return r},p.byteLength=c,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)o(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)o(this,t,t+3),o(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)o(this,t,t+7),o(this,t+1,t+6),o(this,t+2,t+5),o(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):r.apply(this,arguments)},p.prototype.equals=function(e){if(p.isBuffer(e))return this===e||0===p.compare(this,e);throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var e="",t=N.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},p.prototype.compare=function(e,t,r,i,s){if(j(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),(t=void 0===t?0:t)<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(s<=i&&r<=t)return 0;if(s<=i)return-1;if(r<=t)return 1;if(this===e)return 0;for(var n=(s>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(n,a),l=this.slice(i,s),u=e.slice(t,r),m=0;m<o;++m)if(l[m]!==u[m]){n=l[m],a=u[m];break}return n<a?-1:a<n?1:0},p.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},p.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},p.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},p.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var s=this.length-t;if((void 0===r||s<r)&&(r=s),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var n,a,o,l=!1;;)switch(i){case"hex":var u=this,m=e,p=t,c=r,h=(p=Number(p)||0,u.length-p);(!c||h<(c=Number(c)))&&(c=h),(h=m.length)/2<c&&(c=h/2);for(var f=0;f<c;++f){var d=parseInt(m.substr(2*f,2),16);if(I(d))return f;u[p+f]=d}return f;case"utf8":case"utf-8":return h=t,o=r,S(T(e,(a=this).length-h),a,h,o);case"ascii":return g(this,e,t,r);case"latin1":case"binary":return g(this,e,t,r);case"base64":return a=this,o=t,n=r,S(k(e),a,o,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function d(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,i,s,n){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(s<t||t<n)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function _(e,t,r,i){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,i,s){return t=+t,r>>>=0,s||_(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function w(e,t,r,i,s){return t=+t,r>>>=0,s||_(e,0,r,8),n.write(e,t,r,i,52,8),r+8}p.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=p.prototype,r},p.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||d(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},p.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||d(e,t,this.length);for(var i=this[e+--t],s=1;0<t&&(s*=256);)i+=this[e+--t]*s;return i},p.prototype.readUInt8=function(e,t){return e>>>=0,t||d(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||d(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||d(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||d(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||d(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||d(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return(s*=128)<=i&&(i-=Math.pow(2,8*t)),i},p.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||d(e,t,this.length);for(var i=t,s=1,n=this[e+--i];0<i&&(s*=256);)n+=this[e+--i]*s;return(s*=128)<=n&&(n-=Math.pow(2,8*t)),n},p.prototype.readInt8=function(e,t){return e>>>=0,t||d(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||d(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt16BE=function(e,t){e>>>=0,t||d(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||d(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||d(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return e>>>=0,t||d(e,4,this.length),n.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||d(e,4,this.length),n.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||d(e,8,this.length),n.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||d(e,8,this.length),n.read(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||v(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,n=0;for(this[t]=255&e;++n<r&&(s*=256);)this[t+n]=e/s&255;return t+r},p.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||v(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,n=1;for(this[t+s]=255&e;0<=--s&&(n*=256);)this[t+s]=e/n&255;return t+r},p.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeIntLE=function(e,t,r,i){e=+e,t>>>=0,i||v(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var s=0,n=1,a=0;for(this[t]=255&e;++s<r&&(n*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/n>>0)-a&255;return t+r},p.prototype.writeIntBE=function(e,t,r,i){e=+e,t>>>=0,i||v(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var s=r-1,n=1,a=0;for(this[t+s]=255&e;0<=--s&&(n*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/n>>0)-a&255;return t+r},p.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},p.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},p.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},p.prototype.writeDoubleLE=function(e,t,r){return w(this,e,t,!0,r)},p.prototype.writeDoubleBE=function(e,t,r){return w(this,e,t,!1,r)},p.prototype.copy=function(e,t,r,i){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<r?r:i)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var s=(i=e.length-t<i-r?e.length-t+r:i)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=s-1;0<=n;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},p.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s;1===e.length&&(s=e.charCodeAt(0),"utf8"===i&&s<128||"latin1"===i)&&(e=s)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var n;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(n=t;n<r;++n)this[n]=e;else{var a=p.isBuffer(e)?e:p.from(e,i),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=a[n%o]}return this};var E=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],a=0;a<i;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!s){if(56319<r){-1<(t-=3)&&n.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&n.push(239,191,189);continue}s=r;continue}if(r<56320){-1<(t-=3)&&n.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&-1<(t-=3)&&n.push(239,191,189);if(s=null,r<128){if(--t<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function k(e){return O.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function S(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function I(e){return e!=e}}.call(this)}.call(this,C("buffer").Buffer)},{"base64-js":82,buffer:83,ieee754:86}],84:[function(e,t,r){"use strict";var p,c,h,i,s,n,a,o,l,u,m,we={PROCESSOR_VERSION:"1.4.61",error:function(e){throw"undefined"==typeof Error?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){"undefined"==typeof console?dump("CSL: "+e+"\n"):console.log("citeproc-js warning: "+e)},toLocaleUpperCase(t){var e=this.tmp.lang_array;try{t=t.toLocaleUpperCase(e)}catch(e){t=t.toUpperCase()}return t},toLocaleLowerCase(t){var e=this.tmp.lang_array;try{t=t.toLocaleLowerCase(e)}catch(e){t=t.toLowerCase()}return t},LOCATOR_LABELS_REGEXP:new RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(e){"note"===e.opt.xclass?(this.depth=0,this.update=function(e){for(var t=(e=e||"").split(/([\(\)])/),r=1,i=t.length;r<i;r+=2)"("===t[r]?(1==this.depth%2&&(t[r]="["),this.depth+=1):")"===t[r]&&(0==this.depth%2&&(t[r]="]"),--this.depth);return t.join("")}):this.update=function(e){return e}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(e,t,r){var i=null;if(e.opt.availableAbbrevDomains&&t&&"default"!==t){var s=e.locale[e.opt.lang].opts["jurisdiction-preference"],n=null;if(n=e.locale[r]?e.locale[r].opts["jurisdiction-preference"]:n)for(var a=n.length-1;-1<a;a--)if(-1<e.opt.availableAbbrevDomains[t].indexOf(n[a])){i=n[a];break}if(!i&&s)for(a=s.length-1;-1<a;a--)if(-1<e.opt.availableAbbrevDomains[t].indexOf(s[a])){i=s[a];break}}return i},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){var t,r;return this.opt.development_extensions.locator_date_and_revision&&e.locator&&(e.locator=""+e.locator,-1<(r=e.locator.indexOf("|")))&&(t=e.locator,e.locator=t.slice(0,r),(r=(t=t.slice(r+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/))&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(r[1]),t=t.slice(r[1].length)),e["locator-extra"]=t.replace(/^\s+/,"").replace(/\s+$/,"")),e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e)return(e=e.split("-"))[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),e.join("-")},parseNoteFieldHacks:function(e,t,r){if("string"==typeof e.note){for(var i=[],s=e.note.split("\n"),n=0,a=s.length;n<a;n++){var i=[],o=(h=s[n]).match(we.NOTE_FIELDS_REGEXP);if(o){for(var l=h.split(we.NOTE_FIELDS_REGEXP),u=0,m=l.length-1;u<m;u++)i.push(l[u]),i.push(o[u]);i.push(l[l.length-1]);for(u=1,m=i.length;u<m&&(!i[u-1].trim()||!(0<n||1<u)||i[u-1].match(we.NOTE_FIELD_REGEXP));u+=2)i[u]="\n"+i[u].slice(2,-1).trim()+"\n";s[n]=i.join("")}}for(var p=0,c={},n=0,a=(s=s.join("\n").split("\n")).length;n<a;n++){var h,f=(h=s[n]).match(we.NOTE_FIELD_REGEXP);if(h.trim()){if(!f){if(0===n)continue;p=n;break}var d,g=f[1],f=f[2].replace(/^\s+/,"").replace(/\s+$/,"");"type"===g?(e.type=f,s[n]=""):-1<we.DATE_VARIABLES.indexOf(g.replace(/^alt-/,""))?(!e[g]||r)&&(e[g]=we.DateParser.parseDateToArray(f),!t||t[g]&&this.isDateString(f))&&(s[n]=""):e[g]||(-1<we.NAME_VARIABLES.indexOf(g.replace(/^alt-/,""))?(c[g]||(c[g]=[]),1===(d=f.split(/\s*\|\|\s*/)).length?c[g].push({literal:d[0]}):2===d.length&&(d={family:d[0],given:d[1]},we.parseParticles(d),c[g].push(d))):e[g]=f,t&&!t[g])||(s[n]="")}}for(g in c)e[g]=c[g];if(t){s[p].trim()&&(s[p]="\n"+s[p]);for(n=p-1;-1<n;n--)s[n].trim()||(s=s.slice(0,n).concat(s.slice(n+1)))}e.note=s.join("\n").trim()}},checkPrefixSpaceAppend:function(e,t){var r="",i=(t=t||"").replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=i.slice(-1);return t=(t+(r=i.match(we.ENDSWITH_ROMANESQUE_REGEXP)||-1<we.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)||s.match(/[\)\],0-9]/)?" ":r)).replace(/\s+/g," ")},checkIgnorePredecessor:function(e,t){var r=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,"").slice(-1);return-1<we.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(r)&&-1<t.trim().indexOf(" ")&&!(e.tmp.term_predecessor=!1)},checkSuffixSpacePrepend:function(e,t){return t?t.match(we.STARTSWITH_ROMANESQUE_REGEXP)||-1<["[","("].indexOf(t.slice(0,1))?" "+t:t:""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],CREATORS:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","part-number","printing-number","section","supplement-number","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],r={},i=0,s=t.length;i<s;i++)r[t[i]]=e+"title"+("title"===t[i]?"":"-"+t[i]);return r},demoteNoiseWords:function(e,t,r){var i=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&r){(t=t.split(/\s+/)).reverse();for(var s=[],n=t.length-1;-1<n&&-1<i.indexOf(t[n].toLowerCase());n+=-1)s.push(t.pop());t.reverse();var e=t.join(" "),a=s.join(" ");"drop"!==r&&a?"demote"===r&&(t=[e,a].join(", ")):t=e}return t},extractTitleAndSubtitle:function(e,t){var r=t?" ":"",i=[""];this.opt.development_extensions.split_container_title&&i.push("container-");for(var s=0,n=i.length;s<n;s++){var a=we.TITLE_FIELD_SPLITS(i[s]),o=[!1];if(e.multi)for(var l in e.multi._keys[a.short])o.push(l);for(var u=0,m=o.length;u<m;u++){var p,c,h,f,d={},g=((l=o[u])?(e.multi._keys[a.title]&&(d[a.title]=e.multi._keys[a.title][l]),e.multi._keys[a.short]&&(d[a.short]=e.multi._keys[a.short][l])):(d[a.title]=e[a.title],d[a.short]=e[a.short]),d[a.main]=d[a.title],d[a.sub]=!1,d[a.short]);if(d[a.title]&&(g&&g.toLowerCase()===d[a.title].toLowerCase()?(d[a.main]=d[a.title],d[a.subjoin]="",d[a.sub]=""):g?(p=d[a.title].slice(g.replace(/[\?\!]+$/,"").length),c=d[a.title].replace(p.replace(/^[\?\!]+/,""),"").trim(),(f=we.TITLE_SPLIT_REGEXP.matchfirst.exec(p))&&c.toLowerCase()===g.toLowerCase()?(d[a.main]=c,d[a.subjoin]=f[1].replace(/[\?\!]+(\s*)$/,"$1"),d[a.sub]=p.replace(we.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(d[a.short]=d[a.main])):3==(h=we.TITLE_SPLIT(d[a.title])).length?(d[a.main]=h[0],d[a.subjoin]=h[1],d[a.sub]=h[2]):(d[a.main]=d[a.title],d[a.subjoin]="",d[a.sub]="")):3==(h=we.TITLE_SPLIT(d[a.title])).length?(d[a.main]=h[0],d[a.subjoin]=h[1],d[a.sub]=h[2],!this.opt.development_extensions.implicit_short_title||"legal_case"===e.type||e[a.short]||d[a.main].match(/^[\-\.[0-9]+$/)||(g=d[a.subjoin].trim(),-1===["?","!"].indexOf(g)&&(g=""),d[a.short]=d[a.main]+g)):(d[a.main]=d[a.title],d[a.subjoin]="",d[a.sub]=""),d[a.subjoin])&&d[a.subjoin].match(/([\?\!])/)&&(f=d[a.subjoin].match(/(\s*)$/),d[a.main]=d[a.main]+r+d[a.subjoin].trim(),d[a.subjoin]=f[1]),d[a.subjoin]&&(-1<d[a.subjoin].indexOf(":")&&(d[a.subjoin]=r+": "),-1<d[a.subjoin].indexOf("-")||-1<d[a.subjoin].indexOf("—"))&&(d[a.subjoin]="—"),l)for(var b in d)e.multi._keys[b]||(e.multi._keys[b]={}),e.multi._keys[b][l]=d[b];else for(var b in d)e[b]=d[b]}}},titlecaseSentenceOrNormal:function(e,t,r,i,s){var n,r=we.TITLE_FIELD_SPLITS(r),a={};if(i&&t.multi?(t.multi._keys[r.title]&&(a[r.title]=t.multi._keys[r.title][i]),t.multi._keys[r.main]&&(a[r.main]=t.multi._keys[r.main][i]),t.multi._keys[r.sub]&&(a[r.sub]=t.multi._keys[r.sub][i]),t.multi._keys[r.subjoin]&&(a[r.subjoin]=t.multi._keys[r.subjoin][i])):(a[r.title]=t[r.title],a[r.main]=t[r.main],a[r.sub]=t[r.sub],a[r.subjoin]=t[r.subjoin]),a[r.main]&&a[r.sub])return i=a[r.main],t=a[r.subjoin],n=a[r.sub],s?(i=we.Output.Formatters.sentence(e,i),n=we.Output.Formatters.sentence(e,n)):e.opt.development_extensions.uppercase_subtitles&&(n=we.Output.Formatters["capitalize-first"](e,n)),[i,t,n].join("");if(a[r.title]){if(s)return we.Output.Formatters.sentence(e,a[r.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var o=we.TITLE_SPLIT(a[r.title]),l=0,u=o.length;l<u;l+=2)o[l]=we.Output.Formatters["capitalize-first"](e,o[l]);for(l=1,u=o.length-1;l<u;l+=2){var m,p=o[l].match(/([:\?\!] )/);p&&(m="fr"===e.opt["default-locale"][0].slice(0,2).toLowerCase()?" ":"",o[l]=m+p[1]),(-1<o[l].indexOf("-")||-1<o[l].indexOf("—"))&&(o[l]="—")}a[r.title]=o.join("")}return a[r.title]}return""},getSafeEscape:function(i){var s;return-1<["bibliography","citation"].indexOf(i.tmp.area)?(s=[],i.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===i.opt.mode&&s.push(function(e){return e.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),s.length?function(e){for(var t=0,r=s.length;t<r;t+=1)e=s[t](e);return we.Output.Formats[i.opt.mode].text_escape(e)}:we.Output.Formats[i.opt.mode].text_escape):function(e){return e}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-à-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokmål)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"ª":"a","²":"2","³":"3","¹":"1","º":"o","ʰ":"h","ʱ":"ɦ","ʲ":"j","ʳ":"r","ʴ":"ɹ","ʵ":"ɻ","ʶ":"ʁ","ʷ":"w","ʸ":"y","ˠ":"ɣ","ˡ":"l","ˢ":"s","ˣ":"x","ˤ":"ʕ","ᴬ":"A","ᴭ":"Æ","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴲ":"Ǝ","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴽ":"Ȣ","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ᵂ":"W","ᵃ":"a","ᵄ":"ɐ","ᵅ":"ɑ","ᵆ":"ᴂ","ᵇ":"b","ᵈ":"d","ᵉ":"e","ᵊ":"ə","ᵋ":"ɛ","ᵌ":"ɜ","ᵍ":"g","ᵏ":"k","ᵐ":"m","ᵑ":"ŋ","ᵒ":"o","ᵓ":"ɔ","ᵔ":"ᴖ","ᵕ":"ᴗ","ᵖ":"p","ᵗ":"t","ᵘ":"u","ᵙ":"ᴝ","ᵚ":"ɯ","ᵛ":"v","ᵜ":"ᴥ","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"φ","ᵡ":"χ","⁰":"0","ⁱ":"i","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"−","⁼":"=","⁽":"(","⁾":")","ⁿ":"n","℠":"SM","™":"TM","㆒":"一","㆓":"二","㆔":"三","㆕":"四","㆖":"上","㆗":"中","㆘":"下","㆙":"甲","㆚":"乙","㆛":"丙","㆜":"丁","㆝":"天","㆞":"地","㆟":"人","ˀ":"ʔ","ˁ":"ʕ","ۥ":"و","ۦ":"ي"},SUPERSCRIPTS_REGEXP:new RegExp("[ª²³¹ºʰʱʲʳʴʵʶʷʸˠˡˢˣˤᴬᴭᴮᴰᴱᴲᴳᴴᴵᴶᴷᴸᴹᴺᴼᴽᴾᴿᵀᵁᵂᵃᵄᵅᵆᵇᵈᵉᵊᵋᵌᵍᵏᵐᵑᵒᵓᵔᵕᵖᵗᵘᵙᵚᵛᵜᵝᵞᵟᵠᵡ⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ℠™㆒㆓㆔㆕㆖㆗㆘㆙㆚㆛㆜㆝㆞㆟ˀˁۥۦ]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,r,i,s){var n;e.opt.use_context_condition&&((n=e.tmp.group_context.tip).condition?(n.condition.termtxt||(n.condition.termtxt=t,n.condition.valueTerm=r),n.value_seen||"comma-safe-numbers-only"!==n.condition.test||s&&(n.value_seen=!0,s.match(/^[0-9]/)||(e.tmp.just_did_number=!1))):i&&0<i.decorations.filter(e=>"@vertical-align"===e[0]).length||i&&i.strings.suffix?e.tmp.just_did_number=!1:t&&(t.match(/[0-9]$/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1))},EVALUATE_GROUP_CONDITION:function(e,t){var r,i,s,n;if(e.opt.use_context_condition)return r="comma-safe-numbers-only"===t.condition.test,"empty-label"===t.condition.test?s=!t.condition.termtxt:"empty-label-no-decor"===t.condition.test?s=!t.condition.termtxt||-1<t.condition.termtxt.indexOf("%s"):-1<["comma-safe","comma-safe-numbers-only"].indexOf(t.condition.test)&&(n=t.condition.termtxt,i=!1,t.condition.termtxt&&(i=t.condition.termtxt.slice(0,1).match(we.ALL_ROMANESQUE_REGEXP)),s=e.tmp.just_did_number?t.condition.valueTerm?!r:!n||(i?!r:-1<["always","after-number"].indexOf(e.opt.require_comma_on_symbol)):!t.condition.valueTerm&&!!n&&(i?!r:"always"===e.opt.require_comma_on_symbol)),n=!s,t.condition.not?!n:n},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:(s=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*—\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"],{match:new RegExp("("+s.join("|")+")","g"),matchfirst:new RegExp("^("+s.join("|")+")"),split:new RegExp("(?:"+s.join("|")+")")}),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(we.TITLE_SPLIT_REGEXP.match),r=e.split(we.TITLE_SPLIT_REGEXP.split),i=r.length-2;-1<i;i--)r[i]=r[i].trim(),r=r[i]&&r[i].slice(-1).toLowerCase()!==r[i].slice(-1)?(r[i]=r[i]+t[i]+r[i+1],r.slice(0,i+1).concat(r.slice(i+2))):r.slice(0,i+1).concat([t[i]]).concat(r.slice(i+1));return r},GET_COURT_CLASS:function(e,t,r){var i="",s=null,n=t.jurisdiction?t.jurisdiction.split(":")[0]:null,r=r?"court_key_classes":"court_condition_classes";return n&&t.authority&&("string"==typeof t.authority?s=t.authority:t.authority[0]&&t.authority[0].literal&&(s=t.authority[0].literal)),s&&(this.lang&&e.locale[this.lang].opts[r]&&e.locale[this.lang].opts[r][n]&&e.locale[this.lang].opts[r][n][s]?i=e.locale[this.lang].opts[r][n][s]:e.locale[e.opt["default-locale"][0]].opts[r]&&e.locale[e.opt["default-locale"][0]].opts[r][n]&&e.locale[e.opt["default-locale"][0]].opts[r][n][s]&&(i=e.locale[e.opt["default-locale"][0]].opts[r][n][s])),i},SET_COURT_CLASSES:function(e,t,r,i){for(var s=r.getNodesByName(i,"court-class"),n=0,a=r.numberofnodes(s);n<a;n+=1){var o=s[n],o=r.attributes(o),l=o["@name"],u=o["@country"],m=o["@courts"],p="court_key_classes";if(e.registry&&(p="court_condition_classes"),l&&u&&m){m=m.trim().split(/\s+/),e.locale[t].opts[p]||(e.locale[t].opts[p]={}),e.locale[t].opts[p][u]||(e.locale[t].opts[p][u]={});for(var c=0,h=m.length;c<h;c++)e.locale[t].opts[p][u][m[c]]=l}}},INIT_JURISDICTION_MACROS:function(e,t,r,i){if(t["best-jurisdiction"])return!0;if(e.sys.retrieveStyleModule&&we.MODULE_MACROS[i]&&t.jurisdiction){var s=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[s[0]]){var n=e.retrieveAllStyleModules(s);for(u in n){var a=e.loadStyleModule(u,n[u]);!a||n[a]||(Object.assign(n,e.retrieveAllStyleModules([a])),e.loadStyleModule(a,n[a],!0))}}s=e.getJurisdictionList(t.jurisdiction);!e.opt.parallel.enable||e.parallel||(e.parallel=new we.Parallel(e));for(var o=0,l=s.length;o<l;o++){var u=s[o];if(r&&e.juris[u]&&!r["best-jurisdiction"]&&e.juris[u].types.locator&&(t["best-jurisdiction"]=u),e.juris[u]&&e.juris[u].types[t.type])return t["best-jurisdiction"]=u,!0}}return!1}};function f(e){var t=e.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!t||t[2].match(/^[\u0370-\u03FF]$/)&&!t[3]?e:t[1]+we.toLocaleUpperCase.call(this,t[2])+t[3]}function d(n,e){if(!e)return"";n.doppel=p.split(e);var a={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"‘":{opener:"‘",closer:"’"},"“":{opener:"“",closer:"”"}};function r(e,t){var r,i,s;return-1<["“","‘",' "'," '"].indexOf(e)?(r=e,i=t,0===n.quoteState.length||r===n.quoteState[n.quoteState.length-1].opener?(n.quoteState.push({opener:a[r].opener,closer:a[r].closer,pos:i}),!1):(s=n.quoteState[n.quoteState.length-1].pos,n.quoteState.pop(),n.quoteState.push({opener:a[r].opener,closer:a[r].closer,positions:i}),s)):(r=e,i=t,0<n.quoteState.length&&r===n.quoteState[n.quoteState.length-1].closer?void n.quoteState.pop():i)}n.doppel.strings.length&&n.doppel.strings[0].trim()&&(n.doppel.strings[0]=n.capitaliseWords(n.doppel.strings[0],0,n.doppel.tags[0]));for(var t,i=0,s=n.doppel.tags.length;i<s;i++){var o=n.doppel.tags[i],l=n.doppel.strings[i+1];null!==n.tagState&&(h[o]?n.tagState.push(h[o]):n.tagState.length&&o===n.tagState[n.tagState.length-1]&&n.tagState.pop()),null!==n.afterPunct&&o.match(/[\!\?\:]$/)&&(n.afterPunct=!0),0===n.tagState.length?n.doppel.strings[i+1]=n.capitaliseWords(l,i+1,n.doppel,n.doppel.tags[i+1]):n.doppel.strings[i+1].trim()&&(n.lastWordPos=null),null===n.quoteState||!(u=function(e,t){if(e=e.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/))return r(e[1],t)}(o,i))&&0!==u||(m=n.doppel.origStrings[u+1].slice(0,1),n.doppel.strings[u+1]=m+n.doppel.strings[u+1].slice(1),n.lastWordPos=null),n.isFirst&&l.trim()&&(n.isFirst=!1),n.afterPunct&&l.trim()&&(n.afterPunct=!1)}if(n.quoteState)for(var u,m,i=0,s=n.quoteState.length;i<s;i++)void 0!==(u=n.quoteState[i].pos)&&(m=n.doppel.origStrings[u+1].slice(0,1),n.doppel.strings[u+1]=m+n.doppel.strings[u+1].slice(1));return n.lastWordPos&&(1<(t=(e=c.split(n.doppel.strings[n.lastWordPos.strings])).strings[n.lastWordPos.words]).length&&we.toLocaleLowerCase.call(this,t).match(n.skipWordsRex)&&(t=f.call(this,t),e.strings[n.lastWordPos.words]=t),n.doppel.strings[n.lastWordPos.strings]=c.join(e)),p.join(n.doppel)}function g(e,t,r){for(var i=e,s=(e=r?e.toLowerCase():e,[]),n=t?(e=e.split("").reverse().join(""),we.PARTICLE_GIVEN_REGEXP):we.PARTICLE_FAMILY_REGEXP,a=e.match(n);a;){var o,l=t?a[1].split("").reverse().join(""):a[1],u=!!a&&l;if(!(o=!!(u=!!u&&l.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&u.toUpperCase()!==u))break;i=t?(s.push(i.slice(-1*l.length)),i.slice(0,-1*l.length)):(s.push(i.slice(0,l.length)),i.slice(l.length)),a=(e=a[2]).match(n)}if(t){e=e.split("").reverse().join(""),s.reverse();for(var m=1,p=s.length;m<p;m++)" "==s[m].slice(0,1)&&(s[m-1]+=" ");for(m=0,p=s.length;m<p;m++)" "==s[m].slice(0,1)&&(s[m]=s[m].slice(1));e=i.slice(0,e.length)}else e=i.slice(-1*e.length);return[o,e,s]}we.XmlJSON=function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}},we.XmlJSON.prototype.clean=function(e){return e},we.XmlJSON.prototype.getStyleId=function(e,t){for(var r="id",i=(t&&(r="title"),""),s=e.children,n=0,a=s.length;n<a;n++)if("info"===s[n].name)for(var o=s[n].children,l=0,u=o.length;l<u;l++)o[l].name===r&&(i=o[l].children[0]);return i},we.XmlJSON.prototype.children=function(e){return!(!e||!e.children.length)&&e.children.slice()},we.XmlJSON.prototype.nodename=function(e){return e?e.name:null},we.XmlJSON.prototype.attributes=function(e){var t,r={};for(t in e.attrs)r["@"+t]=e.attrs[t];return r},we.XmlJSON.prototype.content=function(e){var t="";if(e&&e.children)for(var r=0,i=e.children.length;r<i;r+=1)"string"==typeof e.children[r]&&(t+=e.children[r]);return t},we.XmlJSON.prototype.namespace={},we.XmlJSON.prototype.numberofnodes=function(e){return e&&"number"==typeof e.length?e.length:0},we.XmlJSON.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),i=e&&e.attrs?e.attrs[t]||"":i},we.XmlJSON.prototype.getNodeValue=function(e,t){var r="";if(t)for(var i=0,s=e.children.length;i<s;i+=1)e.children[i].name===t&&(r=e.children[i].children.length?e.children[i]:"");else e&&(r=e);return r=r&&r.children&&1==r.children.length&&"string"==typeof r.children[0]?r.children[0]:r},we.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,s){"@"===i.slice(0,1)&&(i=i.slice(1));for(var n=0,a=e.children.length;n<a;n+=1)e.children[n].name===t&&e.children[n].attrs.name===r&&(e.children[n].attrs[i]=s)},we.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){for(var r=0,i=e.children.length;r<i;r+=1)e.children[r]&&"string"!=typeof e.children[r]&&e.children[r].attrs.name==t&&(e.children=e.children.slice(0,r).concat(e.children.slice(r+1)))},we.XmlJSON.prototype.deleteAttribute=function(e,t){void 0!==e.attrs[t]&&e.attrs.pop(t)},we.XmlJSON.prototype.setAttribute=function(e,t,r){return e.attrs[t]=r,!1},we.XmlJSON.prototype.nodeCopy=function(e,t){if("object"==typeof(t=t||{})&&void 0===t.length)for(var r in e)"string"==typeof e[r]?t[r]=e[r]:"object"==typeof e[r]&&(void 0===e[r].length?t[r]=this.nodeCopy(e[r],{}):t[r]=this.nodeCopy(e[r],[]));else for(var i=0,s=e.length;i<s;i+=1)"string"==typeof e[i]?t[i]=e[i]:t[i]=this.nodeCopy(e[i],{});return t},we.XmlJSON.prototype.getNodesByName=function(e,t,r,i){if(i=i||[],e&&e.children){t!==e.name||r&&r!==e.attrs.name||i.push(e);for(var s=0,n=e.children.length;s<n;s+=1)"object"==typeof e.children[s]&&this.getNodesByName(e.children[s],t,r,i)}return i},we.XmlJSON.prototype.nodeNameIs=function(e,t){return void 0!==e&&t==e.name},we.XmlJSON.prototype.makeXml=function(e){return e="string"==typeof e?"<"===e.slice(0,1)?this.jsonStringWalker.walkToObject(e):JSON.parse(e):e},we.XmlJSON.prototype.insertChildNodeAfter=function(e,t,r,i){for(var s=0,n=e.children.length;s<n;s+=1)if(t===e.children[s]){e.children=e.children.slice(0,s).concat([i]).concat(e.children.slice(s+1));break}return e},we.XmlJSON.prototype.insertPublisherAndPlace=function(e){if("group"===e.name){for(var t=!0,r=["publisher","publisher-place"],i=0,s=e.children.length;i<s;i+=1){var n=r.indexOf(e.children[i].attrs.variable);if(!("text"===e.children[i].name&&-1<n)||e.children[i].attrs.prefix||e.children[i].attrs.suffix){t=!1;break}r=r.slice(0,n).concat(r.slice(n+1))}t&&!r.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(i=0,s=e.children.length;i<s;i+=1)"object"==typeof e.children[i]&&this.insertPublisherAndPlace(e.children[i])},we.XmlJSON.prototype.isChildOfSubstitute=function(e){return 0<e.length&&("substitute"===(e=e.slice()).pop()||this.isChildOfSubstitute(e))},we.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t=t||[],"names"===e.name&&!this.isChildOfSubstitute(t)){for(var r=!0,i=0,s=e.children.length;i<s;i++)if("name"===e.children[i].name){r=!1;break}r&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}t.push(e.name);for(i=0,s=e.children.length;i<s;i+=1)"object"==typeof e.children[i]&&this.addMissingNameNodes(e.children[i],t);t.pop()},we.XmlJSON.prototype.addInstitutionNodes=function(e){if("names"===e.name){for(var t={},r=-1,i=0,s=e.children.length;i<s;i+=1){if("name"==e.children[i].name){for(var n in e.children[i].attrs)t[n]=e.children[i].attrs[n];t.delimiter=e.children[i].attrs.delimiter,t.and=e.children[i].attrs.and;for(var r=i,a=0,o=e.children[i].children.length;a<o;a+=1)if("family"===e.children[i].children[a].attrs.name)for(var n in e.children[i].children[a].attrs)t[n]=e.children[i].children[a].attrs[n]}if("institution"==e.children[i].name){r=-1;break}}if(-1<r){for(var l=this.nodeCopy(this.institution),i=0,s=we.INSTITUTION_KEYS.length;i<s;i+=1){var u=we.INSTITUTION_KEYS[i];void 0!==t[u]&&(l.children[0].attrs[u]=t[u]),t.delimiter&&(l.attrs.delimiter=t.delimiter),t.and&&(l.attrs.and=t.and)}e.children=e.children.slice(0,r+1).concat([l]).concat(e.children.slice(r+1))}}for(i=0,s=e.children.length;i<s;i+=1)"string"!=typeof e.children[i]&&this.addInstitutionNodes(e.children[i])},we.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,r=e.children.length;t<r;t+=1)"macro"===e.children[t].name&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")},we.XmlJSON.prototype.inspectDateMacros=function(e){if(e&&e.children){if("date"===e.name)return!0;for(var t=0,r=e.children.length;t<r;t+=1)if(this.inspectDateMacros(e.children[t]))return!0}return!1},we.stripXmlProcessingInstruction=function(e){return e=e&&(e=(e=(e=e.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,"")},we.parseXml=function(e){var t={children:[]},r=[t.children];function o(e){return e.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(e,t){t=parseInt(t,10);return String.fromCharCode(t)}).replace(/&#x([a-f0-9]{1,6});/gi,function(e,t){t=parseInt(t,16);return String.fromCharCode(t)})}function l(e){var t=RegExp("^<([^\t />]+)"),e=e.match(t);return e?e[1]:null}function i(e){var t,r={},i=(r.name=l(e),r.attrs={},function(e){var t=e.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(t)for(var r=0,i=t.length;r<i;r++)t[r]=t[r].replace(/=.*/,"");return t}(e));if(i)for(var s=0,n=i.length;s<n;s++){var a={name:i[s],value:(t=e,a=i[s],a=RegExp("^.*[\t ]+"+a+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),(t=t.match(a))?t[1].slice(1,-1):null)};r.attrs[a.name]=o(a.value)}return r.children=[],r}function s(e){r.slice(-1)[0].push(e)}function n(e){var t;-1<e.slice(1).indexOf("<")?((t=i(e.slice(0,e.indexOf(">")+1))).children=[o(e.match(/^.*>([^<]*)<.*$/)[1])],s(t)):"/>"===e.slice(-2)?(t=i(e),"term"===l(e)&&t.children.push(""),s(t)):"</"===e.slice(0,2)?r.pop():(s(t=i(e)),e=t,r.push(e.children))}for(var a=function(e){for(var t=(e=e.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),r=null,i=0,s=t.length;i<s;i++)0<i&&(t[i]="<"+t[i]),i<t.length-1&&(t[i]=t[i]+">"),"number"==typeof r||"<style "!==t[i].slice(0,7)&&"<locale "!=t[i].slice(0,8)||(r=i);for(var n,i=(t=t.slice(r)).length-2;-1<i;i--)-1===t[i].slice(1).indexOf("<")&&(n=t[i].slice(0,5),"/>"!==t[i].slice(-2))&&("<term"===n?"</term"===t[i+1].slice(0,6)&&(t[i]=t[i]+t[i+1],t=t.slice(0,i+1).concat(t.slice(i+2))):-1<["<sing","<mult"].indexOf(n)&&"/>"!==t[i].slice(-2)&&"<"===t[i+1].slice(0,1)&&(t[i]=t[i]+t[i+1],t=t.slice(0,i+1).concat(t.slice(i+2))));return t}(e),u=0,m=a.length;u<m;u++)n(a[u]);return t.children[0]},we.XmlDOM=function(e){this.dataObj=e,"undefined"==typeof DOMParser?((DOMParser=function(){}).prototype.parseFromString=function(e,t){var r;return"undefined"!=typeof ActiveXObject?((r=new ActiveXObject("MSXML.DomDocument")).async=!1,r.loadXML(e),r):"undefined"!=typeof XMLHttpRequest?((r=new XMLHttpRequest).open("GET","data:"+(t=t||"text/xml")+";charset=utf-8,"+encodeURIComponent(e),!1),r.overrideMimeType&&r.overrideMimeType(t),r.send(null),r.responseXML):"undefined"!=typeof marknote?(new marknote.Parser).parse(e):void 0},this.hasAttributes=function(e){e=!(!e.attributes||!e.attributes.length);return e}):this.hasAttributes=function(e){e=!(!e.attributes||!e.attributes.length);return e},this.importNode=function(e,t){e=void 0===e.importNode?this._importNode(e,t,!0):e.importNode(t,!0);return e},this._importNode=function(e,t,r){if(1===t.nodeType){var i=e.createElement(t.nodeName);if(t.attributes&&0<t.attributes.length)for(var s=0,n=t.attributes.length;s<n;)i.setAttribute(t.attributes[s].nodeName,t.getAttribute(t.attributes[s++].nodeName));if(r&&t.childNodes&&0<t.childNodes.length)for(s=0,n=t.childNodes.length;s<n;)i.appendChild(this._importNode(e,t.childNodes[s++],r));return i}},this.parser=new DOMParser;var e=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),t=e.getElementsByTagName("institution"),t=(this.institution=t.item(0),e.getElementsByTagName("institution-part"));this.institutionpart=t.item(0),this.ns="http://purl.org/net/xbiblio/csl"},we.XmlDOM.prototype.clean=function(e){return e=(e=(e=(e=(e=e.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},we.XmlDOM.prototype.getStyleId=function(e,t){var r="",i="id",e=e.getElementsByTagName(i=t?"title":i);return r=(r=(r=(e=e&&e.length?e.item(0):e)?e.textContent:r)||e.innerText)||e.innerHTML},we.XmlDOM.prototype.children=function(e){var t,r,i,s;if(e){for(s=[],r=0,i=(t=e.childNodes).length;r<i;r+=1)"#text"!=t[r].nodeName&&s.push(t[r]);return s}return[]},we.XmlDOM.prototype.nodename=function(e){return e.nodeName},we.XmlDOM.prototype.attributes=function(e){var t,r,i,s,n=new Object;if(e&&this.hasAttributes(e))for(i=0,s=(t=e.attributes).length;i<s;i+=1)n["@"+(r=t[i]).name]=r.value;return n},we.XmlDOM.prototype.content=function(e){e=void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.txt;return e},we.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},we.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0},we.XmlDOM.prototype.getAttributeName=function(e){return e.name},we.XmlDOM.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),i=e&&this.hasAttributes(e)&&e.getAttribute(t)?e.getAttribute(t):i},we.XmlDOM.prototype.getNodeValue=function(e,t){var r=null;return r=null===(r=null===(r=t&&0<(t=e.getElementsByTagName(t)).length?void 0!==t[0].textContent?t[0].textContent:void 0!==t[0].innerText?t[0].innerText:t[0].text:r)&&e&&e.childNodes&&(0==e.childNodes.length||1==e.childNodes.length&&"#text"==e.firstChild.nodeName)?void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.text:r)?e:r},we.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,s){var n,a,o,l;for("@"===i.slice(0,1)&&(i=i.slice(1)),n=0,a=(o=e.getElementsByTagName(t)).length;n<a;n+=1)(l=o[n]).getAttribute("name")==r&&l.setAttribute(i,s)},we.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){for(var r,i=e.childNodes,s=0,n=i.length;s<n;s+=1)(r=i[s])&&r.nodeType!=r.TEXT_NODE&&this.hasAttributes(r)&&r.getAttribute("name")==t&&e.removeChild(i[s])},we.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)},we.XmlDOM.prototype.setAttribute=function(e,t,r){return e.ownerDocument||(e=e.firstChild),-1<["function","unknown"].indexOf(typeof e.setAttribute)&&e.setAttribute(t,r),!1},we.XmlDOM.prototype.nodeCopy=function(e){return e.cloneNode(!0)},we.XmlDOM.prototype.getNodesByName=function(e,t,r){for(var i,s=[],n=e.getElementsByTagName(t),a=0,o=n.length;a<o;a+=1)i=n.item(a),(!r||this.hasAttributes(i)&&i.getAttribute("name")==r)&&s.push(i);return s},we.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName},we.XmlDOM.prototype.makeXml=function(e){return e=(e=e||"<docco><bogus/></docco>").replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(e,"application/xml").firstChild},we.XmlDOM.prototype.insertChildNodeAfter=function(e,t,r,i){i=this.importNode(t.ownerDocument,i);return e.replaceChild(i,t),e},we.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),r=0,i=t.length;r<i;r+=1){for(var s=t.item(r),n=[],a=0,o=s.childNodes.length;a<o;a+=1)1!==s.childNodes.item(a).nodeType&&n.push(a);if(s.childNodes.length-n.length==2){for(var l=[],a=0,o=2;a<o;a+=1)if(!(-1<n.indexOf(a))){for(var u=s.childNodes.item(a),m=[],p=0,c=u.childNodes.length;p<c;p+=1)1!==u.childNodes.item(p).nodeType&&m.push(p);if(u.childNodes.length-m.length==0&&(l.push(u.getAttribute("variable")),u.getAttribute("suffix")||u.getAttribute("prefix"))){l=[];break}}-1<l.indexOf("publisher")&&-1<l.indexOf("publisher-place")&&s.setAttribute("has-publisher-and-publisher-place",!0)}}},we.XmlDOM.prototype.isChildOfSubstitute=function(e){return!!e.parentNode&&("substitute"===e.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(e.parentNode))},we.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),r=0,i=t.length;r<i;r+=1){var s=t.item(r),n=s.getElementsByTagName("name");n&&0!==n.length||this.isChildOfSubstitute(s)||(n=s.ownerDocument.createElement("name"),s.appendChild(n))}},we.XmlDOM.prototype.addInstitutionNodes=function(e){for(var t,r,i,s,n,a=e.getElementsByTagName("names"),o=0,l=a.length;o<l;o+=1)if(0!=(s=(t=a.item(o)).getElementsByTagName("name")).length&&0==t.getElementsByTagName("institution").length){i=(r=this.importNode(e.ownerDocument,this.institution)).getElementsByTagName("institution-part").item(0),n=s.item(0),t.insertBefore(r,n.nextSibling);for(var u=0,m=we.INSTITUTION_KEYS.length;u<m;u+=1){var p=we.INSTITUTION_KEYS[u];(d=n.getAttribute(p))&&i.setAttribute(p,d)}for(var c=n.getElementsByTagName("name-part"),u=0,m=c.length;u<m;u+=1)if("family"===c[u].getAttribute("name"))for(var h=0,f=we.INSTITUTION_KEYS.length;h<f;h+=1){var d,p=we.INSTITUTION_KEYS[h];(d=c[u].getAttribute(p))&&i.setAttribute(p,d)}}},we.XmlDOM.prototype.flagDateMacros=function(e){for(var t,r=e.getElementsByTagName("macro"),i=0,s=r.length;i<s;i+=1)(t=r.item(i)).getElementsByTagName("date").length&&t.setAttribute("macro-has-date","true")},we.setupXml=function(e){var t={},r=null;return void 0!==e?r="string"==typeof e?(t="<"===(e=e.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?we.parseXml(e):JSON.parse(e),new we.XmlJSON(t)):new(void 0!==e.getAttribute?we.XmlDOM:void 0!==e.toXMLString?we.XmlE4X:we.XmlJSON)(e):we.error("unable to parse XML input"),r||we.error("citeproc-js error: unable to parse CSL style or locale object"),r},we.getSortCompare=function(r){var i,s,n,a,o;return we.stringCompare||(i=this,n={sensitivity:"base",ignorePunctuation:!0,numeric:!0},r=r||"en-US",a=function(e){return e.replace(/^[\[\]\'\"]*/g,"")},o=!!(s=function(e,t){return we.toLocaleLowerCase.call(i,e).localeCompare(we.toLocaleLowerCase.call(i,t),r,n)})("[x","x")&&function(e,t){return s(a(e),a(t))},function(e,t){return(o||s)(e,t)})},we.ambigConfigDiff=function(e,t){var r,i,s,n;if(e.names.length!==t.names.length)return 1;for(r=0,i=e.names.length;r<i;r+=1){if(e.names[r]!==t.names[r])return 1;for(s=0,n=e.givens[r];s<n;s+=1)if(e.givens[r][s]!==t.givens[r][s])return 1}return e.disambiguate!=t.disambiguate||e.year_suffix!==t.year_suffix?1:0},we.cloneAmbigConfig=function(e,t){for(var r,i,s,n={names:[],givens:[],year_suffix:!1,disambiguate:!1},a=0,o=e.names.length;a<o;a+=1)s=e.names[a],n.names[a]=s;for(a=0,o=e.givens.length;a<o;a+=1){for(s=[],r=0,i=e.givens[a].length;r<i;r+=1)s.push(e.givens[a][r]);n.givens.push(s)}return t?(n.year_suffix=t.year_suffix,n.disambiguate=t.disambiguate):(n.year_suffix=e.year_suffix,n.disambiguate=e.disambiguate),n},we.getAmbigConfig=function(){var e=this.tmp.disambig_request;return e=e||this.tmp.disambig_settings,we.cloneAmbigConfig(e)},we.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},we.getMinVal=function(){return this.tmp["et-al-min"]},we.tokenExec=function(t,e,r){var i,s=t.next;t.test&&(s=function(e){return e?(this.tmp.jump.replace("succeed"),t.succeed):(this.tmp.jump.replace("fail"),t.fail)}.call(this,t.test(e,r)));for(var n=0,a=t.execs.length;n<a;n++)(i=t.execs[n].call(t,this,e,r))&&(s=i);return s},we.expandMacro=function(e,t){var r,s,i=e.postponed_macro,n=e.strings.sort_direction,a=(e=new we.Token("group",we.START),!1),o=!1,l=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",i),o=(l.length&&(o=this.cslXml.getAttributeValue(l[0],"cslid"),a=this.cslXml.getAttributeValue(l[0],"macro-has-date")),a&&(i=i+"@"+this.build.current_default_locale,e.execs.push(r=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!0)})),-1<this.build.macro_stack.indexOf(i)?we.error('CSL processor error: call to macro "'+i+'" would cause an infinite loop'):this.build.macro_stack.push(i),e.cslid=o,we.MODULE_MACROS[i]&&(e.juris=i,this.opt.update_mode=we.POSITION),we.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(l)||we.error('CSL style error: undefined macro "'+i+'"'),we.getMacroTarget.call(this,i));o&&(we.buildMacro.call(this,o,l),we.configureMacro.call(this,o)),this.build.extension||(s=i,r=function(e,t,r){for(var i=0;i<e.macros[s].length;)i=we.tokenExec.call(e,e.macros[s][i],t,r)},(l=new we.Token("text",we.SINGLETON)).execs.push(r),t.push(l)),(o=new we.Token("group",we.END)).strings.sort_direction=n,a&&o.execs.push(r=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!1)}),e.juris&&(o.juris=i),we.Node.group.build.call(o,this,t,!0),this.build.macro_stack.pop()},we.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(this.macros[e]=t=[]),t},we.buildMacro=function(e,t){e=we.makeBuilder(this,e),t=void 0===t.length?t:t[0];e(t)},we.configureMacro=function(e){this.build.extension||this.configureTokenList(e)},we.XmlToToken=function(e,t,r,i){var s,n,a,o=e.cslXml.nodename(this);if(!e.build.skip||e.build.skip===o)if(o){if(we.Node[e.cslXml.nodename(this)]||we.error('Undefined node name "'+o+'".'),s=e.cslXml.attributes(this),a=we.setDecorations.call(this,e,s),n=new we.Token(o,t),t!==we.END||"if"===o||"else-if"===o||"layout"===o){for(var l in s)if(s.hasOwnProperty(l)&&(t!==we.END||"@language"===l||"@locale"===l)&&s.hasOwnProperty(l))if(we.Attributes[l])try{we.Attributes[l].call(n,e,""+s[l])}catch(e){we.error(l+" attribute: "+e)}else we.debug('warning: undefined attribute "'+l+'" in style');n.decorations=a,-1<we.DATE_VARIABLES.indexOf(s["@variable"])&&i.push(n.variables)}else t===we.END&&s["@variable"]&&(n.hasVariable=!0,-1<we.DATE_VARIABLES.indexOf(s["@variable"]))&&(n.variables=i.pop());a=r||e[e.build.area].tokens,we.Node[o].build.call(n,e,a,!0)}else(i=e.cslXml.content(this))&&(e.build.text=i)},we.DateParser=function(){for(var e=[["明治",1867],["大正",1911],["昭和",1925],["平成",1988]],t=0,r=e.length;t<r;t++){var i=e[t][0],s=e[t][1];i,0}for(var n=[],C={},t=0,r=e.length;t<r;t++){var a=e[t],s=a[0];n.push(s),C[a[0]]=a[1]}var o=n.join("|"),N=new RegExp("(?:"+o+")(?:[0-9]+)"),R=new RegExp("(?:"+o+")(?:[0-9]+)","g"),D=/(\u6708|\u5E74)/g,P=/\u65E5/g,L=/\u301c/g,o="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",B=new RegExp(o.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),M=new RegExp(o.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),F=new RegExp(o.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var e=0,t=this.monthStrings.length;e<t;e++)this.monthSets.push([this.monthStrings[e]]);this.monthAbbrevs=[];for(e=0,t=this.monthSets.length;e<t;e++){this.monthAbbrevs.push([]);for(var r=0,i=this.monthSets[e].length;r<i;r++)this.monthAbbrevs[e].push(this.monthSets[e][0].slice(0,3))}this.monthRexes=[];for(e=0,t=this.monthAbbrevs.length;e<t;e++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[e].join("|")+")"))},this.addDateParserMonths=function(e){if(12!==(e="string"==typeof e?e.split(/\s+/):e).length&&16!==e.length)we.debug("month [+season] list of "+e.length+", expected 12 or 16. Ignoring.");else{for(var t=0,r=e.length;t<r;t++){for(var i=null,s=!1,n=3,a={},o=0,l=this.monthAbbrevs.length;o<l;o++){if(a[o]={},o===t){for(var u=0,m=this.monthAbbrevs[t].length;u<m;u++)if(this.monthAbbrevs[t][u]===e[t].slice(0,this.monthAbbrevs[t][u].length)){s=!0;break}}else for(u=0,m=this.monthAbbrevs[o].length;u<m;u++)if(i=this.monthAbbrevs[o][u].length,this.monthAbbrevs[o][u]===e[t].slice(0,i)){for(;this.monthSets[o][u].slice(0,i)===e[t].slice(0,i);){if(i>e[t].length||i>this.monthSets[o][u].length){we.debug("unable to disambiguate month string in date parser: "+e[t]);break}i+=1}n=i,a[o][u]=i}for(var p in a)for(var c in a[p])i=a[p][c],p=parseInt(p,10),c=parseInt(c,10),this.monthAbbrevs[p][c]=this.monthSets[p][c].slice(0,i)}s||(this.monthSets[t].push(e[t]),this.monthAbbrevs[t].push(e[t].slice(0,n)))}this.monthRexes=[],this.monthRexStrs=[];for(t=0,r=this.monthAbbrevs.length;t<r;t++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[t].join("|")+")");if(18===this.monthAbbrevs.length)for(t=12,r=14;t<r;t++)this.monthRexes[t+4]=new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")"),this.monthRexStrs[t+4]="^(?:"+this.monthAbbrevs[t].join("|")+")"}},this.convertDateObjectToArray=function(e){e["date-parts"]=[],e["date-parts"].push([]);for(var t,r=0,i=0,s=3;i<s&&e[t=["year","month","day"][i]];i++)r+=1,e["date-parts"][0].push(e[t]),delete e[t];e["date-parts"].push([]);for(i=0,s=r;i<s&&e[t=["year_end","month_end","day_end"][i]];i++)e["date-parts"][1].push(e[t]),delete e[t];return e["date-parts"][0].length!==e["date-parts"][1].length&&e["date-parts"].pop(),e},this.convertDateObjectToString=function(e){for(var t=[],r=0;r<3&&e[we.DATE_PARTS_ALL[r]];r+=1)t.push(e[we.DATE_PARTS_ALL[r]]);return t.join("-")},this._parseNumericDate=function(e,t,r,i){r=r||"";for(var s=i.split(t),n=0,a=s.length;n<a;n++)if(4===s[n].length){e["year"+r]=s[n].replace(/^0*/,""),s=n?s.slice(0,n):s.slice(1);break}for(var o,n=0,a=s.length;n<a;n++)s[n]=parseInt(s[n],10);1===s.length||2===s.length&&!s[1]?(o=s[0])&&(e["month"+r]=""+s[0]):2===s.length&&(i=12<s[this.monthGuess]?(o=s[this.dayGuess],s[this.monthGuess]):(o=s[this.monthGuess],s[this.dayGuess]),o)&&(e["month"+r]=""+o,i)&&(e["day"+r]=""+i)},this.parseDateToObject=function(e){var t=e,r=-1,i=-1,s=!1;if(e){if("-"===(e=e.replace(/^(.*[0-9])T[0-9].*/,"$1")).slice(0,1)&&(s=!0,e=e.slice(1)),e.match(/^[0-9]{1,3}$/))for(;e.length<4;)e="0"+e;if(b=(e=(e=""+e).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(D)){var n=(e=(e=(e=(e=(e=(e=e.replace(/\s+/g,"")).replace(P,"")).replace(D,"-")).replace(L,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(N),a=[],o=e.match(R);if(o){for(var l=[],u=0,m=o.length;u<m;u++)l=l.concat(o[u].match(/([^0-9]+)([0-9]+)/).slice(1));for(var p,u=0,m=n.length;u<m;u++)a.push(n[u]),u!==m-1&&(a.push(l[p=2*u]),a.push(l[1+p]))}else a=n;for(u=1,m=a.length;u<m;u+=3)a[u+1]=C[a[u]]+parseInt(a[u+1],10),a[u]="";r=(e=(e=(e=(e=a.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),i=e.indexOf("-")}}var c,h,f="",d="",g={};if('"'===(e=e.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===e.slice(-1))g.literal=e.slice(1,-1);else{for(var b,y=[],u=0,m=(a=-1<r&&-1<i?3<e.split("/").length?(h="/",(e=e.replace(/\_/g,c="-")).split(F)):(h="-",(e=e.replace(/\_/g,c="/")).split(M)):(h=c="-",(e=(e=e.replace(/\//g,"-")).replace(/\_/g,"-")).split(B))).length;u<m;u++)(b=a[u].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/))&&y.push(b[1]);for(var r=y.indexOf(c),v=[],i=!1,_=(-1<r?(v.push([0,r]),v.push([r+1,y.length]),i=!0):v.push([0,y.length]),""),u=0,m=v.length;u<m;u++){var x=v[u],w=y.slice(x[0],x[1]);e:for(var E=0,O=w.length;E<O;E++){var A=w[E];if(-1<A.indexOf(h))this._parseNumericDate(g,h,_,A);else if(A.match(/[0-9]{4}/))g["year"+_]=A.replace(/^0*/,"");else{"~"!==A&&"?"!==A&&"c"!==A&&!A.match(/^cir/)||(g.circa=!0);for(var T=0,k=this.monthRexes.length;T<k;T++)if(A.toLocaleLowerCase().match(this.monthRexes[T])){g["month"+_]=""+(parseInt(T,10)+1);continue e}A.match(/^[0-9]+$/)&&(f=A),A.toLocaleLowerCase().match(/^bc/)&&f?(g["year"+_]=""+-1*f,f=""):A.toLocaleLowerCase().match(/^ad/)&&f?(g["year"+_]=""+f,f=""):A.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)&&!g["season"+_]&&(d=A)}}f&&(g["day"+_]=f,f=""),d&&!g["season"+_]&&(g["season"+_]=d.trim(),d=""),_="_end"}if(i)for(E=0,O=we.DATE_PARTS_ALL.length;E<O;E++){var S=we.DATE_PARTS_ALL[E];g[S]&&!g[S+"_end"]?g[S+"_end"]=g[S]:!g[S]&&g[S+"_end"]&&(g[S]=g[S+"_end"])}(!g.year||g.year&&g.day&&!g.month)&&(g={literal:t});for(var j=["year","month","day","year_end","month_end","day_end"],u=0,m=j.length;u<m;u++){var I=j[u];"string"==typeof g[I]&&g[I].match(/^[0-9]+$/)&&(g[I]=parseInt(g[I],10))}s&&-1<Object.keys(g).indexOf("year")&&(g.year=-1*g.year)}return g},this.parseDateToArray=function(e){return this.convertDateObjectToArray(this.parseDateToObject(e))},this.parseDateToString=function(e){return this.convertDateObjectToString(this.parseDateToObject(e))},this.parse=function(e){return this.parseDateToObject(e)},this.setOrderMonthDay(),this.resetDateParserMonths()},we.DateParser=new we.DateParser,we.Engine=function(e,t,r,i){for(var s in this.processor_version=we.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},writable:!0,configurable:!0}),e.variableWrapper&&(we.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(we.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),we.retrieveStyleModule&&(this.sys.retrieveStyleModule=we.retrieveStyleModule),we.getAbbreviation&&(this.sys.getAbbreviation=we.getAbbreviation),this.sys.stringCompare&&(we.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=we.AbbreviationSegments,this.transform=new we.Transform(this),this.setParseNames=function(e){this.opt["parse-names"]=e},this.opt=new we.Engine.Opt,this.tmp=new we.Engine.Tmp,this.build=new we.Engine.Build,this.fun=new we.Engine.Fun(this),this.configure=new we.Engine.Configure,this.citation_sort=new we.Engine.CitationSort,this.bibliography_sort=new we.Engine.BibliographySort,this.citation=new we.Engine.Citation(this),this.bibliography=new we.Engine.Bibliography,this.intext=new we.Engine.InText,this.output=new we.Output.Queue(this),this.dateput=new we.Output.Queue(this),this.cslXml=we.setupXml(t),we.SYS_OPTIONS){var n=we.SYS_OPTIONS[s];"boolean"==typeof this.sys[n]&&(this.opt.development_extensions[n]=this.sys[n])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(e,t){var r=this.cslXml.children(e);this.cslXml.setAttribute(e,"cslid",this.build.cslNodeId),this.opt.nodenames.push(t),this.build.cslNodeId+=1;for(var i=0,s=this.cslXml.numberofnodes(r);i<s;i+=1)(t=this.cslXml.nodename(r[i]))&&this.setCslNodeIds(r[i],t)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),r&&(r=r.replace("_","-"),r=we.normalizeLocaleStr(r)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=we.normalizeLocaleStr(this.opt["default-locale"][0])),r&&i&&(this.opt["default-locale"]=[r]),r&&!i&&this.opt["default-locale"][0]&&(r=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(r=r||"en-US",this.opt["default-locale"].push("en-US")),r=r||this.opt["default-locale"][0],e=we.localeResolve(r),this.opt.lang=e.best,this.opt["default-locale"][0]=e.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),-1<"dale|".localeCompare("daleb",this.opt["default-locale-sort"])?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(e),this.locale[this.opt.lang].opts["skip-words-regexp"]=(t=(t=this.locale[this.opt.lang].opts["skip-words"]).slice(),new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+t.join("|")+")(?=[!?:]*\\s+|-|$))","g")),this.output.adjust=new we.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new we.Registry(this),this.macros={},this.build.area="citation";i=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(i,this[this.build.area].tokens),this.build.area="bibliography",i=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(i,this[this.build.area].tokens),this.build.area="intext",i=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(i,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new we.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new we.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=we.DateParser,this.fun.flipflopper=new we.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=we.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=we.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},we.Engine.prototype.setCloseQuotesArray=function(){var e=[];e.push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e},we.makeBuilder=function(o,l){var u=[],m=[];return function e(t,r,i){i=i||[],void 0===(t=t||[]).length&&(t=[t]);for(var s,n=0;n<t.length;n++){var a=t[n];null!==o.cslXml.nodename(a)&&(r&&"date"===o.cslXml.nodename(a)&&(we.Util.fixDateNode.call(o,r,n,a),a=o.cslXml.children(r)[n]),o.cslXml.numberofnodes(o.cslXml.children(a))?(s=a,m.push(s),we.XmlToToken.call(s,o,we.START,l,u),e(o.cslXml.children(a),a,i),s=void 0,s=m.pop(),we.XmlToToken.call(s,o,we.END,l,u)):(s=a,we.XmlToToken.call(s,o,we.SINGLETON,l,u)))}}},we.Engine.prototype.buildTokenLists=function(e,t){this.cslXml.getNodeValue(e)&&we.makeBuilder(this,t)(void 0===e.length?e:e[0])},we.Engine.prototype.setStyleAttributes=function(){var e,t,r={};for(t in r.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj))e.hasOwnProperty(t)&&we.Attributes[t].call(r,this,e[t])},we.Engine.prototype.getTerm=function(e,t,r,i,s,n){e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(we.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase()),n=n?this.opt["default-locale"][0]:this.opt.lang;n=we.Engine.getField(we.LOOSE,this.locale[n].terms,e,t,r,i);return void 0===(n=n||"range-delimiter"!==e?n:"–")&&(s===we.STRICT?we.error('Error in getTerm: term "'+e+'" does not exist.'):s===we.TOLERANT&&(n="")),n&&(this.tmp.cite_renders_content=!0),n},we.Engine.prototype.getDate=function(e,t){t=t?this.opt["default-locale"]:this.opt.lang;return this.locale[t].dates[e]||!1},we.Engine.prototype.getOpt=function(e){return void 0!==this.locale[this.opt.lang].opts[e]&&this.locale[this.opt.lang].opts[e]},we.Engine.prototype.getVariable=function(e,t,r,i){return we.Engine.getField(we.LOOSE,e,t,r,i)},we.Engine.prototype.getDateNum=function(e,t){return void 0===e?0:e[t]},we.Engine.getField=function(e,t,r,i,s,n){var a,o,l,u,m,p="";if(void 0===t[r]){if(e!==we.STRICT)return;we.error('Error in getField: term "'+r+'" does not exist.')}for(m=n&&t[r][n]?t[r][n]:t[r],a=[],"symbol"===i?a=["symbol","short"]:"verb-short"===i?a=["verb-short","verb"]:"long"!==i&&(a=[i]),u=(a=a.concat(["long"])).length,l=0;l<u;l+=1)if(o=a[l],"string"==typeof m||"number"==typeof m)p=m;else if(void 0!==m[o]){p="string"==typeof m[o]||"number"==typeof m[o]?m[o]:"number"==typeof s?m[o][s]:m[o][0];break}return p},we.Engine.prototype.configureTokenLists=function(){for(var e=we.AREAS.length,t=0;t<e;t+=1){var r=this[we.AREAS[t]].tokens;this.configureTokenList(r)}return this.version=we.version,this.state},we.Engine.prototype.configureTokenList=function(e){for(var t,r,i,s,n=["year","month","day"],a=e.length-1;-1<a;a+=-1){if("date"===(t=e[a]).name&&we.END===t.tokentype&&(r=[]),"date-part"===t.name&&t.strings.name)for(s=n.length,i=0;i<s;i+=1)n[i]===t.strings.name&&r.push(t.strings.name);"date"===t.name&&we.START===t.tokentype&&(r.reverse(),t.dateparts=r),t.next=a+1,t.name&&we.Node[t.name].configure&&we.Node[t.name].configure.call(t,this,a)}},we.Engine.prototype.refetchItems=function(e){for(var t=[],r=0,i=e.length;r<i;r+=1)t.push(this.refetchItem(""+e[r]));return t},we.ITERATION=0,we.Engine.prototype.retrieveItem=function(e){var t,r;if(!this.tmp.loadedItemIDs[e]){if(this.tmp.loadedItemIDs[e]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var i=0,s=this.opt["default-locale"].length;i<s;i+=1)this.opt["default-locale"][i]=this.opt["default-locale"][i].toLowerCase();for(i=0,s=this.opt["locale-translit"].length;i<s;i+=1)this.opt["locale-translit"][i]=this.opt["locale-translit"][i].toLowerCase();for(i=0,s=this.opt["locale-translat"].length;i<s;i+=1)this.opt["locale-translat"][i]=this.opt["locale-translat"][i].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(we.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var n in t.multi._keys)for(var a in t.multi._keys[n])a!==a.toLowerCase()&&(t.multi._keys[n][a.toLowerCase()]=t.multi._keys[n][a],delete t.multi._keys[n][a]);if(t.multi.main)for(var n in t.multi.main)t.multi.main[n]=t.multi.main[n].toLowerCase()}for(i=0,s=we.NAME_VARIABLES.length;s<i;i+=1){var o=we.NAME_VARIABLES[i];if(t[o]&&t[o].multi)for(var l=0,u=t[o].length;l<u;l+=1){var m=t[o][l];if(m.multi){if(m.multi._key)for(var a in m.multi._key)a!==a.toLowerCase()&&(m.multi._key[a.toLowerCase()]=m.multi._key[a],delete m.multi._key[a]);m.multi.main&&(m.multi.main=m.multi.main.toLowerCase())}}}}for(a in t.language&&t.language.match(/[><]/)&&("<"===(y=t.language.match(/(.*?)([<>])(.*)/))[2]?(t["language-name"]=y[1],t["language-name-original"]=y[3]):(t["language-name"]=y[3],t["language-name-original"]=y[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"])),t.page&&(t["page-first"]=t.page,"\\"!==(y=(""+t.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1))&&(t["page-first"]=y[0]),this.opt.development_extensions.field_hack&&t.note&&we.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override),t)-1<we.DATE_VARIABLES.indexOf(a.replace(/^alt-/,""))&&(r=t[a])&&(!this.opt.development_extensions.raw_date_parsing||!r.raw||r["date-parts"]&&0!==r["date-parts"].length||(r=this.fun.dateparser.parseDateToObject(r.raw)),t[a]=this.dateParseArray(r));if(this.opt.development_extensions.consolidate_legal_items&&t.type&&-1<["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)){for(var p=[],i=0,s=(f=["type","title","jurisdiction","genre","volume","container-title"]).length;i<s;i+=1)t[h=f[i]]&&p.push(t[h]);for(i=0,s=(f=["original-date","issued"]).length;i<s;i+=1)if(t[h=f[i]]&&t[h].year){var c=t[h].year;p.push(c);break}t.legislation_id=p.join("::")}if(this.bibliography.opt.track_container_items&&-1<this.bibliography.opt.track_container_items.indexOf(t.type)){for(var h,f,d=[],i=0,s=(f=["type","container-title","publisher","edition"]).length;i<s;i+=1)t[h=f[i]]&&d.push(t[h]);t.container_id=d.join("::")}if(this.opt.development_extensions.force_jurisdiction&&"string"==typeof t.authority&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi)&&t.multi._keys&&t.multi._keys.authority)for(var a in t.authority[0].multi._key={},t.multi._keys.authority)t.authority[0].multi._key[a]={literal:t.multi._keys.authority[a]};t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title&&(y="fr"===this.opt["default-locale"][0].slice(0,2).toLowerCase(),we.extractTitleAndSubtitle.call(this,t,y));var g,b,y=-1<["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type);if(this.opt.development_extensions.force_jurisdiction&&y&&(t.jurisdiction||(t.jurisdiction="us")),!y&&t.title&&this.sys.getAbbreviation&&(t.jurisdiction,g=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey("title",t.title):t.title,b=this.transform.loadAbbreviation(t.jurisdiction,"title",g,t.language),this.transform.abbrevs[b].title)&&this.transform.abbrevs[b].title[g]&&(t["title-short"]=this.transform.abbrevs[b].title[g]),t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation&&(g=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(t["container-title"]):t["container-title"],b=this.transform.loadAbbreviation(t.jurisdiction,"container-title",g,t.language),this.transform.abbrevs[b]["container-title"])&&this.transform.abbrevs[b]["container-title"][g]&&(t["container-title-short"]=this.transform.abbrevs[b]["container-title"][g]),t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var a in this.registry.refhash[e])delete this.registry.refhash[e][a];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t}return this.registry.refhash[e]},we.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]},we.Engine.prototype.setOpt=function(e,t,r){"style"===e.name||"cslstyle"===e.name?(this.opt.inheritedAttributes[t]=r,this.citation.opt.inheritedAttributes[t]=r,this.bibliography.opt.inheritedAttributes[t]=r):-1<["citation","bibliography"].indexOf(e.name)?this[e.name].opt.inheritedAttributes[t]=r:e.strings[t]=r},we.Engine.prototype.inheritOpt=function(e,t,r,i){return void 0!==e.strings[t]?e.strings[t]:void 0!==(e=this[this.tmp.root].opt.inheritedAttributes[r||t])?e:i},we.Engine.prototype.remapSectionVariable=function(e){for(var t=0,r=e.length;t<r;t+=1){var i,s,n,a=e[t][0],o=e[t][1];-1<["bill","gazette","legislation","regulation","treaty"].indexOf(a.type)&&(!o.locator||(o.locator=o.locator.trim(),s=o.locator.match(we.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))||(o.label?o.locator=we.STATUTE_SUBDIV_STRINGS_REVERSE[o.label]+" "+o.locator:o.locator="p. "+o.locator),i=null,a.section&&(a.section=a.section.trim(),i=(s=a.section.match(we.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))?s[0].trim():(a.section="sec. "+a.section,"sec.")),a.section&&(o.locator?(n=" ",(!(s=o.locator.match(/^([^ ]*)\s*(.*)/))||("p."===s[1]&&"p."!==i&&(o.locator=s[2]),-1<["[","(",".",",",";",":","?"].indexOf(o.locator.slice(0,1))))&&(n=""),o.locator=a.section+n+o.locator):o.locator=a.section),o.label="")}},we.Engine.prototype.setNumberLabels=function(e){if(e.number&&-1<["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var e=""+e.number,t=(e=e.split("\\").join("")).split(/\s+/)[0],t=we.STATUTE_SUBDIV_STRINGS[t];if(t){var r=e.split(we.STATUTE_SUBDIV_PLAIN_REGEX);if(1<r.length){for(var i=[],s=1,n=r.length;s<n;s+=1)i.push(r[s].replace(/\s*$/,"").replace(/^\s*/,""));e=i.join(" ")}else e=r[0];this.tmp.shadow_numbers.number.label=t,this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!0}},we.substituteOne=function(r){return function(e,t){return t?r.replace("%%STRING%%",t):""}},we.substituteTwo=function(t){return function(e){var r=t.replace("%%PARAM%%",e);return function(e,t){return t?r.replace("%%STRING%%",t):""}}},we.Mode=function(e){var t,r,i,s,n={},a=we.Output.Formats[e];for(t in a)"@"!==t.slice(0,1)?n[t]=a[t]:(r=!1,i=a[t],s=t.split("/"),"string"==typeof i&&-1<i.indexOf("%%STRING%%")?r=-1<i.indexOf("%%PARAM%%")?we.substituteTwo(i):we.substituteOne(i):"boolean"!=typeof i||i?"function"==typeof i?r=i:we.error("Bad "+e+" config entry for "+t+": "+i):r=we.Output.Formatters.passthrough,1===s.length?n[s[0]]=r:2===s.length&&(n[s[0]]||(n[s[0]]={}),n[s[0]][s[1]]=r));return n},we.setDecorations=function(e,t){var r,i,s=[];for(r in we.FORMAT_KEY_SEQUENCE)t[i=we.FORMAT_KEY_SEQUENCE[r]]&&(s.push([i,t[i]]),delete t[i]);return s},we.Doppeler=function(e,s){var n=new RegExp("("+e+")","g"),a=new RegExp(e,"g");this.split=function(e){var t=(e=s?s(e):e).match(n);if(!t)return{tags:[],strings:[e]};for(var r=e.split(a),i=t.length-1;-1<i;i--)"number"==typeof t[i]&&(t[i]=""),"'"===t[i]&&0<r[i+1].length&&(r[i+1]=t[i]+r[i+1],t[i]="");return{tags:t,strings:r,origStrings:r.slice()}},this.join=function(e){for(var t=e.strings.slice(-1),r=e.tags.length-1;-1<r;r--)t.push(e.tags[r]),t.push(e.strings[r]);return t.reverse(),t.join("")}},we.Engine.prototype.normalDecorIsOrphan=function(e,t){if("normal"===t[1]){for(var r=!1,i="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(e.alldecor):e.alldecor,s=i.length-1;-1<s;s+=-1)for(var n=i[s].length-1;-1<n;n+=-1)i[s][n][0]===t[0]&&"normal"!==i[s][n][1]&&(r=!0);if(!r)return!0}return!1},we.Engine.prototype.getCitationLabel=function(e){for(var t="",r=this.getTrigraphParams(),i=r[0],s=(s=(s=void 0===(s=this.getTerm("reference","short",0))?"reference":s).replace(".","")).slice(0,1).toUpperCase()+s.slice(1),n=0,a=we.NAME_VARIABLES.length;n<a;n+=1){var o=we.NAME_VARIABLES[n];if(e[o]){for(var l=e[o],i=l.length>r.length?r[r.length-1]:r[l.length-1],u=0,m=l.length;u<m&&u!==i.authors.length;u+=1){var p=this.nameOutput.getName(l[u],"locale-translit",!0).name,p=(p&&p.family?s=(s=p.family).replace(/^([ \'\u2019a-z]+\s+)/,""):p&&p.literal&&(s=p.literal),s.toLowerCase().match(/^(a\s+|the\s+|an\s+)/));if(!(s=(s=p?s.slice(p[1].length):s).replace(we.ROMANESQUE_NOT_REGEXP,"")))break;1<(s=s.slice(0,i.authors[u])).length?s=s.slice(0,1).toUpperCase()+s.slice(1).toLowerCase():1===s.length&&(s=s.toUpperCase()),t+=s}break}}if(!t&&e.title){for(var c=this.locale[this.opt.lang].opts["skip-words"],h=e.title.split(/\s+/),n=h.length-1;-1<n;n--)-1<c.indexOf(h[n])&&(h=h.slice(0,n).concat(h.slice(n+1)));var f=h.join("");1<(f=f.slice(0,r[0].authors[0])).length?f=f.slice(0,1).toUpperCase()+f.slice(1).toLowerCase():1===f.length&&(f=f.toUpperCase()),t=f}f="0000";return t+=f=(f=e.issued&&e.issued.year?""+e.issued.year:f).slice(-1*i.year)},we.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");this.opt.trigraph&&"A"===this.opt.trigraph.slice(0,1)||we.error("Bad trigraph definition: "+this.opt.trigraph);for(var r=0,i=t.length;r<i;r+=1){for(var s=t[r],n={authors:[],year:0},a=0,o=s.length;a<o;a+=1)switch(s.slice(a,a+1)){case"A":n.authors.push(1);break;case"a":n.authors[n.authors.length-1]+=1;break;case"0":n.year+=1;break;default:we.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(n)}return e},we.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=we.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})},we.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}},we.Engine.prototype.setLangTagsForCslSort=function(e){var t,r;if(e)for(this.opt["locale-sort"]=[],t=0,r=e.length;t<r;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())},we.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,r;if(this.opt["locale-translit"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())},we.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,r;if(this.opt["locale-translat"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())},we.Engine.prototype.setLangPrefsForCites=function(e,t){for(var r=this.opt["cite-lang-prefs"],i=(t=t||function(e){return e.toLowerCase()},["Persons","Institutions","Titles","Journals","Publishers","Places"]),s=0,n=i.length;s<n;s+=1){var a=t(i[s]),o=i[s].toLowerCase();if(e[a]){for(var l=[];1<e[a].length;)l.push(e[a].pop());var u={orig:1,translit:2,translat:3};for(2===l.length&&u[l[0]]<u[l[1]]&&l.reverse();l.length;)e[a].push(l.pop());for(var m=r[o];m.length;)m.pop();for(var p=0,c=e[a].length;p<c;p+=1)m.push(e[a][p])}}},we.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&48===e.length){for(var t,r=this.opt.citeAffixes,i=0,s=["persons","institutions","titles","journals","publishers","places"],n=["translit","orig","translit","translat"],a=0,o=s.length;a<o;a+=1)for(var l=0,u=n.length;l<u;l+=1)t="",i%8==4&&(r[s[a]]["locale-"+n[l]].prefix||r[s[a]]["locale-"+n[l]].suffix)||(t=e[i]||"",r[s[a]]["locale-"+n[l]].prefix=t,t=e[i]?e[i+1]:"",r[s[a]]["locale-"+n[l]].suffix=t),i+=2;this.opt.citeAffixes=r}},we.Engine.prototype.setAutoVietnameseNamesOption=function(e){this.opt["auto-vietnamese-names"]=!!e},we.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)},we.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e},we.Output={},we.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new we.Token("empty");e={};e.empty=this.empty,this.formats=new we.Stack(e),this.current=new we.Stack(this.queue)},we.Output.Queue.prototype.pop=function(){var e=this.current.value();return(e.length?e:e.blobs).pop()},we.Output.Queue.prototype.getToken=function(e){return this.formats.value()[e]},we.Output.Queue.prototype.mergeTokenStrings=function(e,t){var r=this.formats.value()[e],i=this.formats.value()[t];if(s=r,i){r||((r=new we.Token(e,we.SINGLETON)).decorations=[]);var s=new we.Token(e,we.SINGLETON),n="";for(n in r.strings)r.strings.hasOwnProperty(n)&&(s.strings[n]=r.strings[n]);for(n in i.strings)i.strings.hasOwnProperty(n)&&(s.strings[n]=i.strings[n]);s.decorations=r.decorations.concat(i.decorations)}return s},we.Output.Queue.prototype.addToken=function(e,t,r){var i,s=new we.Token("output");if((r="string"==typeof r?this.formats.value()[r]:r)&&r.strings){for(i in r.strings)r.strings.hasOwnProperty(i)&&(s.strings[i]=r.strings[i]);s.decorations=r.decorations}"string"==typeof t&&(s.strings.delimiter=t),this.formats.value()[e]=s},we.Output.Queue.prototype.pushFormats=function(e){(e=e||{}).empty=this.empty,this.formats.push(e)},we.Output.Queue.prototype.popFormats=function(){this.formats.pop()},we.Output.Queue.prototype.startTag=function(e,t){var r={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),r[e]=t,this.pushFormats(r),this.openLevel(e)},we.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()},we.Output.Queue.prototype.openLevel=function(e){var e="object"==typeof e?new we.Blob(void 0,e):void 0===e?new we.Blob(void 0,this.formats.value().empty,"empty"):(this.formats.value()&&this.formats.value()[e]||we.error('CSL processor error: call to nonexistent format token "'+e+'"'),new we.Blob(void 0,this.formats.value()[e],e)),t=this.current.value();!this.state.tmp.just_looking&&this.checkNestedBrace&&(e.strings.prefix=this.checkNestedBrace.update(e.strings.prefix)),t.push(e),this.current.push(e)},we.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&we.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);e=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(e.strings.suffix=this.checkNestedBrace.update(e.strings.suffix))},we.Output.Queue.prototype.append=function(e,t,r,i,s){var n,a,o=!0;if(r&&(i=!0),this.state.tmp["doing-macro-with-date"]&&!r){if("macro-with-date"!==t)return!1;"macro-with-date"===t&&(t="empty")}if(void 0===e)return!1;if("number"==typeof e&&(e=""+e),!r&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(a=!1,t?"literal"===t?o=!(n=!0):n="string"==typeof t?this.formats.value()[t]:t:n=this.formats.value().empty,n||we.error("CSL processor error: unknown format token name: "+t),n.strings&&void 0===n.strings.delimiter&&(n.strings.delimiter=""),"string"==typeof e&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g," $1").replace(/\u00ab /g,"« "),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),r||(e=e.replace(/^'/g," '")),i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),a=new we.Blob(e,n),void 0===(t=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),t=this.current.value()),"string"==typeof a.blobs&&(i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),"string"==typeof e){if("string"==typeof a.blobs&&" "!==a.blobs.slice(0,1)){for(var l="",u=a.blobs;-1<we.TERMINAL_PUNCTUATION.indexOf(u.slice(0,1));)l+=u.slice(0,1),u=u.slice(1);u&&l&&(a.strings.prefix=a.strings.prefix+l,a.blobs=u)}a.strings["text-case"]&&(a.blobs=we.Output.Formatters[a.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!s&&(a.blobs=a.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var m=a.decorations.length-1;-1<m;m+=-1)"@quotes"===a.decorations[m][0]&&"false"!==a.decorations[m][1]&&(a.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),a.blobs.match(we.ROMANESQUE_REGEXP)||"@font-style"===a.decorations[m][0]&&(a.decorations=a.decorations.slice(0,m).concat(a.decorations.slice(m+1)));t.push(a),this.state.fun.flipflopper.processTags(a)}else o?t.push(a):t.push(e);return!0},we.Output.Queue.prototype.string=function(e,t,r){var i=we.getSafeEscape(this.state),s=t.slice(),n=[];if(0!==s.length){var a,o,l="";r?l=r.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),r&&r.new_locale&&(r.old_locale=e.opt.lang,e.opt.lang=r.new_locale);for(var u=0,m=s.length;u<m;u+=1){if((a=s[u]).strings.first_blob&&(e.tmp.count_offset_characters=a.strings.first_blob),"string"==typeof a.blobs){if("number"==typeof a.num)n.push(a);else if(a.blobs){a.particle&&(a.blobs=a.particle+a.blobs,a.particle="");var p,c=(p=i(a.blobs)).length;if(!e.tmp.suppress_decorations)for(d=0,g=a.decorations.length;d<g;d+=1)"@showid"===(o=a.decorations[d])[0]||e.normalDecorIsOrphan(a,o)||(p=e.fun.decorate[o[0]][o[1]].call(a,e,p,o[2]));if(p&&p.length){if(p=i(a.strings.prefix)+p+i(a.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(d=0,g=a.decorations.length;d<g;d+=1)"@showid"===(o=a.decorations[d])[0]&&(p=e.fun.decorate[o[0]][o[1]].call(a,e,p,o[2]));n.push(p),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=c+a.strings.suffix.length+a.strings.prefix.length)}}}else if(a.blobs.length){var h=e.output.string(e,a.blobs,a);if(r&&"string"!==h&&1<h.length&&a.strings.delimiter)for(var f=!1,d=0,g=h.length;d<g;d++)"string"!=typeof h[d]?f=!0:f&&(h[d]=a.strings.delimiter+h[d]);n=n.concat(h)}a.strings.first_blob&&e.registry.registry[a.strings.first_blob]&&(e.registry.registry[a.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(u=0,m=n.length-1;u<m;u+=1)"number"!=typeof n[u].num||"number"!=typeof n[u+1].num||n[u+1].UGLY_DELIMITER_SUPPRESS_HACK||(n[u].strings.suffix=n[u].strings.suffix+(l||""),n[u+1].successor_prefix="",n[u+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);for(var b=0,u=0,m=n.length;u<m;u+=1)"string"==typeof n[u]&&(b=parseInt(u,10)+1,u<n.length-1)&&"object"==typeof n[u+1]&&(l&&!n[u+1].UGLY_DELIMITER_SUPPRESS_HACK&&(n[u]+=i(l)),n[u+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);if(r&&(r.decorations.length||r.strings.suffix))b=n.length;else if(r&&r.strings.prefix)for(u=0,m=n.length;u<m;u++)if(void 0!==n[u].num){0===(b=u)&&(n[u].strings.prefix=r.strings.prefix+n[u].strings.prefix);break}var y=e.output.renderBlobs(n.slice(0,b),l,!1,r);if(y&&r&&(r.decorations.length||r.strings.suffix||r.strings.prefix)){if(!e.tmp.suppress_decorations)for(u=0,m=r.decorations.length;u<m;u+=1)o=r.decorations[u],-1<["@cite","@bibliography","@display","@showid"].indexOf(o[0])||e.normalDecorIsOrphan(a,o)||o[0]&&"string"==typeof y&&(y=e.fun.decorate[o[0]][o[1]].call(r,e,y,o[2]));if(p=y,t=r.strings.suffix,p&&p.length&&(p=i(v=r.strings.prefix)+p+i(t),e.tmp.count_offset_characters)&&(e.tmp.offset_characters+=v.length+t.length),y=p,!e.tmp.suppress_decorations)for(u=0,m=r.decorations.length;u<m;u+=1)o=r.decorations[u],-1!==["@cite","@bibliography","@display","@showid"].indexOf(o[0])&&"string"==typeof y&&(y=e.fun.decorate[o[0]][o[1]].call(r,e,y,o[2]))}var v=n.slice(b,n.length);!v.length&&y?n=[y]:v.length&&!y?n=v:y&&v.length&&(n=[y].concat(v)),void 0===r?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(n=e.output.renderBlobs(n,void 0,!1))):"boolean"==typeof r&&(n=e.output.renderBlobs(n,void 0,!0)),r&&r.new_locale&&(e.opt.lang=r.old_locale)}return n},we.Output.Queue.prototype.clearlevel=function(){for(var e=this.current.value(),t=e.blobs.length,r=0;r<t;r+=1)e.blobs.pop()},we.Output.Queue.prototype.renderBlobs=function(e,t,r,i){var s,n,a,o,l,u,m,p,c=we.getSafeEscape(this.state);if(t=t||"",s=this.state,a=n="",l=e.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===l&&"object"==typeof e[0]&&i)return e[0].strings.prefix=i.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+i.strings.suffix,e[0].decorations=e[0].decorations.concat(i.decorations),e[0].params=i.params,e[0];for(var h=!0,f=0;f<l;f+=1)h=e[f].checkNext?(e[f].checkNext(e[f+1],h),!1):!e[f+1]||!e[f+1].splice_prefix;var d=!0;for(f=e.length-1;0<f;f+=-1)e[f].checkLast?d&&e[f].checkLast(e[f-1])&&(d=!1):d=!0;for(l=e.length,f=0;f<l;f+=1)if(n&&(a=t),"string"==typeof(o=e[f]))n=n+c(a)+o,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=a.length);else if(r)n=n?[n,o]:[o];else if(o.status!==we.SUPPRESS){var g,b=(g=o.particle?o.particle+o.num:o.formatter.format(o.num,o.gender)).replace(/<[^>]*>/g,"").length,y=(this.append(g,"empty",!0),this.pop()),v=s.tmp.count_offset_characters;if(g=this.string(s,[y],!1),s.tmp.count_offset_characters=v,(g=o.strings["text-case"]?we.Output.Formatters[o.strings["text-case"]](this.state,g):g)&&this.state.tmp.strip_periods&&(g=g.replace(/\.([^a-z]|$)/g,"$1")),!s.tmp.suppress_decorations)for(m=o.decorations.length,u=0;u<m;u+=1)p=o.decorations[u],s.normalDecorIsOrphan(o,p)||(g=s.fun.decorate[p[0]][p[1]].call(o,s,g,p[2]));g=c(o.strings.prefix)+g+c(o.strings.suffix);y="";o.status===we.END?y=c(o.range_prefix):o.status===we.SUCCESSOR?y=c(o.successor_prefix):o.status===we.START?y=0<f&&!o.suppress_splice_prefix?c(o.splice_prefix):"":o.status===we.SEEN&&(y=c(o.splice_prefix)),n=n+y+g,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=y.length+o.strings.prefix.length+b+o.strings.suffix.length)}return n},we.Output.Queue.purgeEmptyBlobs=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;-1<t;t--){we.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var r=e.blobs[t];if(!r||!r.blobs||!r.blobs.length){for(var i=[];e.blobs.length-1>t;)i.push(e.blobs.pop());for(e.blobs.pop();i.length;)e.blobs.push(i.pop())}}},we.Output.Queue.adjust=function(h){var e={";":!0,":":!0},t={".":!0,"!":!0,"?":!0},f={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},d={},g={},p={},c={};for(r in f)p[r]=!0,c[r]=!0,e[r]||(d[r]=!0),t[r]||(g[r]=!0);c[" "]=!0,c[" "]=!0;var r,b={};for(r in f)for(var i in f[r])b[i]||(b[i]={}),b[i][r]=f[r][i];function y(e){return"number"==typeof e.num||e.blobs&&1===e.blobs.length&&"number"==typeof e.blobs[0].num}function v(e,t){var r=!1,i=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(t&&i.push("@quotes"),e.decorations)for(var s=0,n=e.decorations.length;s<n;s++)if(-1<i.indexOf(e.decorations[s][0])){r=!0;break}return r}function _(e,t,r,i,s){var n="blobs"===t?e:e.strings,a="blobs"===i?r:r.strings,o=n[t].slice(-1),l=a[i].slice(0,1);function u(){a[i]=a[i].slice(1)}function m(){n[t]=n[t].slice(0,-1)}function p(e){a[i]=e+a[i]}function c(e){n[t]+=e}e=s?function(){return f[o]}:function(){return b[l]};r=s?function(){var e=f[o][l];"string"==typeof e?(m(),u(),p(e)):(p(o),m())}:function(){var e=b[l][o];"string"==typeof e?(m(),u(),c(e)):(c(l),u())};o===l?(s?m:u)():e()&&r()}this.upward=function(e){if(e.blobs&&"string"==typeof e.blobs)p[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));else if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=v(e,!0),r=e.blobs.length-1;-1<r;r--){this.upward(e.blobs[r]);var i,s=e.strings,n=e.blobs[r].strings;0===r&&(" "===s.prefix.slice(-1)&&" "===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1)),i=n.prefix.slice(0,1),t||!c[i]||s.prefix||(s.prefix+=i,n.prefix=n.prefix.slice(1))),r===e.blobs.length-1&&(i=n.suffix.slice(-1),!t)&&-1<[" "].indexOf(i)&&(s.suffix.slice(0,1)!==i&&(s.suffix=i+s.suffix),n.suffix=n.suffix.slice(0,-1)),s.delimiter&&0<r&&c[s.delimiter.slice(-1)]&&s.delimiter.slice(-1)===n.prefix.slice(0,1)&&(n.prefix=n.prefix.slice(1))}},this.leftward=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t,r,i,s,n=e.blobs.length-1;-1<n;n--)this.leftward(e.blobs[n]),n<e.blobs.length-1&&!e.strings.delimiter&&(i=(t=e.blobs[n]).strings.suffix.slice(-1),s=(r=e.blobs[n+1]).strings.prefix.slice(0,1),i="number"==typeof i||"number"==typeof s,v(t)||v(r)||i||!p[s]||i||(i=s===t.strings.suffix.slice(-1),s=!t.strings.suffix&&"string"==typeof t.blobs&&t.blobs.slice(-1)===s,i||s?r.strings.prefix=r.strings.prefix.slice(1):_(t,"suffix",r,"prefix")))},this.downward=function(e){if(e.blobs&&"string"==typeof e.blobs)p[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));else if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length){for(var t=e.strings,r=0,i=e.blobs.length;r<i;r++)if(y(e.blobs[r])){0;break}if(t.delimiter&&p[t.delimiter.slice(0,1)]){for(var s=t.delimiter.slice(0,1),r=e.blobs.length-2;-1<r;r--)(l=e.blobs[r].strings).suffix.slice(-1)!==s&&(l.suffix+=s);t.delimiter=t.delimiter.slice(1)}for(r=e.blobs.length-1;-1<r;r--){var n,a,o=e.blobs[r],l=e.blobs[r].strings,u=v(o,!0),m=y(o);r===e.blobs.length-1?(n=t.suffix.slice(0,1),a=!1,(a=p[n]&&!(a=function e(t,r){var i=r.strings.suffix.slice(-1),i=(i||"string"!=typeof r.blobs||(i=r.blobs.slice(-1)),b[t][i]);return!(!i||1!==i.length)||"object"==typeof r.blobs&&!!e(t,r.blobs[r.blobs.length-1])}(n,o))&&h?function e(t){if(t.decorations)for(var r=0,i=t.decorations.length;r<i;r++)if("@quotes"===t.decorations[r][0]&&"false"!==t.decorations[r][1])return!0;return"object"==typeof t.blobs&&e(t.blobs[t.blobs.length-1])}(o):a)&&p[n]&&!function e(t){return"number"==typeof t.num||!(!t.blobs||"object"!=typeof t.blobs||!e(t.blobs[t.blobs.length-1]))}(o)&&("string"==typeof o.blobs?_(o,"blobs",e,"suffix"):_(o,"suffix",e,"suffix"),"."===t.suffix.slice(0,1))&&(l.suffix+=t.suffix.slice(0,1),t.suffix=t.suffix.slice(1))," "===l.suffix.slice(-1)&&" "===t.suffix.slice(0,1)&&(t.suffix=t.suffix.slice(1)),c[l.suffix.slice(0,1)]&&("string"==typeof o.blobs&&o.blobs.slice(-1)===l.suffix.slice(0,1)&&(l.suffix=l.suffix.slice(1)),l.suffix.slice(-1)===t.suffix.slice(0,1))&&(t.suffix=t.suffix.slice(0,-1)),function e(t,r){return!!p[r]&&("string"==typeof t.blobs?t.blobs.slice(-1)===r:!!(t=t.blobs[t.blobs.length-1])&&(t.strings.suffix.slice(-1)?t.strings.suffix.slice(-1)==r:e(t,r)))}(e,e.strings.suffix.slice(0,1))&&(e.strings.suffix=e.strings.suffix.slice(1))):t.delimiter?c[t.delimiter.slice(0,1)]&&t.delimiter.slice(0,1)===l.suffix.slice(-1)&&(e.blobs[r].strings.suffix=e.blobs[r].strings.suffix.slice(0,-1)):(a=e.blobs[r+1].strings,y(o)||u||!c[l.suffix.slice(-1)]||l.suffix.slice(-1)!==a.prefix.slice(0,1)||(a.prefix=a.prefix.slice(1))),m||u||!p[l.suffix.slice(0,1)]||"string"!=typeof o.blobs||_(o,"blobs",o,"suffix"),this.downward(e.blobs[r])}}},this.fix=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length){for(var t,r=0,i=e.blobs.length;r<i;r++){for(var s=e.blobs[r],n=!1,a=0,o=s.decorations.length;a<o;a++){var l=s.decorations[a];"@quotes"===l[0]&&"false"!==l[1]&&(n=!0)}if(n)if(h){m=u=void 0;var u=s,m=u.strings.suffix.slice(0,1);if("string"==typeof u.blobs)for(;d[m];)_(u,"blobs",u,"suffix"),m=u.strings.suffix.slice(0,1);else for(;d[m];)_(u.blobs[u.blobs.length-1],"suffix",u,"suffix"),m=u.strings.suffix.slice(0,1)}else{c=p=void 0;var p=s;if("string"==typeof p.blobs)for(var c=p.blobs.slice(-1);g[c];)_(p,"blobs",p,"suffix",!0),c=p.blobs.slice(-1);else for(c=p.blobs[p.blobs.length-1].strings.suffix.slice(-1);g[c];)_(p.blobs[p.blobs.length-1],"suffix",p,"suffix",!0),c=p.blobs[p.blobs.length-1].strings.suffix.slice(-1)}t=this.fix(e.blobs[r]),s.blobs&&"string"==typeof s.blobs&&(t=s.blobs.slice(-1))}return t}}},we.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=we.NONE,this.bib_mode=we.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1,this.development_extensions.etal_min_etal_usefirst_hack=!1},we.Engine.Tmp=function(){this.names_max=new we.Stack,this.names_base=new we.Stack,this.givens_base=new we.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new we.Stack(0,we.LITERAL),this.element_rendered_ok=!1,this.element_trace=new we.Stack("style"),this.nameset_counter=0,this.group_context=new we.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new we.Stack(0,we.LITERAL),this.decorations=new we.Stack,this.tokenstore_stack=new we.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new we.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new we.AmbigConfig,this.bib_sort_keys=[],this.prefix=new we.Stack("",we.LITERAL),this.suffix=new we.Stack("",we.LITERAL),this.delimiter=new we.Stack("",we.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]},we.Engine.Fun=function(e){this.match=new we.Util.Match,this.suffixator=new we.Util.Suffixator(we.SUFFIX_CHARS),this.romanizer=new we.Util.Romanizer,this.ordinalizer=new we.Util.Ordinalizer(e),this.long_ordinalizer=new we.Util.LongOrdinalizer},we.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new we.Stack(0,we.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0},we.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]},we.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new we.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},we.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},we.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=we.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"},we.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},we.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"},we.Engine.prototype.previewCitationCluster=function(e,t,r,i){var s=this.opt.mode,i=(this.setOutputFormat(i),e.citationID&&delete e.citationID,this.processCitationCluster(e,t,r,we.PREVIEW));return this.setOutputFormat(s),i[1]},we.Engine.prototype.appendCitationCluster=function(e){for(var t=[],r=this.registry.citationreg.citationByIndex.length,i=0;i<r;i+=1){var s=this.registry.citationreg.citationByIndex[i];t.push([""+s.citationID,s.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]},we.Engine.prototype.processCitationCluster=function(e,L,B,M){var F,t,r,i,U,z,q,G,X,s;if(this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e),M===we.PREVIEW){this.debug&&we.debug("****** start state save *********");for(var $=this.registry.citationreg.citationByIndex.slice(),n=this.registry.reflist.slice(),V=L.concat(B),H={},W=[],a=0,o=V.length;a<o;a+=1)for(v=(F=this.registry.citationreg.citationById[V[a][y=0]]).citationItems.length;y<v;y+=1)H[F.citationItems[y].id]=!0,W.push(""+F.citationItems[y].id);for(y=0,v=e.citationItems.length;y<v;y+=1)H[e.citationItems[y].id]=!0,W.push(""+e.citationItems[y].id);for(var J={},a=0,o=n.length;a<o;a+=1)if(!H[n[a].id]){var K=this.registry.registry[n[a].id].ambig,Y=this.registry.ambigcites[K];if(Y)for(y=0,v=Y.length;y<v;y+=1)J[Y[y]]=we.cloneAmbigConfig(this.registry.registry[Y[y]].disambig)}this.debug&&we.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};for(var Q,Z,l,u=[],ee={},a=0,o=e.citationItems.length;a<o;a+=1){for(var m in x={},e.citationItems[a])x[m]=e.citationItems[a][m];(l=this.retrieveItem(""+x.id)).id&&this.transform.loadAbbreviation("default","hereinafter",l.id,l.language),x=we.parseLocator.call(this,x),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[l,x]]),!this.opt.development_extensions.locator_label_parse||!x.locator||-1!==["bill","gazette","legislation","regulation","treaty"].indexOf(l.type)||x.label&&"page"!==x.label||(Q=we.LOCATOR_LABELS_REGEXP.exec(x.locator))&&(Z=we.LOCATOR_LABELS_MAP[Q[2]],this.getTerm(Z))&&(x.label=Z,x.locator=Q[3]),u.push([l,x]),e.citationItems[a].item=l}e.sortedItems=u;var p,c=[],h={};for(a=0,o=L.length;a<o;a+=1)t=L[a],this.opt.development_extensions.strict_inputs&&(h[t[0]]&&we.error("Previously referenced citationID "+t[0]+" encountered in citationsPre"),t[1])&&(p>t[1]&&we.debug("Note index sequence is not sane at citationsPre["+a+"]"),p=t[1]),this.registry.citationreg.citationById[t[0]].properties.noteIndex=t[1],c.push(this.registry.citationreg.citationById[t[0]]),h[t[0]]=this.registry.citationreg.citationById[t[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(h[e.citationID]&&we.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex)&&(p>e.properties.noteIndex&&we.debug("Note index sequence is not sane for citation "+e.citationID),p=e.properties.noteIndex),c.push(e),h[e.citationID]=e,a=0,o=B.length;a<o;a+=1)r=B[a],this.opt.development_extensions.strict_inputs&&(h[r[0]]&&we.error("Previously referenced citationID "+r[0]+" encountered in citationsPost"),r[1])&&(p>r[1]&&we.debug("Note index sequence is not sane at postCitation["+a+"]"),p=r[1]),this.registry.citationreg.citationById[r[0]].properties.noteIndex=r[1],c.push(this.registry.citationreg.citationById[r[0]]),h[r[0]]=this.registry.citationreg.citationById[r[0]];this.registry.citationreg.citationByIndex=c,this.registry.citationreg.citationById=h,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===we.POSITION&&(X=[],G=[],s={});for(var te=[],a=0,o=c.length;a<o;a+=1){for(c[a].properties.index=a,y=0,v=c[a].sortedItems.length;y<v;y+=1)x=c[a].sortedItems[y],this.registry.citationreg.citationsByItemId[x[1].id]||(this.registry.citationreg.citationsByItemId[x[1].id]=[],te.push(""+x[1].id)),-1===this.registry.citationreg.citationsByItemId[x[1].id].indexOf(c[a])&&this.registry.citationreg.citationsByItemId[x[1].id].push(c[a]);this.opt.update_mode===we.POSITION&&(c[a].properties.noteIndex?G:(c[a].properties.noteIndex=0,X)).push(c[a])}if(M!==we.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&we.debug("****** start update items *********"),this.updateItems(te,null,null,!0),this.debug)&&we.debug("****** endo update items *********"),!this.opt.citation_number_sort&&u&&1<u.length&&0<this.citation_sort.tokens.length){for(a=0,o=u.length;a<o;a+=1)u[a][1].sortkeys=we.getSortKeys.call(this,u[a][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(a=0,o=u.length;a<o;a+=1){var re=u[a][1].sortkeys,ie=(this.tmp.authorstring_request=!0,this.registry.registry[u[a][0].id].disambig),ie=(this.tmp.authorstring_request=!0,we.getAmbiguousCite.call(this,u[a][0],ie),this.registry.authorstrings[u[a][0].id]);this.tmp.authorstring_request=!1,u[a][1].sortkeys=[ie].concat(re)}u.sort(this.citation.srt.compareCompositeKeys);for(var se=!1,ne=!1,ae=!1,a=0,o=u.length;a<o;a+=1)u[a][1].sortkeys[0]!==se&&(ae=u[a][1].sortkeys[0],ne=u[a][1].sortkeys[1]),u[a][1].sortkeys[0]=""+ne+a,se=ae}e.properties.unsorted||u.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems),this.opt.update_mode===we.POSITION)for(a=0;a<2;a+=1)for(var f,d={},g={},b={},y=0,v=(f=[X,G][a]).length;y<v;y+=1){var _=f[y];for(f[y].properties.noteIndex||(f[y].properties.noteIndex=0),f[y].properties.noteIndex=parseInt(f[y].properties.noteIndex,10),0<y&&_.properties.noteIndex&&f[y-1].properties.noteIndex>_.properties.noteIndex&&(s={},d={},g={},b={}),i=0,U=_.sortedItems.length;i<U;i+=1)_.sortedItems[i][1].parallel&&"first"!==_.sortedItems[i][1].parallel||(s[_.properties.noteIndex]?s[_.properties.noteIndex]+=1:s[_.properties.noteIndex]=1);for(i=0,U=f[y].sortedItems.length;i<U;i+=1){var x,w=(x=f[y].sortedItems[i])[0].id,E=x[0].legislation_id||x[0].id,O=x[0].legislation_id||x[0].container_id||x[0].id,oe=x[1]["locator-extra"],le=x[1].locator,ue=x[1].label;if(0<i)if(_.sortedItems[i-1][0].legislation_id)me=_.sortedItems[i-1][0].legislation_id;else for(var me=_.sortedItems[i-1][1].id,pe=_.sortedItems[i-1][1]["locator-extra"],A=i-2;-1<A;A--)"first"===_.sortedItems[A][1].parallel&&(me=_.sortedItems[A][1].id,pe=_.sortedItems[A][1]["locator-extra"]);if(M===we.PREVIEW&&_.citationID!=e.citationID)void 0===d[x[1].id]&&(d[E]=_.properties.noteIndex),g[O]=_.properties.noteIndex;else{var ce,he,T,k,S,fe,j,de,I,C,ge={};if(ge.position=x[1].position,ge["first-reference-note-number"]=x[1]["first-reference-note-number"],ge["first-container-reference-note-number"]=x[1]["first-container-reference-note-number"],ge["near-note"]=x[1]["near-note"],x[1]["first-reference-note-number"]=0,x[1]["first-container-reference-note-number"]=0,x[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[w]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var N=this.registry.registry[x[0].id]["citation-count"],R=this.registry.citationreg.citationsByItemId[w].length;if(this.registry.registry[x[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[w].length,"number"==typeof N){if(N<2!=R<2)for(var A=0,be=this.registry.citationreg.citationsByItemId[w].length;A<be;A++)ee[this.registry.registry[x[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[w][A].citationID]=!0}else for(A=0,be=this.registry.citationreg.citationsByItemId[w].length;A<be;A++)ee[this.registry.registry[x[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[w][A].citationID]=!0}if(void 0===g[O]&&"author-only"!==_.properties.mode?(d[E]=_.properties.noteIndex,g[O]=_.properties.noteIndex,b[O]=_.properties.noteIndex,x[1].position=we.POSITION_FIRST):(R=N=!1,T=null,0<y&&(T=f[y-1]),C=f[y],0<y&&(S=1,f[k=y-(S="author-only"===T.properties.mode&&1<y?2:S)].sortedItems.length&&(ce=f[k].sortedItems.slice(-1)[0][1].id,he=f[y-S].sortedItems.slice(-1)[0][1]["locator-extra"]),T.sortedItems.length)&&T.sortedItems[0].slice(-1)[0].legislation_id&&(ce=T.sortedItems[0].slice(-1)[0].legislation_id),0<y&&0===i&&T.properties.noteIndex!==C.properties.noteIndex?(k=!1,S=T.sortedItems[0][0].id,(S=T.sortedItems[0][0].legislation_id?T.sortedItems[0][0].legislation_id:S)==E&&T.properties.noteIndex>=C.properties.noteIndex-1&&(fe=T.sortedItems[0][1]["locator-extra"],de=C.sortedItems[0][1]["locator-extra"],1!==s[T.properties.noteIndex]&&0!==T.properties.noteIndex||fe!==de||(k=!0)),k?N=!0:R=!0):0<i&&me==E&&pe==oe||0===i&&0<y&&T.properties.noteIndex==C.properties.noteIndex&&T.sortedItems.length&&ce==E&&he==oe?N=!0:R=!0,N&&(j=(fe=(0<i?_.sortedItems[i-1]:f[y-1].sortedItems[0])[1]).locator&&(de=fe.label||"",""+fe.locator+de),I=le&&""+le+(ue||"")),N&&j&&!I&&(R=!(N=!1)),N&&(!j&&I?x[1].position=we.POSITION_IBID_WITH_LOCATOR:!j&&!I||j&&I===j?x[1].position=we.POSITION_IBID:j&&I&&I!==j?x[1].position=we.POSITION_IBID_WITH_LOCATOR:R=!(N=!1)),R&&(x[1].position=we.POSITION_CONTAINER_SUBSEQUENT,void 0===d[E]?d[E]=_.properties.noteIndex:x[1].position=we.POSITION_SUBSEQUENT),(R||N)&&("author-only"===_.properties.mode&&(x[1].position=we.POSITION_FIRST),b[O]!=_.properties.noteIndex&&(x[1]["first-container-reference-note-number"]=b[O],this.registry.registry[x[0].id])&&(this.registry.registry[x[0].id]["first-container-reference-note-number"]=b[O]),d[E]!=_.properties.noteIndex)&&(x[1]["first-reference-note-number"]=d[E],this.registry.registry[x[0].id])&&(this.registry.registry[x[0].id]["first-reference-note-number"]=d[E])),_.properties.noteIndex?(C=parseInt(_.properties.noteIndex,10)-parseInt(g[O],10),x[1].position!==we.POSITION_FIRST&&C<=this.citation.opt["near-note-distance"]&&(x[1]["near-note"]=!0),g[O]=_.properties.noteIndex):x[1].position!==we.POSITION_FIRST&&(x[1]["near-note"]=!0),_.citationID!=e.citationID)for(z=0,q=we.POSITION_TEST_VARS.length;z<q;z+=1){var ye=we.POSITION_TEST_VARS[z];x[1][ye]!==ge[ye]&&(this.registry.registry[x[0].id]&&"first-reference-note-number"===ye&&(ee[this.registry.registry[x[0].id].ambig]=!0,this.tmp.taintedItemIDs[x[0].id]=!0),this.tmp.taintedCitationIDs[_.citationID]=!0)}this.sys.variableWrapper&&(x[1].index=_.properties.index,x[1].noteIndex=_.properties.noteIndex)}}}if(this.opt.citation_number_sort&&u&&1<u.length&&0<this.citation_sort.tokens.length&&!e.properties.unsorted){for(a=0,o=u.length;a<o;a+=1)u[a][1].sortkeys=we.getSortKeys.call(this,u[a][0],"citation_sort");u.sort(this.citation.srt.compareCompositeKeys)}for(m in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(m)&&(f=this.registry.citationreg.citationsByItemId[m]))for(a=0,o=f.length;a<o;a+=1)this.tmp.taintedCitationIDs[f[a].citationID]=!0;var D,ve=[];if(M===we.PREVIEW){this.debug&&we.debug("****** start run processor *********");try{ve=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(e){we.error("Error running CSL processor for preview: "+e)}this.debug&&(we.debug("****** end run processor *********"),we.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=$,this.registry.citationreg.citationById={};for(a=0,o=$.length;a<o;a+=1)this.registry.citationreg.citationById[$[a].citationID]=$[a];this.debug&&we.debug("****** start final update *********");for(var _e=[],a=0,o=n.length;a<o;a+=1)_e.push(""+n[a].id);for(m in this.updateItems(_e,null,null,!0),this.debug&&we.debug("****** end final update *********"),J)J.hasOwnProperty(m)&&(this.registry.registry[m].disambig=J[m]);this.debug&&we.debug("****** end state restore *********")}else{for(var xe in ee)this.disambiguate.run(xe,e);for(m in this.tmp.taintedCitationIDs)if(m!=e.citationID){var P=this.registry.citationreg.citationById[m];if(!P.properties.unsorted){for(a=0,o=P.sortedItems.length;a<o;a+=1)P.sortedItems[a][1].sortkeys=we.getSortKeys.call(this,P.sortedItems[a][0],"citation_sort");P.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=P.properties.index,this.tmp.citation_note_index=P.properties.noteIndex,this.tmp.citation_id=""+P.citationID,(D=[]).push(P.properties.index),D.push(this.process_CitationCluster.call(this,P.sortedItems,P)),D.push(P.citationID),ve.push(D)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,(D=[]).push(L.length),D.push(this.process_CitationCluster.call(this,u,e)),D.push(e.citationID),ve.push(D),ve.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,ve]},we.Engine.prototype.process_CitationCluster=function(e,t){var r,i,s;return t&&t.properties&&"composite"===t.properties.mode?(t.properties.mode="author-only",r=we.getCitationCluster.call(this,e,t),t.properties.mode="suppress-author",i="",t.properties.infix&&(this.output.append(t.properties.infix),"object"==typeof(i=this.output.string(this,this.output.queue)))&&(i=i.join("")),s=we.getCitationCluster.call(this,e,t),t.properties.mode="composite",r&&i&&-1<we.SWAPPING_PUNCTUATION.concat(["’","'"]).indexOf(i[0])&&(r+=i,i=!1),[r,i,s].filter(function(e){return e}).join(" ")):we.getCitationCluster.call(this,e,t)},we.Engine.prototype.makeCitationCluster=function(e){for(var t,r=[],i=e.length,s=0;s<i;s+=1){for(var n in t={},e[s])t[n]=e[s][n];var a,o,l=this.retrieveItem(""+t.id);!this.opt.development_extensions.locator_label_parse||!t.locator||-1!==["bill","gazette","legislation","regulation","treaty"].indexOf(l.type)||t.label&&"page"!==t.label||(a=we.LOCATOR_LABELS_REGEXP.exec(t.locator))&&(o=we.LOCATOR_LABELS_MAP[a[2]],this.getTerm(o))&&(t.label=o,t.locator=a[3]),t.locator&&(t.locator=(""+t.locator).replace(/\s+$/,"")),r.push([l,t])}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(r),r&&1<r.length&&0<this.citation_sort.tokens.length){for(i=r.length,s=0;s<i;s+=1)r[s][1].sortkeys=we.getSortKeys.call(this,r[s][0],"citation_sort");r.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],we.getCitationCluster.call(this,r)},we.getAmbiguousCite=function(e,t,r,i){var s=this.tmp.group_context.tip,s={term_intended:s.term_intended,variable_attempt:s.variable_attempt,variable_success:s.variable_success,output_tip:s.output_tip,label_form:s.label_form,non_parallel:s.non_parallel,parallel_last:s.parallel_last,parallel_first:s.parallel_first,parallel_last_override:s.parallel_last_override,parallel_delimiter_override:s.parallel_delimiter_override,parallel_delimiter_override_on_suppress:s.parallel_delimiter_override_on_suppress,condition:s.condition,force_suppress:s.force_suppress,done_vars:s.done_vars.slice()},t=(this.tmp.disambig_request=t||!1,{position:we.POSITION_SUBSEQUENT,"near-note":!0}),i=(i&&(t.locator=i.locator,t.label=i.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&r&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(t["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation",this.tmp.suppress_decorations);this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,we.getCite.call(this,e,t,null,!1);for(var n=0,a=this.output.queue.length;n<a;n+=1)we.Output.Queue.purgeEmptyBlobs(this.output.queue[n]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var o=0,l=this.output.queue.length;o<l;o+=1)this.output.adjust.upward(this.output.queue[o]),this.output.adjust.leftward(this.output.queue[o]),this.output.adjust.downward(this.output.queue[o]),this.output.adjust.fix(this.output.queue[o]);r=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=i,this.tmp.group_context.replace(s),r},we.getSpliceDelimiter=function(e,t,r){return void 0!==this.citation.opt["after-collapse-delimiter"]?!e&&(!t||this.tmp.have_collapsed)&&(t||this.tmp.have_collapsed||"year-suffix"===this.citation.opt.collapse)?this.tmp.splice_delimiter=this.citation.opt.layout_delimiter:this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:this.tmp.use_cite_group_delimiter?this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter:this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==we.NUMERIC?this.tmp.splice_delimiter=", ":this.tmp.cite_locales[r-1]?(e=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[r-1]])&&e.delimiter&&(this.tmp.splice_delimiter=e.delimiter):this.tmp.splice_delimiter||(this.tmp.splice_delimiter=""),this.tmp.splice_delimiter},we.getCitationCluster=function(e,t){var r,i,s,n,a,o,l,u,m,p,c,h,f="",f=(this.output.checkNestedBrace=new we.checkNestedBrace(this),t&&(I=t.citationID,C="author-only"===t.properties.mode&&!!t.properties.mode,"note"!==this.opt.xclass&&(N="suppress-author"===t.properties.mode&&!!t.properties.mode),t.properties.prefix)&&(f=we.checkPrefixSpaceAppend(this,t.properties.prefix)),e=e||[],this.tmp.last_primary_names_string=!1,h=we.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",i=[],this.tmp.last_suffix_used=r="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}}),this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+f)),d=!1;if(this.citation.opt.suppressTrailingPunctuation&&(d=!0),I&&this.registry.citationreg.citationById[I].properties["suppress-trailing-punctuation"]&&(d=!0),"note"===this.opt.xclass){for(var g=[],L=!1,B=!1,b=[],y=0,v=e.length;y<v;y+=1){var M=e[y][0].type,_=e[y][0].title,F=e[y][1].position,U=e[y][0].id;_&&"legal_case"===M&&U!==B&&F&&(_===L&&0!==g.length||g.push(b=[]),b.push(e[y][1])),L=_,B=U}for(y=0,v=g.length;y<v;y+=1)if(!((b=g[y]).length<2)){var x=b.slice(-1)[0].locator;if(x)for(var w=0,E=b.length-1;w<E;w+=1)b[w].locator&&(x=!1);x&&(b[0].locator=x,delete b.slice(-1)[0].locator,b[0].label=b.slice(-1)[0].label,b.slice(-1)[0].label)&&delete b.slice(-1)[0].label}}for(s=[],n=e.length,e[0]&&e[0][1]&&(C?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):N&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(e),a=0;a<n;a+=1){A=e[this.tmp.cite_index=a][0],T=e[a][1];var O,A,T=we.parseLocator.call(this,T),k=this.tmp.have_collapsed,S=!1;if(0<a&&e[a-1][1]&&(S=!!e[a-1][1].locator),o={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm&&(O=this.output,this.output=new we.Output.Queue(this),this.output.adjust=new we.Output.Queue.adjust,we.getAmbiguousCite.call(this,A,null,!1,T),this.output=O),this.tmp.in_cite_predecessor=!1,0<a?we.getCite.call(this,A,T,""+e[a-1][0].id,!0):(this.tmp.term_predecessor=!1,we.getCite.call(this,A,T,null,!0)),this.tmp.cite_renders_content||(O={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+A.id,citationItems_pos:a,error_code:we.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(O)),o.splice_delimiter=we.getSpliceDelimiter.call(this,S,k,a),T&&T["author-only"]&&(this.tmp.suppress_decorations=!0),0<a&&(S=(A=e[a-1][1]).suffix&&-1<[";",".",","].indexOf(A.suffix.slice(-1)),k=!A.suffix&&T.prefix&&-1<[";",".",","].indexOf(T.prefix.slice(0,1)),S||k)&&(A=o.splice_delimiter.indexOf(" "),o.splice_delimiter=-1<A&&!k?o.splice_delimiter.slice(A):""),o.suppress_decorations=this.tmp.suppress_decorations,o.have_collapsed=this.tmp.have_collapsed,s.push(o),T["author-only"])break}var j=this.output.queue.slice(),I="",C=(t&&(I=we.checkSuffixSpacePrepend(this,t.properties.suffix)),this.citation.opt.layout_suffix),N=this.tmp.cite_locales[this.tmp.cite_locales.length-1];N&&this.tmp.cite_affixes[this.tmp.area][N]&&this.tmp.cite_affixes[this.tmp.area][N].suffix&&(C=this.tmp.cite_affixes[this.tmp.area][N].suffix),-1<we.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(C.slice(0,1))&&(C=C.slice(0,1));for(C=this.output.checkNestedBrace.update(I+C),y=0,v=this.output.queue.length;y<v;y+=1)we.Output.Queue.purgeEmptyBlobs(this.output.queue[y]);if(this.tmp.suppress_decorations||!this.output.queue.length||this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(d||(this.output.queue[this.output.queue.length-1].strings.suffix=C),this.output.queue[0].strings.prefix=f),this.opt.development_extensions.clean_up_csl_flaws)for(w=0,E=this.output.queue.length;w<E;w+=1)this.output.adjust.upward(this.output.queue[w]),this.output.adjust.leftward(this.output.queue[w]),this.output.adjust.downward(this.output.queue[w]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[w]);for(a=0,n=j.length;a<n;a+=1){var R,D,P=[];if(this.output.queue=[j[a]],this.tmp.suppress_decorations=s[a].suppress_decorations,this.tmp.splice_delimiter=s[a].splice_delimiter,j[a].parallel_delimiter&&(this.tmp.splice_delimiter=j[a].parallel_delimiter),this.tmp.have_collapsed=s[a].have_collapsed,l=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof l)return this.tmp.suppress_decorations=!1,l||(this.opt.development_extensions.throw_on_empty?we.error("Citation would render no content"):l="[NO_PRINTED_FORM]"),l;for("object"!=typeof l||0!==l.length||T["suppress-author"]||(0===a?(R=0===a?h(this.citation.opt.layout_prefix):"",D=a===j.length-1?h(this.citation.opt.layout_suffix):"",l.push(R+"[CSL STYLE ERROR: reference with no printed form.]"+D)):a===j.length-1&&("string"==typeof(R=i[i.length-1])?i[i.length-1]+=h(this.citation.opt.layout_suffix):"object"==typeof R&&(R.strings.suffix+=h(this.citation.opt.layout_suffix)))),P.length&&"string"==typeof l[0]?(l.reverse(),(D=l.pop())&&","===D.slice(0,1)?P.push(D):"string"==typeof P.slice(-1)[0]&&","===P.slice(-1)[0].slice(-1)?P.push(" "+D):D&&P.push(h(this.tmp.splice_delimiter)+D)):(l.reverse(),void 0!==(u=l.pop())&&(P.length&&"string"==typeof P[P.length-1]&&(P[P.length-1]+=u.successor_prefix),P.push(u))),m=l.length,p=0;p<m;p+=1)"string"==typeof(c=l[p])?P.push(h(this.tmp.splice_delimiter)+c):void 0!==(u=l.pop())&&P.push(u);0!==P.length||e[a][1]["suppress-author"]||0,(P=1<P.length&&"string"!=typeof P[0]?[this.output.renderBlobs(P)]:P).length&&("string"==typeof P[0]?0<a&&(P[0]=h(this.tmp.splice_delimiter)+P[0]):P[0].splice_prefix=0<a?this.tmp.splice_delimiter:""),i=i.concat(P)}if((r+=this.output.renderBlobs(i))&&!this.tmp.suppress_decorations)for(n=this.citation.opt.layout_decorations.length,a=0;a<n;a+=1)"normal"===(o=this.citation.opt.layout_decorations[a])[1]||T&&T["author-only"]||(r=this.fun.decorate[o[0]][o[1]](this,r));return this.tmp.suppress_decorations=!1,r||(this.opt.development_extensions.throw_on_empty?we.error("Citation would render no content"):r="[NO_PRINTED_FORM]"),r},we.getCite=function(e,t,r,i){var s,n=this.tmp.area;for(t&&t["author-only"]&&this.intext&&0<this.intext.tokens.length&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=r,we.citeStart.call(this,e,t,i),s=0,this.tmp.name_node={},this.nameOutput=new we.NameOutput(this,e,t);s<this[this.tmp.area].tokens.length;)s=we.tokenExec.call(this,this[this.tmp.area].tokens[s],e,t);return we.citeEnd.call(this,e,t),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(r={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:we.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(r)),this.tmp.area=n,""+e.id},we.citeStart=function(e,t,r){var i;if(this.tmp.lang_array=[],e.language&&(i=e.language.match(/^([a-zA-Z]+).*/))&&this.tmp.lang_array.push(i[1].toLowerCase()),this.tmp.lang_array.push(this.opt.lang),r||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new we.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[e.id]){if(this.tmp.disambig_restore=we.cloneAmbigConfig(this.registry.registry[e.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request)&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice()),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var s=0,n=this.tmp.disambig_settings.givens.length;s<n;s+=1)this.tmp.disambig_settings.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice();for(s=0,n=this.tmp.disambig_request.givens.length;s<n;s+=1)this.tmp.disambig_request.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice()}}else this.tmp.disambig_restore=new we.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||t&&"first"!==t.parallel&&t.parallel||(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=we.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},we.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var r=0,i=this.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.registry.registry[e.id].disambig.givens[r]=this.tmp.disambig_restore.givens[r].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){for(var s=[],r=this.tmp.issued_date.list.length-1;r>this.tmp.issued_date.pos;r+=-1)s.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),r=s.length-1;-1<r;r+=-1)this.tmp.issued_date.list.push(s.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},we.Engine.prototype.makeBibliography=function(e){var t,r,i;if(!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var s in this.bibliography.opt.exclude_types){var n=this.bibliography.opt.exclude_types[s];e.exclude.push({field:"type",value:n})}if(this.bibliography.opt.exclude_with_fields)for(var s in this.bibliography.opt.exclude_with_fields){var a=this.bibliography.opt.exclude_with_fields[s];e.exclude.push({field:a,value:!0})}}if(!this.bibliography.tokens.length)return!1;"string"==typeof e&&(this.opt.citation_number_slug=e,e=!1);var o=(u=we.getBibliographyEntries.call(this,e))[0],l=u[1],u=u[2],m={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:o,bibliography_errors:this.tmp.bibliography_errors.slice(),done:u};for(this.bibliography.opt["second-field-align"]&&(m["second-field-align"]=this.bibliography.opt["second-field-align"]),r=this.registry.reflist.length,i=0;i<r;i+=1)(t=this.registry.reflist[i]).offset>m.maxoffset&&(m.maxoffset=t.offset);return this.bibliography.opt.hangingindent&&(m.hangingindent=this.bibliography.opt.hangingindent),m.bibstart=this.fun.decorate.bibstart,m.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[m,l]},we.getBibliographyEntries=function(e){var t,r,i,s,n,a,o,l,u,m,p,c,h,f,d;function g(e,t){if("boolean"==typeof e||!e)return e?t:!t;if("string"==typeof t)return e===t;if(t){var r=e,i=t;for(l=i.length,u=0;u<l;u+=1)if(r===i[u])return 1}}if(t=[],f=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,r=e&&e.page_start&&e.page_length?this.registry.getSortedIds():this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,h={},e&&e.page_start&&e.page_length&&!(d=0)!==e.page_start)for(p=0,c=r.length;p<c&&(h[r[p]]=!0,e.page_start!=r[p]);p+=1);var b,y=[],v={};for(this.tmp.container_item_count={},r=r.filter(e=>{var t=e;return e.legislation_id?v[e.legislation_id]?t=!1:v[e.legislation_id]=!0:e.container_id&&(this.tmp.container_item_count[e.container_id]||(this.tmp.container_item_count[e.container_id]=0),this.tmp.container_item_count[e.container_id]++,-1<this.bibliography.opt.consolidate_containers.indexOf(e.type))&&(v[e.container_id]?t=!1:v[e.container_id]=!0),t}),this.tmp.container_item_pos={},p=0,c=r.length;p<c;p+=1){if(e&&e.page_start&&e.page_length){if(h[r[p]])continue;if(a=this.refetchItem(r[p]),d===e.page_length)break}else if(h[(a=r[p]).id])continue;if(e){if(i=!0,e.include){for(i=!1,w=0,E=e.include.length;w<E;w+=1)if(g((o=e.include[w]).value,a[o.field])){i=!0;break}}else if(e.exclude){for(s=!1,w=0,E=e.exclude.length;w<E;w+=1)if(g((o=e.exclude[w]).value,a[o.field])){s=!0;break}s&&(i=!1)}else if(e.select){for(n=!(i=!1),w=0,E=e.select.length;w<E;w+=1)g((o=e.select[w]).value,a[o.field])||(n=!1);n&&(i=!0)}if(e.quash){for(n=!0,w=0,E=e.quash.length;w<E;w+=1)g((o=e.quash[w]).value,a[o.field])||(n=!1);n&&(i=!1)}if(!i)continue}if(a.container_id&&(this.tmp.container_item_pos[a.container_id]||(this.tmp.container_item_pos[a.container_id]=0),this.tmp.container_item_pos[a.container_id]++),(b=new we.Token("group",we.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",b),a.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=a.system_id:this.output.current.value().system_id=a.id,m=[],!this.registry.registry[a.id].master||e&&e.page_start&&e.page_length)this.registry.registry[a.id].siblings||(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,m.push(""+we.getCite.call(this,a)),e&&e.page_start&&e.page_length&&(d+=1));else{for(var _,x=[[a,{id:a.id}]],w=0,E=(_=this.registry.registry[a.id].siblings).length;w<E;w++)x.push([this.refetchItem(_[w]),{id:_[w]}]);for(this.parallel.StartCitation(x),this.registry.registry[a.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[a.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,w=this.tmp.cite_index=0,E=x.length;w<E;w+=1)w<x.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,m.push(""+we.getCite.call(this,x[w][0],x[w][1])),this.tmp.cite_index++,h[x[w][0].id]=!0}for(f.push(""),this.tmp.bibliography_pos+=1,y.push(m),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&((b=(this.output.queue[0].blobs[0].blobs[0].strings?this.output.queue[0].blobs:this.output.queue)[0].blobs)[0].strings.prefix=this.bibliography.opt.layout_prefix+b[0].strings.prefix),w=0,E=this.output.queue.length;w<E;w+=1)we.Output.Queue.purgeEmptyBlobs(this.output.queue[w]);for(w=0,E=this.output.queue.length;w<E;w+=1)this.output.adjust.upward(this.output.queue[w]),this.output.adjust.leftward(this.output.queue[w]),this.output.adjust.downward(this.output.queue[w],!0),this.output.adjust.fix(this.output.queue[w]);(b=(b=this.output.string(this,this.output.queue)[0])||this.opt.update_mode!==we.NUMERIC?b:we.Output.Formats[this.opt.mode]["@bibliography/entry"](this,t.length+1+". [CSL STYLE ERROR: reference with no printed form.]"))&&t.push(b)}var O,A,T=!1;return e&&e.page_start&&e.page_length&&(O=r.slice(-1)[0],A=y.slice(-1)[0],O&&A&&O!=A||(T=!0)),this.tmp.disambig_override=!1,[y,t,T]},we.Engine.prototype.setCitationId=function(e,t){var r,i,s=!1;if(!e.citationID||t){for(r=Math.floor(1e14*Math.random());;){if(i=0,!this.registry.citationreg.citationById[r]){e.citationID="a"+r.toString(32);break}r+=1===(i=!i&&r<5e13?1:-1)?1:-1}s=""+r}return this.registry.citationreg.citationById[e.citationID]=e,s},we.Engine.prototype.rebuildProcessorState=function(e,t,r){t=t||"html";for(var i={},s=[],n=0,a=(e=e||[]).length;n<a;n+=1)for(var o=0,l=e[n].citationItems.length;o<l;o+=1){var u=""+e[n].citationItems[o].id;i[u]||s.push(u),i[u]=!0}this.updateItems(s);var m=[],p=[],c=[],h=this.opt.mode;this.setOutputFormat(t);for(n=0,a=e.length;n<a;n+=1){var f=this.processCitationCluster(e[n],m,p,we.ASSUME_ALL_ITEMS_REGISTERED);m.push([e[n].citationID,e[n].properties.noteIndex]);for(o=0,l=f[1].length;o<l;o+=1){var d=f[1][o][0];c[d]=[m[d][0],m[d][1],f[1][o][1]]}}return this.updateUncitedItems(r),this.setOutputFormat(h),c},we.Engine.prototype.restoreProcessorState=function(e){for(var t,r,i,s,n,a=[],o=[],l=[],u={},m=0,p=(e=e||[]).length;m<p;m+=1)u[e[m].citationID]&&this.setCitationId(e[m],!0),u[e[m].citationID]=!0,l.push(e[m].properties.index);var c=e.slice();for(c.sort(function(e,t){return e.properties.index<t.properties.index?-1:e.properties.index>t.properties.index?1:0}),m=0,p=c.length;m<p;m+=1)c[m].properties.index=m;for(m=0,p=c.length;m<p;m+=1){for(n=[],t=0,r=c[m].citationItems.length;t<r;t+=1)void 0===(i=c[m].citationItems[t]).sortkeys&&(i.sortkeys=[]),s=this.retrieveItem(""+i.id),n.push([s,i]),c[m].citationItems[t].item=s,o.push(""+i.id);c[m].properties.unsorted||n.sort(this.citation.srt.compareCompositeKeys),c[m].sortedItems=n,this.registry.citationreg.citationById[c[m].citationID]=c[m]}for(this.updateItems(o),m=0,p=e.length;m<p;m+=1)a.push([""+e[m].citationID,e[m].properties.noteIndex]);var h=[];return e&&e.length?h=this.processCitationCluster(e[0],[],a.slice(1)):(this.registry=new we.Registry(this),this.tmp=new we.Engine.Tmp,this.disambiguate=new we.Disambiguation(this)),h},we.Engine.prototype.updateItems=function(e,t,r,i){var s=this.tmp.area,n=this.tmp.root,a=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",i||(this.tmp.loadedItemIDs={}),this.registry.init(e),r)for(var o in this.registry.ambigcites)this.registry.ambigsTouched[o]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=a,this.tmp.area=s,this.tmp.root=n,this.registry.getSortedIds()},we.Engine.prototype.updateUncitedItems=function(e,t){var r=this.tmp.area,i=this.tmp.root,s=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},"object"==typeof(e=e||[]))if(void 0===e.length)for(var n in a=e,e=[],a)e.push(n);else if("number"==typeof e.length)for(var a={},o=0,l=e.length;o<l;o+=1)a[e[o]]=!0;return this.registry.init(e,!0),this.registry.dopurge(a),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=s,this.tmp.area=r,this.tmp.root=i,this.registry.getSortedIds()},we.localeResolve=function(e,t){var r,i;return t=t||"en-US",r={},i=(e=e||t).split(/[\-_]/),r.base=we.LANG_BASES[i[0]],void 0===r.base?{base:t,best:e,bare:i[0]}:(1===i.length&&(r.generic=!0),1===i.length||"x"===i[1]?r.best=r.base.replace("_","-"):r.best=i.slice(0,2).join("-"),r.base=r.base.replace("_","-"),r.bare=i[0],r)},we.Engine.prototype.localeConfigure=function(e,t){var r;if((!t||!this.locale[e.best])&&("en-US"===e.best?(r=we.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(r,"en-US",e.best)):"en-US"!==e.best&&(e.base!==e.best&&(r=we.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(r,e.base,e.best)),r=we.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(r,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),void 0===this.locale[e.best].terms["page-range-delimiter"]&&(-1<["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]="–"),void 0===this.locale[e.best].terms["year-range-delimiter"]&&(this.locale[e.best].terms["year-range-delimiter"]="–"),void 0===this.locale[e.best].terms["citation-range-delimiter"]&&(this.locale[e.best].terms["citation-range-delimiter"]="–"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var i=["default-locale","locale-sort","locale-translit","locale-translat"],s=0,n=i.length;s<n;s+=1)for(var a=0,o=this.opt[i[s]].length;a<o;a+=1)this.opt[i[s]][a]=this.opt[i[s]][a].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},we.Engine.prototype.localeSet=function(e,t,r){var i,s,n,a,o,l;if(t=t.replace("_","-"),r=r.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),r=r.toLowerCase()),this.locale[r]||(this.locale[r]={},this.locale[r].terms={},this.locale[r].opts={},this.locale[r].opts["skip-words"]=we.SKIP_WORDS,this.locale[r].opts["leading-noise-words"]||(this.locale[r].opts["leading-noise-words"]=[]),this.locale[r].dates={},this.locale[r].ord={"1.0.1":!1,keys:{}},this.locale[r]["noun-genders"]={}),i=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))i=e.dataObj;else for(var u=e.getNodesByName(e.dataObj,"locale"),m=!1,p=0,c=e.numberofnodes(u);p<c;p+=1){var h,f,d=u[p];m||e.getAttributeValue(d,"lang","xml")!==t?(h=e.getAttributeValue(d,"lang","xml"),f=e.getNodesByName(d,"style-options"),h&&f&&f.length&&(f=e.getAttributeValue(f[0],"jurisdiction-preference"))&&(this.locale[h]||(this.locale[h]={opts:{}}),this.locale[h].opts["jurisdiction-preference"]=f.split(/\s+/))):(i=d,m=!0)}for(u=e.getNodesByName(i,"type"),N=0,R=e.numberofnodes(u);N<R;N+=1){var g=u[N],b=e.getAttributeValue(g,"name"),g=e.getAttributeValue(g,"gender");this.opt.gender[b]=g}if(e.getNodesByName(i,"term","ordinal").length){for(var y in this.locale[r].ord.keys)delete this.locale[r].terms[y];this.locale[r].ord={"1.0.1":!1,keys:{}}}u=e.getNodesByName(i,"term");var v={"last-digit":{},"last-two-digits":{},"whole-number":{}},_=!1,x={};for(p=0,c=e.numberofnodes(u);p<c;p+=1){var w,E,O,A,T=u[p];"ordinal"===(A="sub verbo"===(A=e.getAttributeValue(T,"name"))?"sub-verbo":A).slice(0,7)&&("ordinal"===A?_=!0:(w=e.getAttributeValue(T,"match"),E=A.slice(8),O=(O=e.getAttributeValue(T,"gender-form"))||"neuter",w||(w="last-two-digits","0"===E.slice(0,1)&&(w="last-digit")),"0"===E.slice(0,1)&&(E=E.slice(1)),v[w][E]||(v[w][E]={}),v[w][E][O]=A),this.locale[r].ord.keys[A]=!0),void 0===this.locale[r].terms[A]&&(this.locale[r].terms[A]={}),O=!(n="long"),e.getAttributeValue(T,"form")&&(n=e.getAttributeValue(T,"form")),e.getAttributeValue(T,"gender-form")&&(O=e.getAttributeValue(T,"gender-form")),e.getAttributeValue(T,"gender")&&(this.locale[r]["noun-genders"][A]=e.getAttributeValue(T,"gender")),O?(this.locale[r].terms[A][O]={},this.locale[r].terms[A][O][n]=[],l=this.locale[r].terms[A][O],x[A]=!0):(this.locale[r].terms[A][n]=[],l=this.locale[r].terms[A]),e.numberofnodes(e.getNodesByName(T,"multiple"))?(l[n][0]=e.getNodeValue(T,"single"),-1<l[n][0].indexOf("%s")&&(this.opt.hasPlaceholderTerm=!0),l[n][1]=e.getNodeValue(T,"multiple"),-1<l[n][1].indexOf("%s")&&(this.opt.hasPlaceholderTerm=!0)):(l[n]=e.getNodeValue(T),-1<l[n].indexOf("%s")&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[r].terms.supplement||(this.locale[r].terms.supplement={}),this.locale[r].terms.supplement.long||(this.locale[r].terms.supplement.long=["supplement","supplements"]),_){for(var k in x){var S={},j=0;for(I in this.locale[r].terms[k])-1<["masculine","feminine"].indexOf(I)?S[I]=this.locale[r].terms[k][I]:j+=1;if(!j)if(S.feminine)for(var I in S.feminine)this.locale[r].terms[k][I]=S.feminine[I];else if(S.masculine)for(var I in S.masculine)this.locale[r].terms[k][I]=S.masculine[I]}this.locale[r].ord["1.0.1"]=v}for(A in this.locale[r].terms)for(N=0,R=2;N<R;N+=1)if(O=we.GENDERS[N],this.locale[r].terms[A][O])for(n in this.locale[r].terms[A])this.locale[r].terms[A][O][n]||(this.locale[r].terms[A][O][n]=this.locale[r].terms[A][n]);for(u=e.getNodesByName(i,"style-options"),p=0,c=e.numberofnodes(u);p<c;p+=1)for(o in a=u[p],s=e.attributes(a))if(s.hasOwnProperty(o))if("@punctuation-in-quote"===o||"@limit-day-ordinals-to-day-1"===o)"true"===s[o]?this.locale[r].opts[o.slice(1)]=!0:this.locale[r].opts[o.slice(1)]=!1;else if("@jurisdiction-preference"===o){var C=s[o].split(/\s+/);this.locale[r].opts[o.slice(1)]=C}else if("@skip-words"===o){C=s[o].split(/\s*,\s*/);this.locale[r].opts[o.slice(1)]=C}else if("@leading-noise-words"===o){var L=s[o].split(/\s*,\s*/);this.locale[r].opts["leading-noise-words"]=L}else if("@name-as-sort-order"===o){this.locale[r].opts["name-as-sort-order"]={};for(var N=0,R=(D=s[o].split(/\s+/)).length;N<R;N+=1)this.locale[r].opts["name-as-sort-order"][D[N]]=!0}else if("@name-as-reverse-order"===o){this.locale[r].opts["name-as-reverse-order"]={};for(N=0,R=(D=s[o].split(/\s+/)).length;N<R;N+=1)this.locale[r].opts["name-as-reverse-order"][D[N]]=!0}else if("@name-never-short"===o){this.locale[r].opts["name-never-short"]={};for(var D,N=0,R=(D=s[o].split(/\s+/)).length;N<R;N+=1)this.locale[r].opts["name-never-short"][D[N]]=!0}for(u=e.getNodesByName(i,"date"),p=0,c=e.numberofnodes(u);p<c;p+=1){var P=u[p];this.locale[r].dates[e.getAttributeValue(P,"form")]=P}we.SET_COURT_CLASSES(this,r,e,i)},we.getLocaleNames=function(e,t){var o=we.setupXml(e);function r(e,t){var r=["base","best"];if(t)for(var i=we.localeResolve(t),s=0,n=r.length;s<n;s++)i[r[s]]&&-1===e.indexOf(i[r[s]])&&e.push(i[r[s]])}var l=["en-US"];r(l,t);for(var e=o.getNodesByName(o.dataObj,"style")[0],t=o.getAttributeValue(e,"default-locale"),e=(r(l,t),["layout","if","else-if","condition"]),i=0,s=e.length;i<s;i++)!function(e){for(var t=o.getNodesByName(o.dataObj,e),r=0,i=t.length;r<i;r++){var s=o.getAttributeValue(t[r],"locale");if(s)for(var n=0,a=(s=s.split(/ +/)).length;n<a;n++)this.extendLocaleList(l,s[n])}}(o);return l},we.Node={},we.Node.bibliography={build:function(e,t){this.tokentype===we.START&&(e.build.area="bibliography",e.build.root="bibliography",e.build.extension="",this.execs.push(function(e){e.tmp.area="bibliography",e.tmp.root="bibliography",e.tmp.extension=""})),t.push(this)}},we.Node.choose={build:function(e,t){var r;this.tokentype===we.START&&(r=function(e){e.tmp.jump.push(void 0,we.LITERAL)}),this.tokentype===we.END&&(r=function(e){e.tmp.jump.pop()}),this.execs.push(r),t.push(this)},configure:function(e,t){this.tokentype===we.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}},we.Node.citation={build:function(e,t){var r;this.tokentype===we.START&&(e.build.area="citation",e.build.root="citation",e.build.extension="",this.execs.push(function(e){e.tmp.area="citation",e.tmp.root="citation",e.tmp.extension=""})),this.tokentype===we.END&&(e.opt.grouped_sort="in-text"===e.opt.xclass&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==we.POSITION&&e.opt.update_mode!==we.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length&&(r=e.citation_sort.opt.sort_directions[0].slice(),e.citation_sort.opt.sort_directions=[r].concat(e.citation_sort.opt.sort_directions)),e.citation.srt=new we.Registry.Comparifier(e,"citation_sort")),t.push(this)}},we.Node["#comment"]={build:function(){}},we.Node.date={build:function(e,t){var r,s,n,a,o,l,u,m,p,c;this.tokentype!==we.START&&this.tokentype!==we.SINGLETON||(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=we.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||we.Util.substituteStart.call(this,e,t),r=e.build.extension?we.dateMacroAsSortKey:function(e,t,r){var i;if(e.tmp.element_rendered_ok=!1,e.tmp.donesies=[],e.tmp.dateparts=[],i=[],!this.variables.length||e.tmp.just_looking&&"accessed"===this.variables[0])e.tmp.date_object=!1;else{for(void 0===(s=t[this.variables[0]])&&(s={"date-parts":[[0]]},e.opt.development_extensions.locator_date_and_revision)&&r&&"locator-date"===this.variables[0]&&r["locator-date"]&&(s=r["locator-date"]),e.tmp.date_object=s,n=this.dateparts.length,a=0;a<n;a+=1)o=this.dateparts[a],(void 0!==e.tmp.date_object[o+"_end"]||"month"===o&&void 0!==e.tmp.date_object.season_end)&&i.push(o);for(l=[],n=(u=["year","month","day"]).length,a=0;a<n;a+=1)-1<i.indexOf(u[a])&&l.push(u[a]);for(i=l.slice(),m=2,n=i.length,a=0;a<n;a+=1)if(o=i[a],p=e.tmp.date_object[o],c=e.tmp.date_object[o+"_end"],p!==c){m=a;break}e.tmp.date_collapse_at=i.slice(m)}},this.execs.push(r),this.execs.push(r=function(e,t){if(t[this.variables[0]]&&(e.output.startTag("date",this),"issued"===this.variables[0])&&("legal_case"===t.type||"legislation"===t.type)&&-1===e.opt.disable_duplicate_year_suppression.indexOf(t.country)&&!e.tmp.extension&&""+t["collection-number"]==""+e.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0])for(var r in e.tmp.date_object)e.tmp.date_object.hasOwnProperty(r)&&"year"===r.slice(0,4)&&(e.tmp.issued_date={},r=e.output.current.mystack.slice(-2)[0].blobs,e.tmp.issued_date.list=r,e.tmp.issued_date.pos=r.length-1)})),e.build.extension||this.tokentype!==we.END&&this.tokentype!==we.SINGLETON||this.execs.push(r=function(e,t){t[this.variables[0]]&&e.output.endTag()}),t.push(this),this.tokentype!==we.END&&this.tokentype!==we.SINGLETON||e.build.extension||we.Util.substituteEnd.call(this,e,t)}},we.Node["date-part"]={build:function(n,e){this.strings.form||(this.strings.form="long"),n.build.date_parts.push(this.strings.name);var o,l,u,m,p,c,h,f,d,g,b,y,v=n.build.date_variables[0];function _(e,t,r){if(r&&(r=""+we.Util.Dates[this.strings.name][e](n,r,t,this.default_locale),"month"===this.strings.name))if(n.tmp.strip_periods)r=r.replace(/\./g,"");else for(var i=0,s=this.decorations.length;i<s;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){r=r.replace(/\./g,"");break}return r}this.execs.push(function(e,t){if(e.tmp.date_object){e.tmp.probably_rendered_something=!0;var r="";if(u=!0,g=m="",e.tmp.donesies.push(this.strings.name),e.tmp.date_object.literal&&"year"===this.strings.name&&(r=e.tmp.date_object.literal,e.output.append(e.tmp.date_object.literal,this)),e.tmp.date_object&&(m=e.tmp.date_object[this.strings.name],g=e.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==m||e.tmp.suppress_decorations||(m=!1),p=!e.tmp.suppress_decorations,f=e.tmp.have_collapsed,d="year-suffix"===e[e.tmp.area].opt.collapse||"year-suffix-ranged"===e[e.tmp.area].opt.collapse,c=e.opt["disambiguate-add-year-suffix"],void 0!==(m=p&&c&&d&&(e.tmp.years_used.push(m),e.tmp.last_years_used.length>=e.tmp.years_used.length)&&f&&e.tmp.last_years_used[e.tmp.years_used.length-1]===m?!1:m)){c=p=!1,"year"===this.strings.name&&(parseInt(m,10)<500&&0<parseInt(m,10)&&(c=e.getTerm("ad")),parseInt(m,10)<0&&(p=e.getTerm("bc"),m=-1*parseInt(m,10)),g)&&(parseInt(g,10)<500&&0<parseInt(g,10)&&e.getTerm("ad"),parseInt(g,10)<0)&&(e.getTerm("bc"),g=-1*parseInt(g,10));for(var i=""+e.tmp.date_object.month;i.length<2;)i="0"+i;var s,n,i="month-"+i,a=e.locale[e.opt.lang]["noun-genders"][i];if(this.strings.form&&(n=this.strings.form,s=this.strings.form,"day"===this.strings.name&&"ordinal"===n&&e.locale[e.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(1!=m&&(n="numeric"),1!=g)&&(s="numeric"),m=_.call(this,n,a,m),g=_.call(this,s,a,g)),e.output.openLevel("empty"),e.tmp.date_collapse_at.length){for(h=!0,l=e.tmp.date_collapse_at.length,o=0;o<l;o+=1)if(b=e.tmp.date_collapse_at[o],-1===e.tmp.donesies.indexOf(b)){h=!1;break}h?(""+g!="0"&&(0===e.dateput.queue.length&&(u=!0),e.opt["year-range-format"]&&"expanded"!==e.opt["year-range-format"]&&!e.tmp.date_object.day&&!e.tmp.date_object.month&&!e.tmp.date_object.season&&"year"===this.strings.name&&m&&g&&(g=e.fun.year_mangler(m+"-"+g,!0),n=e.getTerm("year-range-delimiter"),g=g.slice(g.indexOf(n)+1)),r=g,e.dateput.append(g,this),u)&&(y=e.dateput.current.value().blobs[0])&&(y.strings.prefix=""),r=m,e.output.append(m,this),d=e.output.current.value(),(y=d.blobs[d.blobs.length-1])&&(y.strings.suffix=""),this.strings["range-delimiter"]?e.output.append(this.strings["range-delimiter"]):e.output.append(e.getTerm("year-range-delimiter"),"empty"),e.dateput.closeLevel(),f=e.dateput.current.value(),d.blobs=d.blobs.concat(f),e.dateput.string(e,e.dateput.queue),e.dateput.openLevel(e.tmp.date_token),e.tmp.date_collapse_at=[]):(r=m,e.output.append(m,this),-1<e.tmp.date_collapse_at.indexOf(this.strings.name)&&""+g!="0"&&(0===e.dateput.queue.length&&(u=!0),e.dateput.openLevel("empty"),r=g,e.dateput.append(g,this),u&&(y=e.dateput.current.value().blobs[0])&&(y.strings.prefix=""),p&&(r=p,e.dateput.append(p)),c&&(r=c,e.dateput.append(c)),e.dateput.closeLevel()))}else r=m,e.output.append(m,this);p&&(r=p,e.output.append(p)),c&&(r=c,e.output.append(c)),e.output.closeLevel()}else"month"===this.strings.name&&e.tmp.date_object.season&&((m=""+e.tmp.date_object.season)&&m.match(/^[1-4]$/)?(e.tmp.group_context.tip.variable_success=!0,r="winter",e.output.append(e.getTerm("season-0"+m),this)):m&&(r=m,e.output.append(m,this)));e.tmp.value=[],!t[v]||!m&&!e.tmp.have_collapsed||e.opt.has_year_suffix||"year"!==this.strings.name||e.tmp.just_looking||e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.has_done_year_suffix&&(e.tmp.has_done_year_suffix=!0,r="x",d=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),f=new we.NumericBlob(e,!1,d,this,t.id),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,g=new we.Util.Suffixator(we.SUFFIX_CHARS),f.setFormatter(g),"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(f.range_prefix=e.getTerm("citation-range-delimiter")),e[e.tmp.area].opt.cite_group_delimiter?f.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter:e[e.tmp.area].opt["year-suffix-delimiter"]?f.successor_prefix=e[e.tmp.area].opt["year-suffix-delimiter"]:f.successor_prefix=e[e.tmp.area].opt.layout_delimiter,f.UGLY_DELIMITER_SUPPRESS_HACK=!0,e.output.append(f,"literal")),r&&!e.tmp.group_context.tip.condition&&(e.tmp.just_did_number=r.match(/[0-9]$/),e.output.current.tip.strings.suffix)&&(e.tmp.just_did_number=!1)}}),e.push(this)}},we.Node["else-if"]={build:function(e,t){we.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){we.Conditions.Configure.call(this,e,t)}},we.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===we.START&&(e.configure.fail[e.configure.fail.length-1]=t)}},we.Node["et-al"]={build:function(e,t){"citation"!==e.build.area&&"bibliography"!==e.build.area||this.execs.push(function(e){"string"==typeof(e.tmp.etal_node=this).strings.term&&(e.tmp.etal_term=this.strings.term)}),t.push(this)}},we.Node.group={build:function(r,e,t){var i,s;this.realGroup=t,this.tokentype===we.START&&(we.Util.substituteStart.call(this,r,e),r.build.substitute_level.value()&&r.build.substitute_level.replace(r.build.substitute_level.value()+1),this.juris||e.push(this),(t=[]).push(s=function(e){if(e.output.startTag("group",this),!this.strings.label_form_override||e.tmp.group_context.tip.label_form||(e.tmp.group_context.tip.label_form=this.strings.label_form_override),!this.strings.label_capitalize_if_first_override||e.tmp.group_context.tip.label_capitalize_if_first||(e.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override),this.realGroup){e.tmp.group_context.tip.condition&&we.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.prefix,null,this);var t=!1,r=!1;e.tmp.group_context.mystack.length&&(e.output.current.value().parent=e.tmp.group_context.tip.output_tip);var i=(i=e.tmp.group_context.tip.label_form)||this.strings.label_form_override,s=(s=e.tmp.group_context.tip.label_capitalize_if_first)||this.strings.label_capitalize_if_first,n=(e.tmp.group_context.tip.condition?(t=e.tmp.group_context.tip.condition,r=e.tmp.group_context.tip.force_suppress):this.strings.reject?t={test:this.strings.reject,not:!0}:this.strings.require&&(t={test:this.strings.require,not:!1}),{old_term_predecessor:e.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:e.tmp.group_context.tip.variable_success,output_tip:e.output.current.tip,label_form:i,label_static:e.tmp.group_context.tip.label_static,label_capitalize_if_first:s,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:t,force_suppress:r,done_vars:e.tmp.group_context.tip.done_vars.slice()});if(this.non_parallel&&(i=(i=e.tmp.group_context.tip.non_parallel)||{},Object.assign(i,this.non_parallel),n.non_parallel=i),this.parallel_first&&(s=(s=e.tmp.group_context.tip.parallel_first)||{},Object.assign(s,this.parallel_first),n.parallel_first=s),this.parallel_last&&(t=(t=e.tmp.group_context.tip.parallel_last)||{},Object.assign(t,this.parallel_last),n.parallel_last=t),e.tmp.abbrev_trimmer&&e.tmp.abbrev_trimmer.LAST_TO_FIRST&&n.parallel_last)for(var a in n.parallel_first||(n.parallel_first={}),e.tmp.abbrev_trimmer.LAST_TO_FIRST)n.parallel_last[a]&&(n.parallel_first[a]=!0,delete n.parallel_last[a]);if(e.tmp.group_context.push(n),e.tmp.abbrev_trimmer&&this.parallel_last_to_first)for(var a in e.tmp.abbrev_trimmer.LAST_TO_FIRST||(e.tmp.abbrev_trimmer.LAST_TO_FIRST={}),this.parallel_last_to_first)e.tmp.abbrev_trimmer.LAST_TO_FIRST[a]=!0}}),this.execs=t.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(r.build["publisher-special"]=!0,this.strings["subgroup-delimiter"])&&this.execs.push(s=function(e,t){var r;t.publisher&&t["publisher-place"]&&(r=t.publisher.split(/;\s*/),t=t["publisher-place"].split(/;\s*/),1<r.length)&&r.length===t.length&&(e.publisherOutput=new we.PublisherOutput(e,this),e.publisherOutput["publisher-list"]=r,e.publisherOutput["publisher-place-list"]=t)}),this.juris)&&(t=new we.Token("choose",we.START),we.Node.choose.build.call(t,r,e),t=new we.Token("if",we.START),i=this.juris,s=function(e,t){return we.INIT_JURISDICTION_MACROS(r,e,t,i)},t.tests||(t.tests=[]),t.tests.push(s),t.test=r.fun.match.any(t,r,t.tests),e.push(t),s=function(e,t,r){var i=t,s=(r&&r["best-jurisdiction"]&&"juris-locator"===this.juris&&(i=r),0);if(e.juris[i["best-jurisdiction"]][this.juris])for(;s<e.juris[i["best-jurisdiction"]][this.juris].length;)s=we.tokenExec.call(e,e.juris[i["best-jurisdiction"]][this.juris][s],t,r)},(t=new we.Token("text",we.SINGLETON)).juris=this.juris,t.execs.push(s),e.push(t),t=new we.Token("if",we.END),we.Node.if.build.call(t,r,e),t=new we.Token("else",we.START),we.Node.else.build.call(t,r,e)),this.tokentype===we.END&&(r.build["publisher-special"]&&(r.build["publisher-special"]=!1,this.execs.push(s=function(e){e.publisherOutput&&(e.publisherOutput.render(),e.publisherOutput=!1)})),this.execs.push(s=function(e,t,r){if(e.tmp.group_context.tip.condition||e.output.current.tip.strings.suffix&&(e.tmp.just_did_number=!1),e.output.endTag(),this.realGroup){var i=e.tmp.group_context.pop();if(i.parallel_delimiter_override&&(e.tmp.group_context.tip.parallel_delimiter_override=i.parallel_delimiter_override,!e.tmp.just_looking)&&e.registry.registry[t.id].master&&(e.registry.registry[t.id].parallel_delimiter_override=i.parallel_delimiter_override),i.parallel_delimiter_override_on_suppress&&(e.tmp.group_context.tip.parallel_delimiter_override_on_suppress=i.parallel_delimiter_override_on_suppress),"bibliography_sort"===e.tmp.area&&(t=i.done_vars.indexOf("citation-number"),this.strings.sort_direction)&&-1<t&&1==e.tmp.group_context.length()&&(this.strings.sort_direction===we.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=we.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=we.ASCENDING,i.done_vars=i.done_vars.slice(0,t).concat(i.done_vars.slice(t+1))),i.condition&&(i.force_suppress=we.EVALUATE_GROUP_CONDITION(e,i)),e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.force_suppress=i.force_suppress),!i.force_suppress&&(i.variable_success||i.term_intended&&!i.variable_attempt)){this.isJurisLocatorLabel||(e.tmp.group_context.tip.variable_success=!0);var s,t=e.output.current.value().blobs;e.output.current.value().blobs.length;!e.tmp.just_looking&&(i.non_parallel||i.parallel_last||i.parallel_first||i.parallel_delimiter_override||i.parallel_delimiter_override_on_suppress)&&((s=e.parallel.checkRepeats(i))&&t&&t.pop(),0<e.tmp.cite_index)&&(s||!i.parallel_first&&!i.parallel_last&&!i.non_parallel)&&(t=e.tmp.suppress_repeats[e.tmp.cite_index-1],s&&i.parallel_delimiter_override_on_suppress&&(t.SIBLING||t.ORPHAN)?e.output.queue.slice(-1)[0].parallel_delimiter=i.parallel_delimiter_override_on_suppress:i.parallel_delimiter_override&&t.SIBLING&&(e.output.queue.slice(-1)[0].parallel_delimiter=i.parallel_delimiter_override))}else{if(e.tmp.term_predecessor=i.old_term_predecessor,e.tmp.group_context.tip.variable_attempt=i.variable_attempt,i.force_suppress&&!e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.variable_attempt=!0,e.tmp.group_context.tip.variable_success=i.variable_success_parent),i.force_suppress)for(var n=0,a=i.done_vars.length;n<a;n++)for(var o=i.done_vars[n],l=0,u=e.tmp.done_vars.length;l<u;l++)e.tmp.done_vars[l]===o&&(e.tmp.done_vars=e.tmp.done_vars.slice(0,l).concat(e.tmp.done_vars.slice(l+1)));e.output.current.value().blobs&&e.output.current.value().blobs.pop()}}}),this.juris)&&(t=new we.Token("else",we.END),we.Node.else.build.call(t,r,e),s=new we.Token("choose",we.END),we.Node.choose.build.call(s,r,e)),this.tokentype===we.END&&(this.juris||e.push(this),r.build.substitute_level.value()&&r.build.substitute_level.replace(r.build.substitute_level.value()-1),we.Util.substituteEnd.call(this,r,e))}},we.Node.if={build:function(e,t){we.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){we.Conditions.Configure.call(this,e,t)}},we.Node.conditions={build:function(e){this.tokentype===we.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===we.END&&e.tmp.conditions.matchCombine()}},we.Node.condition={build:function(e){var t;this.tokentype===we.SINGLETON&&(t=e.fun.match[this.match](this,e,this.tests),e.tmp.conditions.addTest(t))}},we.Conditions={},we.Conditions.TopNode=function(e){this.tokentype!==we.START&&this.tokentype!==we.SINGLETON||(this.locale&&(e.opt.lang=this.locale),this.tests&&this.tests.length?this.test=e.fun.match[this.match](this,e,this.tests):e.tmp.conditions=new we.Conditions.Engine(e,this),0===e.build.substitute_level.value()&&this.execs.push(function(e){e.tmp.condition_counter++})),this.tokentype!==we.END&&this.tokentype!==we.SINGLETON||(0===e.build.substitute_level.value()&&this.execs.push(function(e){e.tmp.condition_counter--,0<e.tmp.condition_lang_counter_arr.length&&e.tmp.condition_lang_counter_arr.slice(-1)[0]===e.tmp.condition_counter&&(e.opt.lang=e.tmp.condition_lang_val_arr.pop(),e.tmp.condition_lang_counter_arr.pop()),this.locale_default&&(e.output.current.value().old_locale=this.locale_default,e.output.closeLevel("empty"),e.opt.lang=this.locale_default)}),this.execs.push(function(e){return this[e.tmp.jump.value()]}),this.locale_default&&(e.opt.lang=this.locale_default))},we.Conditions.Configure=function(e,t){this.tokentype===we.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===we.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)},we.Conditions.Engine=function(e,t){this.token=t,this.state=e},we.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)},we.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e},we.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},we.Node.info={build:function(e){this.tokentype===we.START?e.build.skip="info":e.build.skip=!1}},we.Node.institution={build:function(e,t){-1<[we.SINGLETON,we.START].indexOf(this.tokentype)&&this.execs.push(function(e){"string"==typeof this.strings.delimiter?e.tmp.institution_delimiter=this.strings.delimiter:e.tmp.institution_delimiter=e.tmp.name_delimiter,"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")?e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&":"none"===e.inheritOpt(this,"and")&&(this.and_term=e.tmp.institution_delimiter),void 0===this.and_term&&e.tmp.and_term&&(this.and_term=e.tmp.and_term),we.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.institution_delimiter&&(this.and_prefix_multiple=e.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.institution_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new we.Blob(e.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new we.Blob(e.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),e.nameOutput.institution=this}),t.push(this)},configure:function(e){-1<[we.SINGLETON,we.START].indexOf(this.tokentype)&&(e.build.has_institution=!0)}},we.Node["institution-part"]={build:function(e,t){var r;"long"===this.strings.name?r=this.strings["if-short"]?function(e){e.nameOutput.institutionpart["long-with-short"]=this}:function(e){e.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(r=function(e){e.nameOutput.institutionpart.short=this}),this.execs.push(r),t.push(this)}},we.Node.key={build:function(e,t){t=e[e.build.root+"_sort"].tokens;var i,r,s=!1,n=new we.Token("key",we.START),a=(e.tmp.root=e.build.root,n.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),n.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),n.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),n.execs.push(r=function(e){e.tmp.done_vars=[]}),n.execs.push(r=function(e){e.output.openLevel("empty")}),[]),a=(this.strings.sort_direction===we.DESCENDING?(a.push(1),a.push(-1)):(a.push(-1),a.push(1)),e[e.build.area].opt.sort_directions.push(a),-1<we.DATE_VARIABLES.indexOf(this.variables[0])&&(e.build.date_key=!0),n.execs.push(r=function(e){e.tmp.sort_key_flag=!0,e.inheritOpt(this,"et-al-min")&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),e.inheritOpt(this,"et-al-use-first")&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),"boolean"==typeof e.inheritOpt(this,"et-al-use-last")&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"))}),t.push(n),this.variables.length?(i=this.variables[0],-1<we.NAME_VARIABLES.indexOf(i)?((a=new we.Token("names",we.START)).tokentype=we.START,a.variables=this.variables,we.Node.names.build.call(a,e,t),(n=new we.Token("name",we.SINGLETON)).tokentype=we.SINGLETON,n.strings["name-as-sort-order"]="all",n.strings["sort-separator"]=" ",n.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),n.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),n.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),we.Node.name.build.call(n,e,t),(a=new we.Token("institution",we.SINGLETON)).tokentype=we.SINGLETON,we.Node.institution.build.call(a,e,t),(n=new we.Token("names",we.END)).tokentype=we.END,we.Node.names.build.call(n,e,t)):((a=new we.Token("text",we.SINGLETON)).strings.sort_direction=this.strings.sort_direction,a.dateparts=this.dateparts,-1<we.NUMERIC_VARIABLES.indexOf(i)?r="citation-number"===i?function(e,t){"bibliography_sort"===e.tmp.area&&(this.strings.sort_direction===we.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=we.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=we.ASCENDING),t=(t="citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq]:e.registry.registry[t.id].seq)&&we.Util.padding(""+t),e.output.append(t,this)}:function(e,t){var r=!1;r=(r=t[i])&&we.Util.padding(r),e.output.append(r,this)}:"citation-label"===i?r=function(e,t){t=e.getCitationLabel(t);e.output.append(t,this)}:-1<we.DATE_VARIABLES.indexOf(i)?(r=we.dateAsSortKey,a.variables=this.variables):r="title"===i?e.transform.getOutputFunction(this.variables,"title",!1,!1,!0):"court-class"===i?function(e,t,r){we.INIT_JURISDICTION_MACROS(e,t,r,"juris-main");r=we.GET_COURT_CLASS(e,t,!0);e.output.append(r,"empty")}:function(e,t){t=t[i];e.output.append(t,"empty")},a.execs.push(r),t.push(a))):((n=new we.Token("text",we.SINGLETON)).strings.sort_direction=this.strings.sort_direction,n.postponed_macro=this.postponed_macro,we.expandMacro.call(e,n,t)),new we.Token("key",we.END));a.execs.push(r=function(e){var t=e.output.string(e,e.output.queue),t=(t=e.sys.normalizeUnicode?e.sys.normalizeUnicode(t):t)?t.split(" ").join(e.opt.sort_sep)+e.opt.sort_sep:"";s&&we.debug("keystring: "+t+" "+typeof t),e[e[e.tmp.area].root+"_sort"].keys.push(t="string"!=typeof(t=""===t?void 0:t)?void 0:t),e.tmp.value=[]}),e.build.date_key&&("citation"===e.build.area&&"_sort"===e.build.extension&&(e[e.build.area].opt.sort_directions.push([-1,1]),a.execs.push(r=function(e,t){t=(t=e.registry.registry[t.id].disambig.year_suffix)||0,t=we.Util.padding(""+t);e[e.tmp.area].keys.push(t)})),e.build.date_key=!1),a.execs.push(r=function(e){e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-use-last"]=void 0,e.tmp.sort_key_flag=!1}),t.push(a)}},we.Node.label={build:function(e,t){if(this.strings.term)this.execs.push(function(e,t,r){t=we.evaluateLabel(this,e,t,r);r&&"locator"===this.strings.term&&(r.section_form_override=this.strings.form),t&&(e.tmp.group_context.tip.term_intended=!0),we.UPDATE_GROUP_CONTEXT_CONDITION(e,t,null,this),-1===t.indexOf("%s")&&(!this.strings.capitalize_if_first||e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area||(t=we.Output.Formatters["capitalize-first"](e,t)),e.output.append(t,this))});else{this.strings.form||(this.strings.form="long");for(var r=e.build.names_variables[e.build.names_variables.length-1],i=e.build.name_label[e.build.name_label.length-1],s=0,n=r.length;s<n;s+=1)i[r[s]]||(i[r[s]]={});if(e.build.name_flag)for(s=0,n=r.length;s<n;s+=1)i[r[s]].after=this;else for(var s=0,n=r.length;s<n;s+=1)i[r[s]].before=this}t.push(this)}},we.Node.layout={build:function(e,t){var r,i,s,n,a;function o(){"bibliography"===e.build.area&&(i=new we.Token("text",we.SINGLETON),r=function(e){var t,r;e.tmp.parallel_and_not_last||(t=e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale]?e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale].suffix:e.bibliography.opt.layout_suffix,r=e.output.current.value(),e.opt.using_display?r.blobs[r.blobs.length-1].strings.suffix=t:r.strings.suffix=t),e.bibliography.opt["second-field-align"]&&e.output.endTag("bib_other")},i.execs.push(r),t.push(i))}this.tokentype===we.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],r=function(e,t,r){var i;e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area&&((i=new we.Token("group",we.START)).decorations=[["@cite","entry"]],e.output.startTag("cite_entry",i),e.output.current.value().item_id=t.system_id,r)&&(e.output.current.value().locator_txt=r.locator_txt,e.output.current.value().suffix_txt=r.suffix_txt)},this.execs.push(r)),this.tokentype!==we.START||e.tmp.cite_affixes[e.build.area]||(r=function(e,t,r){if(e.tmp.done_vars=[],r&&r["author-only"]&&e.tmp.done_vars.push("locator"),e.opt.suppressedJurisdictions[t.country]&&t.country&&-1===["treaty","patent"].indexOf(t.type)&&e.tmp.done_vars.push("country"),!e.tmp.just_looking&&e.registry.registry[t.id]&&e.registry.registry[t.id].parallel&&e.tmp.done_vars.push("first-reference-note-number"),!e.tmp.just_looking&&e.tmp.abbrev_trimmer&&t.jurisdiction)for(var i in e.tmp.abbrev_trimmer.QUASHES[t.jurisdiction])e.tmp.done_vars.push(i);e.tmp.rendered_name=!1},this.execs.push(r),r=function(e){e.tmp.sort_key_flag=!1},this.execs.push(r),r=function(e){e.tmp.nameset_counter=0},this.execs.push(r),r=function(e,t){var r=new we.Token;e.output.openLevel(r)},this.execs.push(r),t.push(this),"citation"===e.build.area&&(a=new we.Token("text",we.SINGLETON),r=function(e,t,r){var i;r&&r.prefix&&(r=we.checkPrefixSpaceAppend(e,r.prefix),e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r)),i=we.checkIgnorePredecessor(e,r),e.output.append(r,this,!1,i))},a.execs.push(r),t.push(a))),this.locale_raw&&((n=new we.Token("dummy",we.START)).locale=this.locale_raw,n.strings.delimiter=this.strings.delimiter,n.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===we.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(s=new we.Token("else",we.START),we.Node.else.build.call(s,e,t))),this.locale_raw)&&((e.build.layout_locale_flag?(n.name="else-if",we.Attributes["@locale-internal"].call(n,e,this.locale_raw),we.Node["else-if"]):(a=new we.Token("choose",we.START),we.Node.choose.build.call(a,e,t),n.name="if",we.Attributes["@locale-internal"].call(n,e,this.locale_raw),we.Node.if)).build.call(n,e,t),e.tmp.cite_affixes[e.build.area][n.locale]={},e.tmp.cite_affixes[e.build.area][n.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][n.locale].suffix=this.strings.suffix),this.tokentype===we.END&&(this.locale_raw&&(o(),e.build.layout_locale_flag?(n.name="else-if",n.tokentype=we.END,we.Attributes["@locale-internal"].call(n,e,this.locale_raw),we.Node["else-if"].build.call(n,e,t)):(n.name="if",n.tokentype=we.END,we.Attributes["@locale-internal"].call(n,e,this.locale_raw),we.Node.if.build.call(n,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(o(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(s=new we.Token("else",we.END),we.Node.else.build.call(s,e,t),s=new we.Token("choose",we.END),we.Node.choose.build.call(s,e,t)),e.build_layout_locale_flag=!0,"citation"===e.build.area&&(i=new we.Token("text",we.SINGLETON),r=function(e,t,r){r&&r.suffix&&(r=we.checkSuffixSpacePrepend(e,r.suffix),e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r)),e.output.append(r,this))},i.execs.push(r),t.push(i)),r=function(e){e.output.closeLevel()},this.execs.push(r),r=function(e,t){e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area&&e.output.endTag()},this.execs.push(r),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}},we.Node.macro={build:function(){}},we.Node.alternative={build:function(e,t){var r,i;this.tokentype===we.START?(i=new we.Token("choose",we.START),we.Node.choose.build.call(i,e,t),r=new we.Token("if",we.START),we.Attributes["@alternative-node-internal"].call(r,e),we.Node.if.build.call(r,e,t),this.execs.push(function(e,t){if(e.tmp.oldItem=t,e.tmp.oldLang=e.opt.lang,e.tmp.abort_alternative=!0,t["language-name"]&&t["language-name-original"]){var r,i=JSON.parse(JSON.stringify(t)),s=(i.language=i["language-name"],we.localeResolve(i.language,e.opt["default-locale"][0]));if(e.opt.multi_layout)for(var n in e.opt.multi_layout){var a,o=e.opt.multi_layout[n],l=!1;for(a in o){var u=o[a];if(s.best===u.best||s.base===u.base||s.bare===u.bare){l=o[0].best;break}}l=l||e.opt["default-locale"][0],e.opt.lang=l}for(r in i)if(-1===["id","type","language","multi"].indexOf(r)&&"alt-"!==r.slice(0,4))if(i.multi&&i.multi._keys[r]){var m,p=!0;for(m in i.multi._keys[r])if(s.bare===m.replace(/^([a-zA-Z]+).*/,"$1")){p=!1;break}p&&delete i[r]}else delete i[r];for(r in i)"alt-"===r.slice(0,4)?(i[r.slice(4)]=i[r],e.tmp.abort_alternative=!1):i.multi&&i.multi._keys&&!i["alt-"+r]&&i.multi._keys[r]&&(i.multi._keys[r][s.best]?(i[r]=i.multi._keys[r][s.best],e.tmp.abort_alternative=!1):i.multi._keys[r][s.base]?(i[r]=i.multi._keys[r][s.base],e.tmp.abort_alternative=!1):i.multi._keys[r][s.bare]&&(i[r]=i.multi._keys[r][s.bare],e.tmp.abort_alternative=!1))}e.output.openLevel(this),e.registry.refhash[t.id]=i,e.nameOutput=new we.NameOutput(e,i)}),t.push(this),i=new we.Token("choose",we.START),we.Node.choose.build.call(i,e,t),r=new we.Token("if",we.START),we.Attributes["@alternative-node-internal"].call(r,e),r.execs.push(function(e){e.tmp.abort_alternative=!0}),we.Node.if.build.call(r,e,t)):this.tokentype===we.END&&(r=new we.Token("if",we.END),we.Node.if.build.call(r,e,t),i=new we.Token("choose",we.END),we.Node.choose.build.call(i,e,t),this.execs.push(function(e,t){e.output.closeLevel(),e.registry.refhash[t.id]=e.tmp.oldItem,e.opt.lang=e.tmp.oldLang,e.nameOutput=new we.NameOutput(e,e.tmp.oldItem),e.tmp.abort_alternative=!1}),t.push(this),r=new we.Token("if",we.END),we.Node.if.build.call(r,e,t),i=new we.Token("choose",we.END),we.Node.choose.build.call(i,e,t))}},we.Node["alternative-text"]={build:function(e,t){this.tokentype===we.SINGLETON&&this.execs.push(function(e,t){t=e.refetchItem(t.id);we.getCite.call(e,t)}),t.push(this)}},we.NameOutput=function(e,t,r){this.debug=!1,this.state=e,this.debug&&this.state.sys.print("(1)"),this.Item=t,this.item=r,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},we.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,r=this.variables.length;t<r;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if((this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length)&&this.checkCommonAuthor(this.requireMatch)){for(var t in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var i=this.state.tmp.done_vars.indexOf(this.variables[t]);-1<i&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,i).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}},we.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;t=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,i=this.variables.length;r<i;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,we.LITERAL),this.state.tmp.value=t}if(this.checkCommonAuthor(this.requireMatch)){for(var r in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var s=this.state.tmp.done_vars.indexOf(this.variables[r]);-1<s&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,s).concat(this.state.tmp.done_vars.slice(r+1)))}this.variables=[]}},we.NameOutput.prototype.outputNames=function(){var e=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=we.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",h=0,f=this.family.execs.length;h<f;h+=1)this.family.execs[h].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=we.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",h=0,f=this.given.execs.length;h<f;h+=1)this.given.execs[h].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&this.state.sys.print("(2)"),this.getEtAlConfig(),this.debug&&this.state.sys.print("(3)"),this.divideAndTransliterateNames(),this.debug&&this.state.sys.print("(4)"),this.truncatePersonalNameLists(),this.debug&&this.state.sys.print("(5)"),this.debug&&this.state.sys.print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&this.state.sys.print("(7)"),"count"===this.name.strings.form)!this.state.tmp.extension&&0==this.names_count||(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0);else{this.debug&&this.state.sys.print("(8)"),this.setEtAlParameters(),this.debug&&this.state.sys.print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&this.state.sys.print("(10)"),this.renderAllNames(),this.debug&&this.state.sys.print("(11)");var t=[];for(h=0,f=e.length;h<f;h+=1){var r=e[h],i=[],s=!1,n=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){this.debug&&this.state.sys.print("(11a)");for(var a,o=0,l=this.institutions[r].length;o<l;o+=1)i.push(this.joinPersonsAndInstitutions([this.persons[r][o],this.institutions[r][o]]));this.debug&&this.state.sys.print("(11b)"),this.institutions[r].length&&(a=this.nameset_base+this.variable_offset[r],this.freeters[r].length&&(a+=1),s=this.joinInstitutionSets(i,a)),this.debug&&this.state.sys.print("(11c)");n=this.joinFreetersAndInstitutionSets([this.freeters[r],s]);this.debug&&this.state.sys.print("(11d)")}else n=this._join([this.freeters[r]],"");if(n&&(this.state.tmp.extension||(n=this._applyLabels(n,r)),t.push(n)),this.debug&&this.state.sys.print("(11e)"),this.common_term)break}for(this.debug&&this.state.sys.print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&this.state.sys.print("(13)"),h=0,f=t.length;h<f;h+=1)this.state.output.append(t[h],"literal",!0);!this.state.tmp.just_looking&&0<t.length&&(this.state.tmp.probably_rendered_something=!0),this.debug&&this.state.sys.print("(14)"),this.state.output.closeLevel("empty"),this.debug&&this.state.sys.print("(15)");var u=this.state.output.pop(),m=(this.state.tmp.name_node.top=u,this.debug&&this.state.sys.print("(16)"),we.Util.cloneToken(this.names));if(this.state.tmp.group_context.tip.condition&&we.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(u,m),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&this.state.sys.print("(17)"),this.debug&&this.state.sys.print("(18)"),"authority"!==e[0]){var p=[],c=this.Item[e[0]];if(c)for(var h=0,f=c.length;h<f;h+=1){var d=we.Util.Names.getRawName(c[h]);d&&p.push(d)}(p=p.join(", "))&&(this.state.tmp.name_node.string=p)}this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type&&this.state.tmp.first_name_string&&((m=[]).push(this.state.tmp.first_name_string),this.Item.title&&m.push(this.Item.title),m=m.join(", "))&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(m=this.state.sys.normalizeAbbrevsKey("classic",m)),this.state.transform.loadAbbreviation("default","classic",m,this.Item.language),this.state.transform.abbrevs.default.classic[m])&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[m],"empty",!0),u=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(u)),this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&this.state.sys.print("(19)")}},we.NameOutput.prototype._applyLabels=function(e,t){var r;if(this.label&&this.label[this.labelVariable]){var i=0,s=this.freeters_count[t]+this.institutions_count[t];if(1<s)i=1;else{for(var n=0,a=this.persons[t].length;n<a;n+=1)s+=this.persons_count[t][n];1<s&&(i=1)}this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(i=this.label[this.labelVariable].before.strings.plural),r=this._buildLabel(t,i,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(r,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(i=this.label[this.labelVariable].after.strings.plural),r=this._buildLabel(t,i,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(r,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop())}return e},we.NameOutput.prototype._buildLabel=function(e,t,r,i){this.common_term&&(e=this.common_term);var s=!1,i=this.label[i][r];return s=i?we.castLabel(this.state,i,e,t,we.TOLERANT):s},we.NameOutput.prototype._collapseAuthor=function(){var e,t,r;0!==this.state.tmp.name_node.top.blobs.length&&(0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=r,this.state.registry.authorstrings[this.Item.id]=t):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,(t=e?this.state.output.string(this.state,e,!1):t)===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,-1<this.variables.indexOf(this._first_creator_variable)&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1))))},we.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)},we.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,r,i;for(e in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],s=0,n=this.persons[e].length;s<n;s+=1)this.persons_count[e][s]=this.persons[e][s].length,this.persons[e][s]=this._truncateNameList(this.persons,e,s);if((i=!(!this.state.opt.development_extensions.etal_min_etal_usefirst_hack||1!==this.etal_min||1!==this.etal_use_first||this.state.tmp.extension||this.state.tmp.just_looking)&&e)||this._please_chop)for(t=0,r=this.variables.length;t<r;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):i&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=i));for(var s=0,n=this.persons[e].length;s<n;s++)if(this.persons[e][s].length){if(this._please_chop===e){this.persons[e][s]=this.persons[e][s].slice(1),this.persons_count[e][s]+=-1,this._please_chop=!1;break}if(i&&!this._please_chop){this.freeters[e]=this.persons[e][s].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=i;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):i&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,this._please_chop=i))}for(t=0,r=this.variables.length;t<r;t+=1){this.institutions[e].length&&(this.nameset_offset+=1);for(s=0,n=this.persons[e].length;s<n;s++)this.persons[e][s].length&&(this.nameset_offset+=1)}},we.NameOutput.prototype._truncateNameList=function(e,t,r){return e=void 0===r?e[t]:e[t][r],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&50<e.length&&e.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2&&(t=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names,e=e.slice(0,t+1).concat(e.slice(-1))),e},we.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,r,i,s=this.Item,n=this.variables;for(this.varnames=n.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=n.length;e<t;e+=1){var a=n[e],o=(this.variable_offset[a]=this.nameset_offset,this._normalizeVariableValue(s,a));if(this.name.strings["suppress-min"]&&o.length>=this.name.strings["suppress-min"]&&(o=[]),this.name.strings["suppress-max"]&&o.length<=this.name.strings["suppress-max"]&&(o=[]),this._getFreeters(a,o),this._getPersonsAndInstitutions(a,o),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[a]=[],r=0,i=this.persons[a].length;r<i;r+=1)this.persons[a][r]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[a]=[],this.freeters[a]=this.freeters[a].concat(this.persons[a]),r=0,i=this.persons[a].length;r<i;r+=1)for(var l=0,u=this.persons[a][r].length;l<u;l+=1)this.freeters[a].push(this.persons[a][r][l]);this.persons[a]=[]}}},we.NameOutput.prototype._normalizeVariableValue=function(e,t){e="string"==typeof e[t]||"number"==typeof e[t]?(we.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),[{literal:e[t]+""}]):e[t]?("number"!=typeof e[t].length&&(we.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]]),e[t].slice()):[];return e},we.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var r=t.length-1;-1<r&&this.isPerson(t[r]);r--)(i=this._checkNickname(t.pop()))&&this.freeters[e].push(i);else for(r=t.length-1;-1<r;r--){var i=t.pop();this.isPerson(i)&&(i=this._checkNickname(i)),this.freeters[e].push(i)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)},we.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var r,i=[],s=!1,n=!0,a=t.length-1;-1<a;a+=-1)this.isPerson(t[a])?(r=this._checkNickname(t[a]))&&i.push(r):(s=!0,this.institutions[e].push(t[a]),n||(i.reverse(),this.persons[e].push(i),i=[]),n=!1);s&&(i.reverse(),this.persons[e].push(i),this.persons[e].reverse(),this.institutions[e].reverse())}},we.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;-1<t;t+=-1)e.pop()},we.NameOutput.prototype._checkNickname=function(e){var t,r;return e=-1<["interview","personal_communication"].indexOf(this.Item.type)&&(r="",r=we.Util.Names.getRawName(e))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"])&&(t=r,this.state.sys.normalizeAbbrevsKey&&(t=this.state.sys.normalizeAbbrevsKey("author",r)),this.state.transform.loadAbbreviation("default","nickname",t,this.Item.language),r=this.state.transform.abbrevs.default.nickname[t])?"!here>>>"!==r&&{family:r,given:""}:e},we.NameOutput.prototype._purgeEmptyBlobs=function(e){for(var t=e.length-1;-1<t;t+=-1)e[t]&&0!==e[t].length&&e[t].blobs.length||(e=e.slice(0,t).concat(e.slice(t+1)));return e},we.NameOutput.prototype.joinPersons=function(e,t,r,i){return e=this._purgeEmptyBlobs(e),void 0===r?1===this.etal_spec[t].freeters?this._joinEtAl(e):2===this.etal_spec[t].freeters?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e):1===this.etal_spec[t].persons[r]?this._joinEtAl(e):2===this.etal_spec[t].persons[r]?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e)},we.NameOutput.prototype.joinInstitutionSets=function(e,t){return e=this._purgeEmptyBlobs(e),1===this.etal_spec[t].institutions?this._joinEtAl(e,"institution"):2===this.etal_spec[t].institutions?this._joinEllipsis(e,"institution"):this._joinAnd(e)},we.NameOutput.prototype.joinPersonsAndInstitutions=function(e){e=this._purgeEmptyBlobs(e);e=this._join(e,this.state.tmp.name_delimiter);return e.isInstitution=!0,e},we.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){return e=this._purgeEmptyBlobs(e),this._join(e,"[never here]",this.with.single,this.with.multiple)},we.NameOutput.prototype._getAfterInvertedName=function(e,t,r){return r&&1<e.length&&"after-inverted-name"===this.state.inheritOpt(this.name,"delimiter-precedes-last")&&0<(e=e[e.length-2]).blobs.length&&e.blobs[0].isInverted&&(r.strings.prefix=t),r},we.NameOutput.prototype._getAndJoin=function(e,t){var r,i=!1;return 1<e.length&&(r="single",2<e.length&&(r="multiple"),i=(e[e.length-1].isInstitution?this.institution:this.name).and[r],i=JSON.parse(JSON.stringify(i)),i=this._getAfterInvertedName(e,t,i)),i},we.NameOutput.prototype._joinEtAl=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),t=this._join(e,t);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(t,"literal",!0),1<e.length?this.state.output.append(this["et-al"].multiple,"literal",!0):1===e.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},we.NameOutput.prototype._joinEllipsis=function(e){var t,r=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=!1;return 1<e.length&&(t="single",2<e.length&&(t="multiple"),i=JSON.parse(JSON.stringify(this.name.ellipsis[t])),i=this._getAfterInvertedName(e,r,i)),this._join(e,r,i)},we.NameOutput.prototype._joinAnd=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=this._getAndJoin(e,t);return this._join(e,t,r)},we.NameOutput.prototype._join=function(e,t,r){if(!e)return!1;if(!(e=this._purgeEmptyBlobs(e)).length)return!1;if(1<e.length)if(2===e.length)r?e=[e[0],r,e[1]]:e[0].strings.suffix+=t;else{for(var i=r?1:0,s=e.pop(),n=0,a=e.length-i;n<a;n++)e[n].strings.suffix+=t;e.push(r),e.push(s)}for(this.state.output.openLevel(),n=0,a=e.length;n<a;n+=1)this.state.output.append(e[n],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},we.NameOutput.prototype._getToken=function(e){var t=this[e];return"institution"===e?new we.Token:t},we.NameOutput.prototype.checkCommonAuthor=function(e){var t;return!(!e||(e=!1,2===this.variables.length&&((t=this.variables.slice()).sort(),e=t.join("")),!e)||(t=!1,(t=!!this.state.locale[this.state.opt.lang].terms[e]||t)?(e=this.Item[this.variables[0]],t=this.Item[this.variables[1]],!0===(e=this._compareNamesets(e,t))&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),e):(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),1)))},we.NameOutput.prototype.setCommonTerm=function(){var e=this.variables.slice();if(e.sort(),this.common_term=e.join(""),this.common_term){e=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?e=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(e=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!e||this.variables.length<2)this.common_term=!1;else for(var t=0,r=this.variables.length-1;t<r;t+=1){var i=this.variables[t],s=this.variables[t+1];if(this.freeters[i].length||this.freeters[s].length){if(this.etal_spec[i].freeters!==this.etal_spec[s].freeters||!this._compareNamesets(this.freeters[i],this.freeters[s]))return void(this.common_term=!1);0}if(this.persons[i].length!==this.persons[s].length)return void(this.common_term=!1);for(var n=0,a=this.persons[i].length;n<a;n+=1)if(this.etal_spec[i].persons[n]!==this.etal_spec[s].persons[n]||!this._compareNamesets(this.persons[i][n],this.persons[s][n]))return void(this.common_term=!1)}}},we.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,i=t.length;r<i;r+=1)for(var s=0,n=we.NAME_PARTS.length;s<n;s+=1){var a=we.NAME_PARTS[s];if(!e[r]||e[r][a]!=t[r][a])return!1}return!0},we.NameOutput.prototype.constrainNames=function(){for(var e=this.names_count=0,t=this.variables.length;e<t;e+=1){var r=this.variables[e],i=this.nameset_base+e;this.freeters[r].length&&(this.state.tmp.names_max.push(this.freeters[r].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,r,i),this.names_count+=this.freeters[r].length),this.institutions[r].length&&(this.state.tmp.names_max.push(this.institutions[r].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,r,i),this.persons[r]=this.persons[r].slice(0,this.institutions[r].length),this.names_count+=this.institutions[r].length);for(var s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&(this.state.tmp.names_max.push(this.persons[r][s].length,"literal"),this._imposeNameConstraints(this.persons[r],this.persons_count[r],s,i),this.names_count+=this.persons[r][s].length)}},we.NameOutput.prototype._imposeNameConstraints=function(e,t,r,i){var s=e[r],n=this.state.tmp["et-al-min"],a=(this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]?n=this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(n=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]>this.etal_use_first?n=t[r]<this.etal_min?t[r]:this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(n=this.etal_use_first),this.etal_use_last&&n>this.etal_min-2&&(n=this.etal_min-2)),this.etal_min>=this.etal_use_first),o=t[r]>n;n>t[r]&&(n=s.length),a&&o&&(this.etal_use_last?e[r]=s.slice(0,n).concat(s.slice(-1)):e[r]=s.slice(0,n)),this.state.tmp.disambig_settings.names[i]=e[r].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},we.NameOutput.prototype.disambigNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1){var r=this.variables[e],i=this.nameset_base+e;if(this.freeters[r].length&&this._runDisambigNames(this.freeters[r],i),this.institutions[r].length){void 0===this.state.tmp.disambig_settings.givens[i]&&(this.state.tmp.disambig_settings.givens[i]=[]);for(var s=0,n=this.institutions[r].length;s<n;s+=1)void 0===this.state.tmp.disambig_settings.givens[i][s]&&this.state.tmp.disambig_settings.givens[i].push(2)}for(s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&this._runDisambigNames(this.persons[r][s],i)}},we.NameOutput.prototype._runDisambigNames=function(e,t){for(var r,i,s,n,a,o=0,l=e.length;o<l;o+=1)if(e[o].given||e[o].family){if(i=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[o],o),void 0===this.state.tmp.disambig_settings.givens[t])for(var u=0,m=t+1;u<m;u+=1)this.state.tmp.disambig_settings.givens[u]||(this.state.tmp.disambig_settings.givens[u]=[]);void 0===this.state.tmp.disambig_settings.givens[t][o]&&(r=this.state.inheritOpt(this.name,"form","name-form","long"),a=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,i),this.state.tmp.disambig_settings.givens[t].push(a)),r=this.state.inheritOpt(this.name,"form","name-form","long"),s=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,i),this.state.tmp.disambig_request?(a=n=1!==(n=this.state.tmp.disambig_settings.givens[t][o])||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&void 0!==e[o].given?n:2,this.state.opt["disambiguate-add-givenname"]&&e[o].given&&(a=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,a,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))):a=s,!this.state.tmp.just_looking&&this.item&&this.item.position===we.POSITION_FIRST&&a<s&&(a=s),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][o]=a,"string"!=typeof i)||void 0!==this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0)}},we.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,(e=void 0===e?{}:e).position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},we.NameOutput.prototype.setEtAlParameters=function(){for(var e,t,r=0,i=this.variables.length;r<i;r+=1){var s=this.variables[r];for(void 0===this.etal_spec[s]&&(this.etal_spec[s]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+r]=this.etal_spec[s],this.freeters[s].length&&this._setEtAlParameter("freeters",s),e=0,t=this.persons[s].length;e<t;e+=1)void 0===this.etal_spec[s][e]&&(this.etal_spec[s].persons[e]=0),this._setEtAlParameter("persons",s,e);this.institutions[s].length&&this._setEtAlParameter("institutions",s)}},we.NameOutput.prototype._setEtAlParameter=function(e,t,r){var i,s="persons"===e?(i=this.persons[t][r],this.persons_count[t][r]):(i=this[e][t],this[e+"_count"][t]);i.length<s&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===e?this.etal_spec[t].persons[r]=2:this.etal_spec[t][e]=2:"persons"===e?this.etal_spec[t].persons[r]=1:this.etal_spec[t][e]=1:"persons"===e?this.etal_spec[t].persons[r]=0:this.etal_spec[t][e]=0},we.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];!this.freeters[i].length&&!this.institutions[i].length||this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1),e=this.nameset_base+t,this.freeters[i].length&&(this.freeters[i]=this._renderNames(i,this.freeters[i],e));for(var s=0,n=this.institutions[i].length;s<n;s+=1)this.persons[i][s]=this._renderNames(i,this.persons[i][s],e,s)}this.renderInstitutionNames()},we.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var r=this.variables[e],i=0,s=this.institutions[r].length;i<s;i+=1){var n=this.institutions[r][i],a=this.state.tmp.extension?["sort"]:n.isInstitution||n.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons,o={primary:"locale-orig",secondary:!1,tertiary:!1};if(a)for(var l=["primary","secondary","tertiary"],u=0,m=l.length;u<m&&!(a.length-1<u);u+=1)a[u]&&(o[l[u]]="locale-"+a[u]);else o.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(o.secondary=!1,o.tertiary=!1),this.setRenderedName(n);n=this._renderInstitutionName(r,n,o,i);this.institutions[r][i]=n}},we.NameOutput.prototype._renderInstitutionName=function(e,t,r,i){var s,n,a,o,l,u,m=this.getName(t,r.primary,!0),p=m.name,c=m.usedOrig,p=p&&this.fixupInstitution(p,e,i),h=(u=!1,r.secondary&&(u=(m=this.getName(t,r.secondary,!1,c)).name,c=m.usedOrig,u=u&&this.fixupInstitution(u,e,i)),s=!1,r.tertiary&&(s=(s=(m=this.getName(t,r.tertiary,!1,c)).name)&&this.fixupInstitution(s,e,i)),{l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}});switch(p&&(h.l.pri=p.long,h.s.pri=p.short.length?p.short:p.long),u&&(h.l.sec=u.long,h.s.sec=u.short.length?u.short:u.long),s&&(h.l.ter=s.long,h.s.ter=s.short.length?s.short:s.long),this.institution.strings["institution-parts"]){case"short":o=p.short.length?(a=this._getShortStyle(),[this._composeOneInstitutionPart([h.s.pri,h.s.sec,h.s.ter],r,a,e)]):(n=this._getLongStyle(p,e,i),[this._composeOneInstitutionPart([h.l.pri,h.l.sec,h.l.ter],r,n,e)]);break;case"short-long":n=this._getLongStyle(p,e,i),a=this._getShortStyle(),o=[l=this._renderOneInstitutionPart(p.short,a),this._composeOneInstitutionPart([h.l.pri,h.l.sec,h.l.ter],r,n,e)];break;case"long-short":n=this._getLongStyle(p,e,i),a=this._getShortStyle(),l=this._renderOneInstitutionPart(p.short,a),o=[this._composeOneInstitutionPart([h.l.pri,h.l.sec,h.l.ter],r,n,e),l];break;default:n=this._getLongStyle(p,e,i),o=[this._composeOneInstitutionPart([h.l.pri,h.l.sec,h.l.ter],r,n,e)]}t=this._join(o," ");return t&&(t.isInstitution=!0),this.state.tmp.name_node.children.push(t),t},we.NameOutput.prototype._composeOneInstitutionPart=function(e,t,r){var i,s,n=!1,a=!1,o=!1;if(e[0]){if(i=we.Util.cloneToken(r),this.state.opt.citeAffixes[t.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[t.primary].prefix){for(var l=!1,u=0,m=i.decorations.length;u<m;u+=1)"@font-style"===r.decorations[u][0]&&"italic"===i.decorations[u][1]&&(l=!0);l||i.decorations.push(["@font-style","italic"])}n=this._renderOneInstitutionPart(e[0],i)}return e[1]&&(a=this._renderOneInstitutionPart(e[1],r)),e[2]&&(o=this._renderOneInstitutionPart(e[2],r)),a||o?(this.state.output.openLevel("empty"),this.state.output.append(n),e=we.Util.cloneToken(r),t.secondary&&(e.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,e.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,e.strings.prefix||(e.strings.prefix=" ")),(s=new we.Token).decorations.push(["@font-style","normal"]),s.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(s),this.state.output.append(a,e),this.state.output.closeLevel(),s=we.Util.cloneToken(r),t.tertiary&&(s.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,s.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,s.strings.prefix||(s.strings.prefix=" ")),(a=new we.Token).decorations.push(["@font-style","normal"]),a.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(a),this.state.output.append(o,s),this.state.output.closeLevel(),this.state.output.closeLevel(),this.state.output.pop()):n},we.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var r=0,i=e.length;r<i;r+=1)if(e[r]){var s=e[r];if(this.state.tmp.strip_periods)s=s.replace(/\./g,"");else for(var n=0,a=t.decorations.length;n<a;n+=1)if("@strip-periods"===t.decorations[n][0]&&"true"===t.decorations[n][1]){s=s.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,we.LITERAL),"!here>>>"===s?e[r]=!1:(this.state.output.append(s,t,!0),e[r]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])},we.NameOutput.prototype._renderNames=function(e,t,r,i){var s=!1;if(t.length){for(var n=[],a=0,o=t.length;a<o;a+=1){var l,u=t[a],m=this.state.tmp.extension?["sort"]:u.isInstitution||u.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons,p={primary:"locale-orig",secondary:!1,tertiary:!1};if(m)for(var c=["primary","secondary","tertiary"],h=0,f=c.length;h<f&&!(m.length-1<h);h+=1)p[c[h]]="locale-"+m[h];else p.primary="locale-translat";!this.state.tmp.sort_key_flag&&("bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position)||(p.secondary=!1,p.tertiary=!1),this.setRenderedName(u),u.literal||u.isInstitution?n.push(this._renderInstitutionName(e,u,p,i)):(u=this._renderPersonalName(e,u,p,r,a,i),l=we.Util.cloneToken(this.name),this.state.output.append(u,l,!0),n.push(this.state.output.pop()))}s=this.joinPersons(n,r,i)}return s},we.NameOutput.prototype._renderPersonalName=function(e,t,r,i,s,n){var a=this.getName(t,r.primary,!0),o=this._renderOnePersonalName(a.name,i,s,n),l=!1,u=(r.secondary&&(a=this.getName(t,r.secondary,!1,a.usedOrig)).name&&(l=this._renderOnePersonalName(a.name,i,s,n)),!1);return r.tertiary&&(a=this.getName(t,r.tertiary,!1,a.usedOrig)).name&&(u=this._renderOnePersonalName(a.name,i,s,n)),l||u?(this.state.output.openLevel("empty"),this.state.output.append(o),t=new we.Token,r.secondary&&(t.strings.prefix=this.state.opt.citeAffixes.persons[r.secondary].prefix,t.strings.suffix=this.state.opt.citeAffixes.persons[r.secondary].suffix,t.strings.prefix||(t.strings.prefix=" ")),this.state.output.append(l,t),a=new we.Token,r.tertiary&&(a.strings.prefix=this.state.opt.citeAffixes.persons[r.tertiary].prefix,a.strings.suffix=this.state.opt.citeAffixes.persons[r.tertiary].suffix,a.strings.prefix||(a.strings.prefix=" ")),this.state.output.append(u,a),this.state.output.closeLevel(),this.state.output.pop()):o},we.NameOutput.prototype._isRomanesque=function(e){var t,r=2;return r=2==(r=!(r=e.family.replace(/\"/g,"").match(we.ROMANESQUE_REGEXP)?r:0)&&e.given&&e.given.match(we.STARTSWITH_ROMANESQUE_REGEXP)?1:r)&&(e.multi&&e.multi.main?t=e.multi.main.slice(0,2):this.Item.language&&(t=this.Item.language.slice(0,2)),-1<["ja","zh"].indexOf(t))?1:r},we.NameOutput.prototype._renderOnePersonalName=function(e,t,r,i){var s=this._droppingParticle(e,t,i),n=this._familyName(e),a=this._nonDroppingParticle(e),t=this._givenName(e,t,r),o=t.blob,l=this._nameSuffix(e);!1===o&&(l=s=!1);var u=(u=this.state.inheritOpt(this.name,"sort-separator"))||"",m=e["comma-suffix"]?", ":" ",p=this._isRomanesque(e);var c,h,f,d=function e(t){return!!t&&("string"==typeof t.blobs?-1<["’","'","-"," "].indexOf(t.blobs.slice(-1)):e(t.blobs[t.blobs.length-1]))}(a),g=-1<["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))?" ":" ";return 0===p?c=this._join([a,n,o],""):1===p||e["static-ordering"]?(h=this._join([a,n],g),c=this._join([h,o]," ")):e["reverse-ordering"]?(h=this._join([a,n],g),c=this._join([o,h]," ")):this.state.tmp.sort_key_flag?c=(h="never"===this.state.opt["demote-non-dropping-particle"]?(h=this._join([a,n],g),h=this._join([h,s]," "),this._join([h,o],this.state.opt.sort_sep)):(f=this._join([o,s,a]," "),this._join([n,f],this.state.opt.sort_sep)),this._join([h,l]," ")):"all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===r&&(0===i||void 0===i)?(-1<["Lord","Lady"].indexOf(e.given)&&(u=", "),h=-1<["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])?(f=this._join([o,s],e["comma-dropping-particle"]+" "),(f=this._join([f,a]," "))&&this.given&&(f.strings.prefix=this.given.strings.prefix,f.strings.suffix=this.given.strings.suffix),n&&this.family&&(n.strings.prefix=this.family.strings.prefix,n.strings.suffix=this.family.strings.suffix),this._join([n,f],u)):((p=d?this._join([a,n],""):this._join([a,n],g))&&this.family&&(p.strings.prefix=this.family.strings.prefix,p.strings.suffix=this.family.strings.suffix),(f=this._join([o,s],e["comma-dropping-particle"]+" "))&&this.given&&(f.strings.prefix=this.given.strings.prefix,f.strings.suffix=this.given.strings.suffix),this._join([p,f],u)),(c=this._join([h,l],u)).isInverted=!0):(e["dropping-particle"]&&e.family&&!e["non-dropping-particle"]&&(r=e["dropping-particle"],-1<["'","ʼ","’","-"].indexOf(r.slice(-1)))&&"de"!==r.slice(0,-1)&&(n=this._join([s,n],""),s=!1),f=d?(f=this._join([a,n],""),this._join([s,f],g)):this._join([s,a,n],g),(f=this._join([f,l],m))&&this.family&&(f.strings.prefix=this.family.strings.prefix,f.strings.suffix=this.family.strings.suffix),o&&this.given&&(o.strings.prefix=this.given.strings.prefix,o.strings.suffix=this.given.strings.suffix),f.strings.prefix&&(e["comma-dropping-particle"]=""),i=this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&1===t.initializationLevel?g:" ",c=this._join([o,f],e["comma-dropping-particle"]+i)),this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,we.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(c),c},we.NameOutput.prototype._normalizeNameInput=function(e){e={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(e),e},we.NameOutput.prototype._stripPeriods=function(e,t){var r=this[e+"_decor"];if(t)if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(r)for(var i=0,s=r.decorations.length;i<s;i+=1)if("@strip-periods"===r.decorations[i][0]&&"true"===r.decorations[i][1]){t=t.replace(/\./g,"");break}return t},we.NameOutput.prototype._nonDroppingParticle=function(e){e=e["non-dropping-particle"],e&&this.state.tmp.sort_key_flag&&(e=e.replace(/[\'\u2019]/,"")),e=this._stripPeriods("family",e);return!!this.state.output.append(e,this.family_decor,!0)&&this.state.output.pop()},we.NameOutput.prototype._droppingParticle=function(e,t,r){var i=e["dropping-particle"],i=(i&&this.state.tmp.sort_key_flag&&(i=i.replace(/[\'\u2019]/,"")),this._stripPeriods("given",i));if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===r?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:void 0===r?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(i,this.given_decor,!0))return this.state.output.pop();return!1},we.NameOutput.prototype._familyName=function(e){e=this._stripPeriods("family",e.family);return!!this.state.output.append(e,this.family_decor,!0)&&this.state.output.pop()},we.NameOutput.prototype._givenName=function(e,t,r){var i="long"!==this.state.inheritOpt(this.name,"form","name-form","long"),s=!1!==this.state.inheritOpt(this.name,"initialize"),n="string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&!e.block_initialize,t=(r=e["full-form-always"]?2:(i=i?0:n?1:2)<(t=this.state.tmp.disambig_settings.givens[t][r])?t:i,this.state.citation.opt["givenname-disambiguation-rule"]);if(t&&"-with-initials"===t.slice(-14)&&(n=!0),e.family&&1===r)n?(i=this.state.inheritOpt(this.name,"initialize-with",!1,""),e.given=we.Util.Names.initializeWith(this.state,e.given,i,!s)):e.given=we.Util.Names.unInitialize(this.state,e.given);else{if(0===r)return{blob:!1};2===r&&(e.given=we.Util.Names.unInitialize(this.state,e.given))}t=this._stripPeriods("given",e.given);return this.state.output.append(t,this.given_decor,!0)?{blob:this.state.output.pop(),initializationLevel:r}:{blob:!1}},we.NameOutput.prototype._nameSuffix=function(e){var e=e.suffix,t=(e&&"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(e=we.Util.Names.initializeWith(this.state,e,this.state.inheritOpt(this.name,"initialize-with"),!0)),"");return(e=this._stripPeriods("family",e))&&"."===e.slice(-1)&&(e=e.slice(0,-1),t="."),!!this.state.output.append(e,"empty",!0)&&((e=this.state.output.pop()).strings.suffix=t+e.strings.suffix,e)},we.NameOutput.prototype._getLongStyle=function(e){e=e.short.length&&this.institutionpart["long-with-short"]||this.institutionpart.long;return e=e||new we.Token},we.NameOutput.prototype._getShortStyle=function(){var e=this.institutionpart.short||new we.Token;return e},we.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&void 0!==e["parse-names"])return e;var t;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0),e.family&&'"'===e.family.slice(0,1)&&'"'===e.family.slice(-1)||!e["parse-names"]&&void 0!==e["parse-names"]?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&!e["static-particles"]&&we.parseParticles(e,!0)},we.NameOutput.prototype.getName=function(e,t,r,i){if(i&&"locale-orig"===t)return{name:!1,usedOrig:i};e.family||(e.family=""),e.given||(e.given="");var s,n={},a=(n["static-ordering"]=this.getStaticOrder(e),!0);if("locale-orig"!==t&&(a=!1,e.multi))for(var o=this.state.opt[t],l=0,u=o.length;l<u;l+=1)if(s=o[l],e.multi._key[s]){var a=!0,m=e.isInstitution;(e=e.multi._key[s]).isInstitution=m,(n=this.getNameParams(s)).transliterated=!0;break}return a||(s=!1,e.multi&&e.multi.main?s=e.multi.main:this.Item.language&&(s=this.Item.language),s&&(n=this.getNameParams(s))),r||a?(e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),!(e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":n["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":n["reverse-ordering"],"full-form-always":n["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:n.transliterated,block_initialize:n["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi}).literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),{name:e=this._normalizeNameInput(e),usedOrig:i||!a}):{name:!1,usedOrig:i}},we.NameOutput.prototype.getNameParams=function(e){var t={},r=we.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[r.best]?r.best:this.state.opt["default-locale"][0],i=this.state.locale[r].opts["name-as-sort-order"],s=this.state.locale[r].opts["name-as-reverse-order"],r=this.state.locale[r].opts["name-never-short"],e=e.split("-")[0];return i&&i[e]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),s&&s[e]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),r&&r[e]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t},we.NameOutput.prototype.setRenderedName=function(e){if("bibliography"===this.state.tmp.area){for(var t="",r=0,i=we.NAME_PARTS.length;r<i;r+=1)e[we.NAME_PARTS[r]]&&(t+=e[we.NAME_PARTS[r]]);this.state.tmp.rendered_name.push(t)}},we.NameOutput.prototype.fixupInstitution=function(t,e,r){!t.literal&&t.family&&(t.literal=t.family,delete t.family);var i,t=t.literal,s=t,n={long:t.split(/\s*\|\s*/),short:s.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if("short"===this.institution.strings.form){let e=this.Item.jurisdiction;e=this.state.transform.loadAbbreviation(e,"institution-entire",t,this.Item.language),this.state.transform.abbrevs[e]["institution-entire"][t]?t=this.state.transform.abbrevs[e]["institution-entire"][t]:(e=this.Item.jurisdiction,e=this.state.transform.loadAbbreviation(e,"institution-part",t,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][t]&&(t=this.state.transform.abbrevs[e]["institution-part"][t])),t=this._quashChecks(e,t)}if(-1<["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])&&(i=this.Item.jurisdiction,i=this.state.transform.loadAbbreviation(i,"institution-part",s,this.Item.language),this.state.transform.abbrevs[i]["institution-part"][s]&&(s=this.state.transform.abbrevs[i]["institution-part"][s]),s=this._quashChecks(i,s),-1<["short-long","long-short"].indexOf(this.institution.strings["institution-parts"]))&&s===t&&(s=""),n.long=t.split(/\s*\|\s*/),n.short=s.split(/\s*\|\s*/),-1<["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"]))for(var a=n.short.length-1;-1<a;a--){var o=this.Item.jurisdiction,l=n.short[a],o=this.state.transform.loadAbbreviation(o,"institution-part",l,this.Item.language);this.state.transform.abbrevs[o]["institution-part"][l]&&(n.short[a]=this.state.transform.abbrevs[o]["institution-part"][l]),-1<n.short[a].indexOf("|")&&(l=(o=n.short)[a].split(/\s*\|\s*/),n.short=o.slice(0,a).concat(l).concat(o.slice(a+1)))}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&n.short.reverse(),n.short=this._trimInstitution(n.short),this.institution.strings["reverse-order"]&&n.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){var u=this.Item.jurisdiction,m=this.state.tmp.abbrev_trimmer;if(m&&m[u]&&m[u][e])for(var p=0,c=n.short.length;p<c;p++){var h=n.short[p];n.short[p]=h.replace(m[u][e],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&n.long.reverse(),n.long=this._trimInstitution(n.long),this.institution.strings["reverse-order"]&&n.long.reverse(),n},we.NameOutput.prototype.getStaticOrder=function(e,t){var r=!1;return r=!t&&e["static-ordering"]||0===this._isRomanesque(e)||(!e.multi||!e.multi.main)&&this.Item.language&&-1<["vi","hu"].indexOf(this.Item.language)||e.multi&&e.multi.main&&-1<["vi","hu"].indexOf(e.multi.main.slice(0,2))||this.state.opt["auto-vietnamese-names"]&&we.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&we.VIETNAMESE_SPECIALS.exec(e.family+e.given)?!0:r},we.NameOutput.prototype._quashChecks=function(e,t){var r=(t=this.state.transform.quashCheck(e,t)).split(/>>[0-9]{4}>>/),i=t.match(/>>([0-9]{4})>>/),s=(t=r.pop(),this.Item["original-date"]||this.Item.issued);if(s&&(s=parseInt(s.year,10),s=!isNaN(s)&&s),s){if(0<r.length)for(var n=i.length-1;0<n&&!(s>=parseInt(i[n],10));n--)t=r.pop();t=t.replace(/\s*\|\s*/g,"|")}return t},we.NameOutput.prototype._trimInstitution=function(e){var t=!1,r=!1,i=!1,s=!1,n=e.slice();return this.institution&&(void 0!==this.institution.strings["use-first"]&&(t=this.institution.strings["use-first"]),void 0!==this.institution.strings["use-last"]&&(i=this.institution.strings["use-last"]),void 0!==this.institution.strings["stop-first"]&&(s=this.institution.strings["stop-first"]),void 0!==this.institution.strings["stop-last"]&&(r=this.institution.strings["stop-last"]),t&&(n=(n=r?n.slice(0,-1*r):n).slice(0,t)),i&&(r=e.slice(),t?s=t:n=[],r=(r=s?r.slice(s):r).slice(-1*i),n=n.concat(r)),e=n),e},we.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]},we.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},we.PublisherOutput.prototype.composeAndBlob=function(){var e=!(this.and_blob={}),t=("text"===this.group_tok.strings.and?e=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(e="&"),new we.Token),r=(t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0),this.state.output.pop()),t=(t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0),this.state.output.pop());this.and_blob.single=!1,this.and_blob.multiple=!1,e&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=t:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=r,this.and_blob.multiple=r):(this.and_blob.single=r,this.and_blob.multiple=t))},we.PublisherOutput.prototype.composeElements=function(){for(var e=0;e<2;e+=1)for(var t=["publisher","publisher-place"][e],r=0,i=this["publisher-list"].length;r<i;r+=1){var s=this[t+"-list"][r],n=this[t+"-token"];this.state.output.append(s,n,!0),this[t+"-list"][r]=this.state.output.pop()}},we.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,r=this["publisher-list"].length;t<r;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)},we.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],e=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(e,"literal")},we.PublisherOutput.prototype._join=we.NameOutput.prototype._join,we.PublisherOutput.prototype._getToken=we.NameOutput.prototype._getToken,we.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},we.evaluateLabel=function(e,t,r,i){var s="locator"===e.strings.term?(s=i&&i.label?"sub verbo"===i.label?"sub-verbo":i.label:s)||"page":e.strings.term,n=e.strings.plural;return"number"!=typeof n&&(i=i&&"locator"===e.strings.term?i:r)[e.strings.term]&&(t.processNumber(!1,i,e.strings.term,r.type),n=t.tmp.shadow_numbers[e.strings.term].plural,t.tmp.shadow_numbers[e.strings.term].labelForm||t.tmp.shadow_numbers[e.strings.term].labelDecorations||(e.strings.form?t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form:t.tmp.group_context.tip.label_form&&(t.tmp.shadow_numbers[e.strings.term].labelForm=t.tmp.group_context.tip.label_form),t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),-1<["locator","number","page"].indexOf(e.strings.term)&&t.tmp.shadow_numbers[e.strings.term].label&&(s=t.tmp.shadow_numbers[e.strings.term].label),e.decorations)&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()),we.castLabel(t,e,s,n,we.TOLERANT)},we.castLabel=function(e,t,r,i,s){var n=t.strings.form,a=t.strings.capitalize_if_first,o=(e.tmp.group_context.tip.label_form&&("static"===n?e.tmp.group_context.tip.label_static=!0:n=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(a=e.tmp.group_context.tip.label_capitalize_if_first),e.getTerm(r,n,i,!1,s,t.default_locale));if(a&&(o=we.Output.Formatters["capitalize-first"](e,o)),e.tmp.strip_periods)o=o.replace(/\./g,"");else for(var l=0,u=t.decorations.length;l<u;l+=1)if("@strip-periods"===t.decorations[l][0]&&"true"===t.decorations[l][1]){o=o.replace(/\./g,"");break}return o},we.Node.name={build:function(e,t){var r;-1<[we.SINGLETON,we.START].indexOf(this.tokentype)&&(void 0===e.tmp.root?(r=void 0,e.tmp.root="citation"):r=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=we.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=we.POSITION),e.tmp.root=r,r=function(e){e.tmp.etal_term="et-al",e.tmp.name_delimiter=e.inheritOpt(this,"delimiter","name-delimiter",", "),e.tmp["delimiter-precedes-et-al"]=e.inheritOpt(this,"delimiter-precedes-et-al"),"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")&&(e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&"),e.tmp.and_term=this.and_term,we.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.name_delimiter&&(this.and_prefix_multiple=e.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.name_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===e.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=e.tmp.name_delimiter),this.and_prefix_multiple)&&(this.and_prefix_multiple=" "),this.and={},e.inheritOpt(this,"and")?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):e.tmp.name_delimiter&&(this.and.single=new we.Blob(e.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new we.Blob(e.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},e.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="…",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=e.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new we.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new we.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===e.tmp["et-al-min"]&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),void 0===e.tmp["et-al-use-first"]&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),void 0===e.tmp["et-al-use-last"]&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last")),e.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(r)),t.push(this)}},we.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}},we.Node.names={build:function(e,t){if(this.tokentype!==we.START&&this.tokentype!==we.SINGLETON||(we.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===we.SINGLETON){for(var r in e.build.names_variables[e.build.names_variables.length-1].concat(this.variables),this.variables){var i=this.variables[r],s=e.build.name_label[e.build.name_label.length-1];Object.keys(s).length&&(s[i]=s[Object.keys(s)[0]])}this.execs.push(function(e){e.nameOutput.reinit(this,this.variables_real[0])})}if(this.tokentype===we.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),this.execs.push(function(e){e.tmp.can_substitute.push(!0),e.tmp.name_node={},e.tmp.name_node.children=[],e.nameOutput.init(this)})),this.tokentype===we.END){for(r=0;r<3;r+=1){var n=["family","given","et-al"][r];this[n]=e.build[n],1===e.build.names_level&&(e.build[n]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),this.execs.push(function(e){e.tmp.etal_node?this.etal_style=e.tmp.etal_node:this.etal_style="empty",this.etal_term=e.getTerm(e.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=e.tmp.name_delimiter,"always"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=e.tmp.name_delimiter:"never"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===e.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=e.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",we.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(" "===this.etal_prefix_single&&(this.etal_prefix_single="")," "===this.etal_prefix_multiple&&(this.etal_prefix_multiple="")," "===this.etal_suffix&&(this.etal_suffix=""));for(var t=0;t<3;t+=1){var r=["family","given"][t];e.nameOutput[r]=this[r]}e.nameOutput.with=this.with;var i="",s="",n=(we.STARTSWITH_ROMANESQUE_REGEXP.test("with")&&(s=i=" "),{});n.single=new we.Blob("with"),n.single.strings.suffix=s,n.multiple=new we.Blob("with"),n.multiple.strings.suffix=s,"always"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(n.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),n.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(n.single.strings.prefix=i,n.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):("after-inverted-name"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?n.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"):n.single.strings.prefix=i,n.multiple.strings.prefix=i),e.nameOutput.with=n,e.nameOutput.label=this.label,e.nameOutput.etal_style=this.etal_style,e.nameOutput.etal_term=this.etal_term,e.nameOutput.etal_prefix_single=this.etal_prefix_single,e.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,e.nameOutput.etal_suffix=this.etal_suffix,e.nameOutput.outputNames(),e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-last"]=void 0}),this.execs.push(function(e){e.tmp.can_substitute.pop()||e.tmp.can_substitute.replace(!1,we.LITERAL),1===e.tmp.can_substitute.mystack.length&&(e.tmp.can_block_substitute=!1)}),e.build.name_flag=!1}t.push(this),this.tokentype!==we.END&&this.tokentype!==we.SINGLETON||(e.build.substitute_level.pop(),we.Util.substituteEnd.call(this,e,t))}},we.Node.number={build:function(e,t){we.Util.substituteStart.call(this,e,t),"roman"===this.strings.form?this.formatter=e.fun.romanizer:"ordinal"===this.strings.form?this.formatter=e.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=e.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),this.execs.push(function(e,t,r){if(0!==this.variables.length){var i=this.variables[0];if(void 0===r&&(r={}),-1<["locator","locator-extra"].indexOf(i)){if(e.tmp.just_looking)return;if(!r[i])return}else if(!t[i])return;"collection-number"===i&&"legal_case"===t.type&&(e.tmp.renders_collection_number=!0);if(e.tmp.group_context.tip.force_suppress)return!1;-1<["locator","locator-extra"].indexOf(i)?e.processNumber.call(e,this,r,i,t.type):(!e.tmp.group_context.tip.condition&&t[i]&&(e.tmp.just_did_number=(""+t[i]).match(/[0-9]$/)),e.processNumber.call(e,this,t,i,t.type)),this.substring?(r=t[i].slice(this.substring),e.output.append(r,this)):we.Util.outputNumericField(e,i,t.id),-1<["locator","locator-extra"].indexOf(this.variables_real[0])&&!e.tmp.just_looking&&(e.tmp.done_vars.push(this.variables_real[0]),e.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}}),t.push(this),we.Util.substituteEnd.call(this,e,t)}},we.Node.sort={build:function(e,t){t=e[e.build.root+"_sort"].tokens,this.tokentype===we.START&&("citation"===e.build.area&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort",this.execs.push(function(e,t){if(e.opt.has_layout_locale){for(var r,i=we.localeResolve(t.language,e.opt["default-locale"][0]),s=e[e.tmp.area.slice(0,-5)].opt.sort_locales,n=0,a=s.length;n<a&&!(r=(r=s[n][i.bare])||s[n][i.best]);n+=1);r=r||e.opt["default-locale"][0],e.tmp.lang_sort_hold=e.opt.lang,e.opt.lang=r}})),this.tokentype===we.END&&(e.build.area=e.build.root,e.build.extension="",this.execs.push(function(e){e.opt.has_layout_locale&&(e.opt.lang=e.tmp.lang_sort_hold,delete e.tmp.lang_sort_hold)})),t.push(this)}},we.Node.substitute={build:function(e,t){var r;this.tokentype===we.START&&(r=new we.Token("choose",we.START),we.Node.choose.build.call(r,e,t),(r=new we.Token("if",we.SINGLETON)).tests=[function(){return!(!e.tmp.value.length||e.tmp.common_term_match_fail)}],r.test=e.fun.match.any(r,e,r.tests),t.push(r),this.execs.push(function(e){e.tmp.can_block_substitute=!0,e.tmp.value.length&&!e.tmp.common_term_match_fail&&e.tmp.can_substitute.replace(!1,we.LITERAL),e.tmp.common_term_match_fail=!1}),t.push(this)),this.tokentype===we.END&&(t.push(this),r=new we.Token("choose",we.END),we.Node.choose.build.call(r,e,t))}},we.Node.text={build:function(e,t){var o,a,s,n,l,u,m,r,i,p,c,h,f,d;this.postponed_macro?((p=we.Util.cloneToken(this)).name="group",p.tokentype=we.START,we.Node.group.build.call(p,e,t),we.expandMacro.call(e,this,t),(p=we.Util.cloneToken(this)).name="group",p.tokentype=we.END,"juris-locator-label"===this.postponed_macro&&(p.isJurisLocatorLabel=!0),we.Node.group.build.call(p,e,t)):(we.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),o="long",a=0,this.strings.form&&(o=this.strings.form),this.strings.plural&&(a=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0]?"citation-number"===this.variables_real[0]?("citation"===e.build.root&&(e.opt.update_mode=we.NUMERIC),"bibliography"===e.build.root&&(e.opt.bib_mode=we.NUMERIC),"citation-number"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,this.execs.push(d=function(e,t,r){var i;s=""+t.id,e.tmp.just_looking||("_sort"===e.tmp.area.slice(-5)&&"citation-number"===this.variables[0]?("bibliography_sort"===e.tmp.area&&e.tmp.group_context.tip.done_vars.push("citation-number"),i=(i="citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq]:e.registry.registry[t.id].seq)&&we.Util.padding(""+i),e.output.append(i,this)):(r&&r["author-only"]&&e.tmp.element_trace.replace("suppress-me"),i="bibliography_sort"!==e.tmp.area&&e.bibliography_sort.tmp.citation_number_map&&e.bibliography_sort.opt.citation_number_sort_direction===we.DESCENDING?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[s].seq]:e.registry.registry[s].seq,e.opt.citation_number_slug?e.output.append(e.opt.citation_number_slug,this):(l=new we.NumericBlob(e,!1,i,this,t.id),e.tmp.in_cite_predecessor&&(l.suppress_splice_prefix=!0),e.output.append(l,"literal"))))})):"year-suffix"===this.variables_real[0]?(e.opt.has_year_suffix=!0,"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),this.execs.push(d=function(e,t){if(e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.just_looking){n=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),e[e.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter),l=new we.NumericBlob(e,!1,n,this,t.id),m=new we.Util.Suffixator(we.SUFFIX_CHARS),l.setFormatter(m),e.output.append(l,"literal"),u=!1;for(var r=0,i=e.tmp.group_context.mystack.length;r<i;r++){var s=e.tmp.group_context.mystack[r];if(!s.variable_success&&(s.variable_attempt||!s.variable_attempt&&!s.term_intended)){u=!0;break}}m=e[e.tmp.area].opt["year-suffix-delimiter"],u&&m&&!e.tmp.sort_key_flag&&(e.tmp.splice_delimiter=e[e.tmp.area].opt["year-suffix-delimiter"])}})):"citation-label"===this.variables_real[0]&&("bibliography"===e.build.root&&(e.opt.bib_mode=we.TRIGRAPH),e.opt.has_year_suffix=!0,this.execs.push(d=function(e,t){r=(r=t["citation-label"])||e.getCitationLabel(t),e.tmp.just_looking||(i="",e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&(n=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),i=e.fun.suffixator.format(n)),r+=i),e.output.append(r,this)})):this.strings.term?(this.execs.push(d=function(e,t){var r,t=e.opt.gender[t.type],i=this.strings.term;if(""!==(i=e.getTerm(i,o,a,t,we.TOLERANT,this.default_locale))&&(e.tmp.group_context.tip.term_intended=!0),we.UPDATE_GROUP_CONTEXT_CONDITION(e,i,null,this),r=e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area?i:we.Output.Formatters["capitalize-first"](e,i),e.tmp.strip_periods)r=r.replace(/\./g,"");else for(var s=0,n=this.decorations.length;s<n;s+=1)if("@strip-periods"===this.decorations[s][0]&&"true"===this.decorations[s][1]){r=r.replace(/\./g,"");break}e.output.append(r,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,we.LITERAL)}),e.build.term=!1,e.build.form=!1,e.build.plural=!1):this.variables_real.length?(this.execs.push(d=function(e,t){"locator"!==this.variables_real[0]&&(e.tmp.have_collapsed=!1),!e.tmp.group_context.tip.condition&&t[this.variables[0]]&&(e.tmp.just_did_number=!1);t=t[this.variables[0]];t&&!e.tmp.group_context.tip.condition&&((""+t).slice(-1).match(/[0-9]/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)}),d=-1<we.MULTI_FIELDS.indexOf(this.variables_real[0])||-1<this.variables_real[0].indexOf("-main")||-1<this.variables_real[0].indexOf("-sub")||-1<["language-name","language-name-original"].indexOf(this.variables_real[0])?(p=this.variables[0],f=h=c=!1,"short"===o?"-short"!==this.variables_real[0].slice(-6)&&(h=this.variables_real[0]+"-short"):p=!1,e.build.extension?f=!0:c=f=!0,e.transform.getOutputFunction(this.variables,p,c,h,f)):-1<we.CITE_FIELDS.indexOf(this.variables_real[0])?function(e,t,r){r&&r[this.variables[0]]&&(e.processNumber(this,r,this.variables[0],t.type),we.Util.outputNumericField(e,this.variables[0],t.id),-1<["locator","locator-extra"].indexOf(this.variables_real[0]))&&!e.tmp.just_looking&&e.tmp.done_vars.push(this.variables_real[0])}:-1<["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])?function(e,t){e.processNumber(this,t,this.variables[0],t.type),we.Util.outputNumericField(e,this.variables[0],t.id)}:-1<["URL","DOI"].indexOf(this.variables_real[0])?function(e,t){var r,i,s,n;if(this.variables[0]&&(t=e.getVariable(t,this.variables[0],o)))if("URL"===this.variables[0]&&"short"===o&&(t=t.replace(/(.*\.[^\/]+)\/.*/,"$1")).match(/\/\/www\./)&&(t=t.replace(/https?:\/\//,"")),e.opt.development_extensions.wrap_url_and_doi)this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0]?e.output.append(t,this,!1,!1,!0):(r=we.Util.cloneToken(this),(i=new we.Blob(null,null,"url-wrapper")).decorations.push(["@DOI","true"]),"DOI"===this.variables_real[0]?(this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(s=(t=t.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//)?"":"https://doi.org/",r.strings.prefix=this.strings.prefix.slice(0,r.strings.prefix.length-16)),s=new we.Blob(s),n=new we.Blob(t),i.push(s)):n=new we.Blob(t),i.push(n),e.output.append(i,r,!1,!1,!0));else{if(this.decorations.length)for(var a=this.decorations.length-1;-1<a;a--)this.decorations[a][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,a).concat(this.decorations.slice(a+1)));e.output.append(t,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(e,t){t=e.getVariable(t,this.variables[0],o);t&&e.output.append(t,this)}:"hereinafter"===this.variables_real[0]?function(e,t){t=e.transform.abbrevs.default.hereinafter[t.id];t&&(e.output.append(t,this),e.tmp.group_context.tip.variable_success=!0)}:function(e,t){this.variables[0]&&(t=e.getVariable(t,this.variables[0],o))&&(t=(t=""+t).split("\\").join(""),e.output.append(t,this))},this.execs.push(d)):this.strings.value&&this.execs.push(d=function(e){e.tmp.group_context.tip.term_intended=!0,we.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.value,!0,this),e.output.append(this.strings.value,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,we.LITERAL)}),t.push(this),we.Util.substituteEnd.call(this,e,t))}},we.Node.intext={build:function(e,t){this.tokentype===we.START&&(e.build.area="intext",e.build.root="intext",e.build.extension="",this.execs.push(function(e,t){e.tmp.area="intext",e.tmp.root="intext",e.tmp.extension=""})),this.tokentype===we.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}},we.Attributes={},we.Attributes["@disambiguate"]=function(t,e){this.tests||(this.tests=[]),"true"===e?(t.opt.has_disambiguate=!0,this.tests.push(function(e){if("bibliography"===t.tmp.area){if(t.tmp.disambiguate_count<t.registry.registry[e.id].disambig.disambiguate)return t.tmp.disambiguate_count+=1,!0}else if(t.tmp.disambiguate_maxMax+=1,t.tmp.disambig_settings.disambiguate&&t.tmp.disambiguate_count<t.tmp.disambig_settings.disambiguate)return t.tmp.disambiguate_count+=1,!0;return!1})):"check-ambiguity-and-backreference"===e&&this.tests.push(function(e){return!!(t.registry.registry[e.id].disambig.disambiguate&&1<t.registry.registry[e.id]["citation-count"])})},we.Attributes["@is-numeric"]=function(s,e){this.tests||(this.tests=[]);for(var t=e.split(/\s+/),r=0;r<t.length;r+=1)this.tests.push(function(i){return function(e,t){var r=e;if((r=t&&-1<["locator","locator-extra"].indexOf(i)?t:r)[i])if(-1<we.NUMERIC_VARIABLES.indexOf(i)){if(s.tmp.shadow_numbers[i]||s.processNumber(!1,r,i,e.type),s.tmp.shadow_numbers[i].numeric)return!0}else if(-1<["title","version"].indexOf(i)&&r[i].slice(-1)===""+parseInt(r[i].slice(-1),10))return!0;return!1}}(t[r]))},we.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=0,s=r.length;i<s;i+=1)this.tests.push(function(t){return function(e){return!(!e[t]||!e[t].circa)}}(r[i]))},we.Attributes["@locator"]=function(i,e){this.tests||(this.tests=[]);for(var t=e.replace("sub verbo","sub-verbo"),r=0,s=(t=t.split(/\s+/)).length;r<s;r+=1)this.tests.push(function(r){return function(e,t){return i.processNumber(!1,t,"locator"),!(!(t=i.tmp.shadow_numbers.locator.label)||r!==t)}}(t[r]))},we.Attributes["@position"]=function(i,e){this.tests||(this.tests=[]),i.opt.update_mode=we.POSITION;for(var t,r=e.split(/\s+/),s=function(e,t){return!!(t&&we.POSITION_MAP[t.position]>=we.POSITION_MAP[we.POSITION_SUBSEQUENT]&&t["near-note"])},n=function(e,t){return!(!t||we.POSITION_MAP[t.position]!=we.POSITION_MAP[we.POSITION_SUBSEQUENT]||t["near-note"])},a=0,o=r.length;a<o;a+=1)"first"===(t=r[a])?t=we.POSITION_FIRST:"container-subsequent"===t?t=we.POSITION_CONTAINER_SUBSEQUENT:"subsequent"===t?t=we.POSITION_SUBSEQUENT:"ibid"===t?t=we.POSITION_IBID:"ibid-with-locator"===t&&(t=we.POSITION_IBID_WITH_LOCATOR),"near-note"===t?this.tests.push(s):"far-note"===t?this.tests.push(n):this.tests.push(function(r){return function(e,t){if("bibliography"!==i.tmp.area)if(t&&void 0===t.position&&(t.position=0),t&&"number"==typeof t.position){if(0===t.position&&0===r)return!0;if(0<r&&we.POSITION_MAP[t.position]>=we.POSITION_MAP[r])return!0}else if(0===r)return!0;return!1}}(t))},we.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=[],s=0,n=r.length;s<n;s+=1)i.push(function(t){return function(e){return e.type===t}}(r[s]));this.tests.push(e.fun.match.any(this,e,i))},we.Attributes["@variable"]=function(n,e){if(this.tests||(this.tests=[]),this.variables=e.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(-1<["names","date","text","number"].indexOf(this.name))this.execs.push(function(e,t,r){for(var i=this.variables.length-1;-1<i;i+=-1)this.variables.pop();for(var i=0,s=this.variables_real.length;i<s;i++)-1===e.tmp.done_vars.indexOf(this.variables_real[i])&&this.variables.push(this.variables_real[i]),e.tmp.can_block_substitute&&e.tmp.done_vars.push(this.variables_real[i])}),this.execs.push(function(e,t,r){for(var i=!1,s=0,n=this.variables.length;s<n;s++){var a=this.variables[s];if(-1<["authority","committee"].indexOf(a)&&"string"==typeof t[a]&&"names"===this.name){var o=!0,l=t[a].split(/\s*;\s*/),u={};if(t.multi&&t.multi._keys[a])for(var m in t.multi._keys[a])if(u[m]=t.multi._keys[a][m].split(/\s*;\s*/),u[m].length!==l.length){o=!1;break}o||(l=[t[a]],u=t.multi._keys[a]);for(var p=0,c=l.length;p<c;p++){var h={literal:l[p],multi:{_key:{}}};for(m in u){var f={literal:u[m][p]};h.multi._key[m]=f}l[p]=h}t[a]=l}if("short"!==this.strings.form||t[a]||("title"===a?a="title-short":"container-title"===a&&(a="container-title-short")),"year-suffix"===a){i=!0;break}if(-1<we.DATE_VARIABLES.indexOf(a)){if(e.opt.development_extensions.locator_date_and_revision&&"locator-date"===a){i=!0;break}if(t[a]){for(var d in t[a])if((-1!==this.dateparts.indexOf(d)||"literal"===d)&&t[a][d]){i=!0;break}if(i)break}}else{if("locator"===a){r&&r.locator&&(i=!0);break}if("locator-extra"===a){r&&r["locator-extra"]&&(i=!0);break}if(-1<["citation-number","citation-label"].indexOf(a)){i=!0;break}if("first-reference-note-number"===a){r&&r["first-reference-note-number"]&&(i=!0);break}if("first-container-reference-note-number"===a){r&&r["first-container-reference-note-number"]&&(i=!0);break}if("hereinafter"===a){e.transform.abbrevs.default.hereinafter[t.id]&&e.sys.getAbbreviation&&t.id&&(i=!0);break}if("object"==typeof t[a])break;if("string"==typeof t[a]&&t[a]){i=!0;break}if("number"==typeof t[a]){i=!0;break}}if(i)break}if(i){for(s=0,n=this.variables_real.length;s<n;s++)"citation-number"===(a=this.variables_real[s])&&"bibliography"===e.tmp.area||(e.tmp.cite_renders_content=!0),e.tmp.group_context.tip.variable_success=!0,e.tmp.can_substitute.value()&&"bibliography"===e.tmp.area&&"string"==typeof t[a]&&(e.tmp.name_node.top=e.output.current.value(),e.tmp.rendered_name.push(t[a]));e.tmp.can_substitute.replace(!1,we.LITERAL)}else e.tmp.group_context.tip.variable_attempt=!0});else if(-1<["if","else-if","condition"].indexOf(this.name))for(var t=0,r=this.variables.length;t<r;t+=1)this.tests.push(function(s){return function(e,t){var r=e;if(t&&-1<["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(s)&&(r=t),"hereinafter"===s&&n.sys.getAbbreviation&&r.id){if(n.transform.abbrevs.default.hereinafter[r.id])return!0}else if(r[s]){if("number"==typeof r[s]||"string"==typeof r[s])return!0;if("object"==typeof r[s])for(var i in r[s])if(r[s][i])return!0}return!1}}(this.variables[t]))},we.Attributes["@page"]=function(r,e){this.tests||(this.tests=[]);for(var t=e.replace("sub verbo","sub-verbo"),i=0,s=(t=t.split(/\s+/)).length;i<s;i+=1)this.tests.push(function(t){return function(e){return r.processNumber(!1,e,"page",e.type),e=r.tmp.shadow_numbers.page.label?"sub verbo"===r.tmp.shadow_numbers.page.label?"sub-verbo":r.tmp.shadow_numbers.page.label:"page",0<r.tmp.shadow_numbers.page.values.length&&r.tmp.shadow_numbers.page.values[0].gotosleepability&&(r.tmp.shadow_numbers.page.values[0].labelVisibility=!1),t===e}}(t[i]))},we.Attributes["@number"]=function(r,e){this.tests||(this.tests=[]);for(var t=e.split(/\s+/),i=0,s=t.length;i<s;i+=1)this.tests.push(function(t){return function(e){return r.processNumber(!1,e,"number",e.type),e=r.tmp.shadow_numbers.number.label||"number",t===e}}(t[i]))},we.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);var s,t=t.split(/\s+/);this.tests.push((s=t,function(e){if(e.jurisdiction)for(var t=e.jurisdiction,r=0,i=s.length;r<i;r++)if(t===s[r])return!0;return!1}))},we.Attributes["@country"]=function(e,t){this.tests||(this.tests=[]);var s,t=t.split(/\s+/);this.tests.push((s=t,function(e){if(e.country)for(var t=e.country,r=0,i=s.length;r<i;r++)if(t===s[r])return!0;return!1}))},we.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]);this.tests.push(function(){return-1<["bibliography","citation"].indexOf(t)?e.tmp.area.slice(0,t.length)===t:"alternative"===t?!!e.tmp.abort_alternative:void 0})},we.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=0,s=r.length;i<s;i+=1)this.tests.push(function(t){return function(e){e=e[t];return!(!e||e.month||e.season)}}(r[i]))},we.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=0,s=r.length;i<s;i+=1)this.tests.push(function(t){return function(e){e=e[t];return!(!e||!e.month&&!e.season||e.day)}}(r[i]))},we.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=0,s=r.length;i<s;i+=1)this.tests.push(function(t){return function(e){e=e[t];return!(!e||!e.day)}}(r[i]))},we.Attributes["@is-plural"]=function(o,l){this.tests||(this.tests=[]);this.tests.push(function(e){var t=e[l];if(t&&t.length){for(var r=0,i=0,s=!1,n=0,a=t.length;n<a;n+=1)s=o.opt.development_extensions.spoof_institutional_affiliations&&(t[n].literal||t[n].isInstitution&&t[n].family&&!t[n].given)?(i+=1,!1):(r+=1,!0);if(1<r)return!0;if(1<i)return!0;if(i&&s)return!0}return!1})},we.Attributes["@is-multiple"]=function(e,t){this.tests||(this.tests=[]);this.tests.push(function(e){return 1<(""+e[t]).split(/(?:,\s|\s(?:tot\sen\smet|līdz|oraz|and|bis|έως|και|och|až|do|en|et|in|ir|ja|og|sa|to|un|und|és|și|i|u|y|à|e|a|и|-|–)\s|—|\&)/).length})},we.Attributes["@locale"]=function(i,e){this.tests||(this.tests=[]);var t,s,n,a,r=i.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=e,this.tokentype===we.START){i.opt.multi_layout||(i.opt.multi_layout=[]);var o=[],l=e.split(/\s+/),u={},m=we.localeResolve(l[0],r);o.push(m),m.generic?u[m.generic]=m.best:u[m.best]=m.best;for(var p=1,c=l.length;p<c;p+=1){var h=we.localeResolve(l[p],r);o.push(h),h.generic?u[h.generic]=m.best:u[h.best]=m.best}i[i.build.area].opt.sort_locales.push(u),i.opt.multi_layout.push(o)}i.opt.has_layout_locale=!0}else{var f=e.split(/\s+/),d=[];for(p=0,c=f.length;p<c;p+=1)t=f[p],t=we.localeResolve(t,r),2===f[p].length&&d.push(t.bare),i.localeConfigure(t,!0),f[p]=t;e=f.slice();this.tests.push((s=e,n=r,a=d,function(e){t=![];var t,e=e.language||n,r=we.localeResolve(e,n);for(p=0,c=s.length;p<c;p+=1)if(r.best===s[p].best){i.tmp.condition_lang_counter_arr.push(i.tmp.condition_counter),i.tmp.condition_lang_val_arr.push(i.opt.lang),i.opt.lang=s[0].best,t=!0;break}return!t&&-1<a.indexOf(r.bare)&&(i.tmp.condition_lang_counter_arr.push(i.tmp.condition_counter),i.tmp.condition_lang_val_arr.push(i.opt.lang),i.opt.lang=s[0].best,t=!0),t}))}},we.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]);this.tests.push(function(){return!e.tmp.abort_alternative})},we.Attributes["@locale-internal"]=function(i,e){var t,s,r,n,a;for(this.tests||(this.tests=[]),r=e.split(/\s+/),this.locale_bares=[],n=0,a=r.length;n<a;n+=1)s=r[n],t=we.localeResolve(s,i.opt["default-locale"][0]),2===r[n].length&&this.locale_bares.push(t.bare),i.localeConfigure(t),r[n]=t;this.locale_default=i.opt["default-locale"][0],this.locale=r[0].best,this.locale_list=r.slice();var o;this.tests.push((o=this,function(e){var t=!1,r=!1;if(r=e.language&&(s=e.language,(r=we.localeResolve(s,i.opt["default-locale"][0])).best===i.opt["default-locale"][0])?!1:r){for(n=0,a=o.locale_list.length;n<a;n+=1)if(r.best===o.locale_list[n].best){i.opt.lang=o.locale,i.tmp.last_cite_locale=o.locale,i.output.openLevel("empty"),i.output.current.value().new_locale=o.locale,t=!0;break}!t&&-1<o.locale_bares.indexOf(r.bare)&&(i.opt.lang=o.locale,i.tmp.last_cite_locale=o.locale,i.output.openLevel("empty"),i.output.current.value().new_locale=o.locale,t=!0)}return t}))},we.Attributes["@court-class"]=function(r,e){this.tests||(this.tests=[]);for(var t=e.split(/\s+/),i=0,s=t.length;i<s;i++)this.tests.push(function(t){return function(e){return we.GET_COURT_CLASS(r,e)===t}}(t[i]))},we.Attributes["@container-multiple"]=function(t,e){this.tests||(this.tests=[]);var r;this.tests.push((r="true"===e,function(e){return t.tmp.container_item_count[e.container_id]&&1<t.tmp.container_item_count[e.container_id]?r:!r}))},we.Attributes["@container-subsequent"]=function(t,e){this.tests||(this.tests=[]);var r;this.tests.push((r="true"===e,function(e){return 1<t.tmp.container_item_pos[e.container_id]?r:!r}))},we.Attributes["@has-subunit"]=function(e,t){this.tests||(this.tests=[]);var s;this.tests.push((s=t,function(e){var t,r=0;for(t in e[s]){var i=e[s][t];!i.given&&(i=(i.literal||i.family).split("|").length,0===r||i<r)&&(r=i)}return 1<r}))},we.Attributes["@cite-form"]=function(e,t){this.tests||(this.tests=[]);var r;this.tests.push((r=t,function(e){return e["cite-form"]===r}))},we.Attributes["@disable-duplicate-year-suppression"]=function(e,t){e.opt.disable_duplicate_year_suppression=t.split(/\s+/)},we.Attributes["@consolidate-containers"]=function(e,t){we.Attributes["@track-containers"](e,t);t=t.split(/\s+/);e.bibliography.opt.consolidate_containers=t},we.Attributes["@track-containers"]=function(e,t){t=t.split(/\s+/);e.bibliography.opt.track_container_items||(e.bibliography.opt.track_container_items=[]),e.bibliography.opt.consolidate_containers||(e.bibliography.opt.consolidate_containers=[]),e.bibliography.opt.track_container_items=e.bibliography.opt.track_container_items.concat(t)},we.Attributes["@parallel-first"]=function(e,t){e.opt.parallel.enable=!0;var r,i=t.split(/\s+/);for(r in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_first={},i){var s=i[r];this.parallel_first[s]=!0,e.opt.track_repeat[s]=!0}},we.Attributes["@parallel-last"]=function(e,t){e.opt.parallel.enable=!0;var r,i=t.split(/\s+/);for(r in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_last={},i){var s=i[r];this.parallel_last[s]=!0,e.opt.track_repeat[s]=!0}},we.Attributes["@parallel-last-to-first"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);this.parallel_last_to_first={};for(var i=0,s=r.length;i<s;i++)this.parallel_last_to_first[r[i]]=!0},we.Attributes["@parallel-delimiter-override"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override=t},we.Attributes["@parallel-delimiter-override-on-suppress"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override_on_suppress=t},we.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.enable=!0;var r,i=t.split(/\s+/);for(r in e.opt.track_repeat||(e.opt.track_repeat={}),this.non_parallel={},i){var s=i[r];this.non_parallel[s]=!0,e.opt.track_repeat[s]=!0}},we.Attributes["@require"]=function(e,t){e.opt.use_context_condition=!0,this.strings.require=t},we.Attributes["@reject"]=function(e,t){e.opt.use_context_condition=!0,this.strings.reject=t},we.Attributes["@require-comma-on-symbol"]=function(e,t){e.opt.require_comma_on_symbol=t},we.Attributes["@gender"]=function(e,t){this.gender=t},we.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)},we.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t},we.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t},we.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t},we.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t},we.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t},we.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t},we.Attributes["@class"]=function(e,t){e.opt.class=t},we.Attributes["@version"]=function(e,t){e.opt.version=t},we.Attributes["@value"]=function(e,t){this.strings.value=t},we.Attributes["@name"]=function(e,t){this.strings.name=t},we.Attributes["@form"]=function(e,t){this.strings.form=t},we.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t},we.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t},we.Attributes["@macro"]=function(e,t){this.postponed_macro=t},we.Attributes["@term"]=function(e,t){this.strings.term="sub verbo"===t?"sub-verbo":t},we.Attributes["@xmlns"]=function(){},we.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)},we.Attributes["@lingo"]=function(){},we.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0},we.Attributes["@suffix"]=function(e,t){this.strings.suffix=t},we.Attributes["@prefix"]=function(e,t){this.strings.prefix=t},we.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t},we.Attributes["@match"]=function(e,t){this.match=t},we.Attributes["@names-min"]=function(e,t){t=parseInt(t,10);e[e.build.area].opt.max_number_of_names<t&&(e[e.build.area].opt.max_number_of_names=t),this.strings["et-al-min"]=t},we.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)},we.Attributes["@names-use-last"]=function(e,t){this.strings["et-al-use-last"]="true"===t},we.Attributes["@sort"]=function(e,t){"descending"===t&&(this.strings.sort_direction=we.DESCENDING)},we.Attributes["@plural"]=function(e,t){"always"===t||"true"===t?this.strings.plural=1:"never"===t||"false"===t?this.strings.plural=0:"contextual"===t&&(this.strings.plural=!1)},we.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0},we.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t},we.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t},we.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t},we.Attributes["@givenname-disambiguation-rule"]=function(e,t){-1<we.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)&&(e.citation.opt["givenname-disambiguation-rule"]=t)},we.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)},we.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)},we.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)},we.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)},we.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t},we.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t},we.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)},we.Attributes["@et-al-min"]=function(e,t){t=parseInt(t,10);e[e.build.area].opt.max_number_of_names<t&&(e[e.build.area].opt.max_number_of_names=t),e.setOpt(this,"et-al-min",t)},we.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))},we.Attributes["@et-al-use-last"]=function(e,t){"true"===t?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)},we.Attributes["@et-al-subsequent-min"]=function(e,t){t=parseInt(t,10);e[e.build.area].opt.max_number_of_names<t&&(e[e.build.area].opt.max_number_of_names=t),e.setOpt(this,"et-al-subsequent-min",t)},we.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))},we.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)},we.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)},we.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)},we.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)},we.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)},we.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)},we.Attributes["@initialize"]=function(e,t){"false"===t&&e.setOpt(this,"initialize",!1)},we.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t},we.Attributes["@name-as-sort-order"]=function(e,t){"style-options"===this.name?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)},we.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)},we.Attributes["@require-match"]=function(e,t){"true"===t&&(this.requireMatch=!0)},we.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)},we.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)},we.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t},we.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t},we.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t},we.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t},we.Attributes["@disambiguate-add-names"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-names"]=!0)},we.Attributes["@disambiguate-add-givenname"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-givenname"]=!0)},we.Attributes["@disambiguate-add-year-suffix"]=function(e,t){"true"===t&&"numeric"!==e.opt.xclass&&(e.opt["disambiguate-add-year-suffix"]=!0)},we.Attributes["@second-field-align"]=function(e,t){"flush"!==t&&"margin"!==t||(e[this.name].opt["second-field-align"]=t)},we.Attributes["@hanging-indent"]=function(e,t){"true"===t&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)},we.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))},we.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))},we.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)},we.Attributes["@substring"]=function(e,t){this.substring=parseInt(t,10)},we.Attributes["@text-case"]=function(e,r){this.execs.push(function(e,t){"normal"===r?this.text_case_normal=!0:"title"===(this.strings["text-case"]=r)&&t.jurisdiction&&(this.strings["text-case"]="passthrough")})},we.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t},we.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t},we.Attributes["@default-locale"]=function(e,t){if("style"===this.name){var r,i,s,n,a=t.match(/-x-(sort|translit|translat)-/g);if(a)for(s=0,i=a.length;s<i;s+=1)a[s]=a[s].replace(/^-x-/,"").replace(/-$/,"");for(n=[(r=t.split(/-x-(?:sort|translit|translat)-/))[0]],s=1,i=r.length;s<i;s+=1)n.push(a[s-1]),n.push(r[s]);for(i=(r=n.slice()).length,s=1;s<i;s+=2)e.opt["locale-"+r[s]].push(r[s+1].replace(/^\s*/g,"").replace(/\s*$/g,""));r.length?e.opt["default-locale"]=r.slice(0,1):e.opt["default-locale"]=["en"]}else"true"===t&&(this.default_locale=!0)},we.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t},we.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t},we.Attributes["@initialize-with-hyphen"]=function(e,t){"false"===t&&(e.opt["initialize-with-hyphen"]=!1)},we.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t},we.Attributes["@if-short"]=function(e,t){"true"===t&&(this.strings["if-short"]=!0)},we.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)},we.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)},we.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)},we.Attributes["@stop-first"]=function(e,t){this.strings["stop-first"]=parseInt(t,10)},we.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=-1*parseInt(t,10)},we.Attributes["@reverse-order"]=function(e,t){"true"===t&&(this.strings["reverse-order"]=!0)},we.Attributes["@display"]=function(e,t){2===e.bibliography.tokens.length&&(e.opt.using_display=!0),this.strings.cls=t},we.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]},we.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},we.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},we.Stack.prototype.replace=function(e,t){0===this.mystack.length&&we.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),this.mystack[this.mystack.length-1]=t||e?e:"",this.tip=this.mystack[this.mystack.length-1]},we.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e},we.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},we.Stack.prototype.length=function(){return this.mystack.length},we.Parallel=function(e){this.state=e},we.Parallel.prototype.StartCitation=function(e,t){if(this.state.tmp.suppress_repeats=[],!(e.length<2)){for(var r=0,i=!1,s=[],n=0,a=e.length-1;n<a;n++){var o,l,u,m,p,c=e[n][0],h=e[n+1][0],f=!1,d={};if(e[n][0].seeAlso&&0<e[n][0].seeAlso.length&&!i){var f=!0,g=(i=[e[n][0].id].concat(e[n][0].seeAlso)).slice(),b=e.slice(n);b[0][1].parallel="first";for(var y=0,v=b.length;y<v;y++){var _=b[y][0].id,_=g.indexOf(_),r=!1;if(-1===_?r=n+y-1:n+y===e.length-1&&(r=n+y),r){s.push([n,r]);break}g=g.slice(0,_).concat(g.slice(_+1))}}for(o in 0<n&&(f=f&&!(this.state.tmp.suppress_repeats[n-1].START=!0)),this.state.opt.track_repeat)c[o]&&h[o]?"string"==typeof h[o]||"number"==typeof h[o]?(p="title"===o&&c["title-short"]&&h["title-short"]?(m=c["title-short"],h["title-short"]):(m=c[o],h[o]),d[o]=m==p):void 0===c[o].length?(d[o]=!1,l=c[o].year,u=h[o].year,l&&u&&l==u&&(d[o]=!0)):(m=JSON.stringify(c[o]),p=JSON.stringify(h[o]),d[o]=m===p):d[o]=!1;i||(d.ORPHAN=!0),r===n&&(i=!(d.END=!0)),this.state.tmp.suppress_repeats.push(d)}for(y=0,v=s.length;y<v;y++)for(var x=e[s[y][0]][0].id,w=(this.state.registry.registry[x].master=!0,this.state.registry.registry[x].siblings=[],s[y][0]),E=s[y][1],O=w;O<E;O++){this.state.tmp.suppress_repeats[O].SIBLING=!0;var A=e[O+1][0].id;e[O+1][1].parallel="other",this.state.registry.registry[x].siblings.push(A)}}},we.Parallel.prototype.checkRepeats=function(e){var t=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(e.parallel_first&&0<Object.keys(e.parallel_first).length){var r=[{}].concat(this.state.tmp.suppress_repeats),i=!0;for(s in e.parallel_first)r[t][s]&&!r[t].START||(i=!1);return i}if(e.parallel_last&&0<Object.keys(e.parallel_last).length){r=this.state.tmp.suppress_repeats.concat([{}]),i=0<Object.keys(e.parallel_last).length;for(s in e.parallel_last)r[t][s]&&!r[t].END||(i=!1);return i}if(e.non_parallel&&0<Object.keys(e.non_parallel).length){var s,r=[{}].concat(this.state.tmp.suppress_repeats),i=!0;for(s in e.non_parallel)r[t][s]||(i=!1);return i}}return!1},we.Util={},we.Util.Match=function(){this.any=function(e,t,s){return function(e,t){for(var r=0,i=s.length;r<i;r+=1)if(s[r](e,t))return!0;return!1}},this.none=function(e,t,s){return function(e,t){for(var r=0,i=s.length;r<i;r+=1)if(s[r](e,t))return!1;return!0}},this.all=function(e,t,s){return function(e,t){for(var r=0,i=s.length;r<i;r+=1)if(!s[r](e,t))return!1;return!0}},this[void 0]=this.all,this.nand=function(e,t,s){return function(e,t){for(var r=0,i=s.length;r<i;r+=1)if(!s[r](e,t))return!0;return!1}}},we.Transform=function(A){function c(e,t,r){var i="";return A.sys.getHumanForm&&("country"===e?i=(i=A.sys.getHumanForm(t.toLowerCase(),!1,!0)).split("|")[0]:"jurisdiction"===e&&(i=A.sys.getHumanForm(t.toLowerCase(),!1,!0),i=r?"":i.split("|").slice(1).join(", "))),i}function T(e,t,r,i,s,n,a){var o,l,u,m="",p=we.FIELD_CATEGORY_REMAP[n];return p?(o=n,l=s,e.sys.normalizeAbbrevsKey&&(l=e.sys.normalizeAbbrevsKey(n,s)),u=!1,"jurisdiction"===o&&l&&(u=-1===l.indexOf(":")),-1<["jurisdiction","country"].indexOf(n)&&s===s.toLowerCase()&&(l=s.toUpperCase()),e.sys.getAbbreviation&&(n=!(-1<["jurisdiction","country","language-name","language-name-original"].indexOf(o))&&r.jurisdiction||"default",n=e.transform.loadAbbreviation(n,p,l,r.language),e.transform.abbrevs[n][p])&&l&&(n=e.transform.abbrevs[n][p][l],m="short"===t.strings.form&&n?u?"":n:c(o,l,u)),(m=(m=!(m||e.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===r.type)&&i&&r[i]&&a?r[i]:m)||e.sys.getAbbreviation||!e.sys.getHumanForm?m:c(o,l,u))||u||e.sys.getHumanForm&&"jurisdiction"===o||(m=s),e.opt.development_extensions.force_title_abbrev_fallback&&"title"===o&&m===s&&r["title-short"]?r["title-short"]:m):s}function k(e,t){var r=A.opt["default-locale"][0].slice(0,2),i=A.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)");return e.language&&(r=(i=(""+e.language).match(i))?i[1]:"tlh"),e.multi&&e.multi&&e.multi.main&&e.multi.main[t]&&(r=e.multi.main[t]),r=A.opt.development_extensions.strict_text_case_locales&&!A.opt.development_extensions.normalize_lang_keys_to_lowercase?r:r.toLowerCase()}function S(e,t,r,i,s,n){var a,o,l=s,u=!1;if(!e[t])return{name:"",usedOrig:s,token:we.Util.cloneToken(this)};var m=!1,p=(-1<we.VARIABLES_WITH_SHORT_FORM.indexOf(t)&&n&&(t+="-short",m=!0),!1),c=null,h=[];"-short"===t.slice(-6)?(h.push(t),h.push(t.slice(0,-6))):h.push(t);for(var f=0,d=h.length;f<d;f++){var g,b,y,v=!1,_={name:"",usedOrig:s,locale:k(e,t=h[f])},x=A.opt[r]?A.opt[r].slice():[],w=!1;if("locale-orig"===r?(s||(_.name=e[t],_.usedOrig=!1),u=w=!0):!i||void 0!==x&&0!==x.length||(_.name=e[t],u=w=_.usedOrig=!0),!w){for(var E=0,O=x.length;E<O;E+=1){if(o=(a=x[E]).split(/[\-_]/)[0],a&&e.multi&&e.multi._keys[t]&&e.multi._keys[t][a]){_.name=e.multi._keys[t][a],_.locale=a,u=!(v=w=!0);break}if(o&&e.multi&&e.multi._keys[t]&&e.multi._keys[t][o]){_.name=e.multi._keys[t][o],_.locale=o,u=!(v=w=!0);break}}!_.name&&i&&(_={name:e[t],usedOrig:!0,locale:k(e,t)},u=!0)}if(_.token=we.Util.cloneToken(this),0===f?(v&&(_.found_variant_ok=!0),c=_,m||void 0!==x&&0!==x.length||(p=!0),v&&(p=!0)):m||v||!c?v&&(_.found_variant_ok=!0):(_=c,t=h[0]),-1<["title","container-title"].indexOf(t)&&(l||_.token.strings["text-case"]&&"sentence"!==_.token.strings["text-case"]&&"normal"!==_.token.strings["text-case"]||(A.opt.lang,g=!u&&_.locale,b=t.slice(0,-5),y="sentence"===_.token.strings["text-case"],_.name=we.titlecaseSentenceOrNormal(A,e,b,g,y),delete _.token.strings["text-case"])),p)break}return _}function j(e,t){var r=t.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);if(r&&(t=t.slice(r[0].length),r[1]))for(var i=r[1].split(","),s=0,n=i.length;s<n;s+=1){var a=i[s].match(/^([-_a-z]+)(?:\:(.*))*$/),o=a[1],l=A.tmp.abbrev_trimmer;a[2]?l&&e&&(l[e]||(l[e]={}),l[e][o]=a[2]):-1===A.tmp.done_vars.indexOf(o)&&(l&&e&&(l.QUASHES[e]||(l.QUASHES[e]={}),l.QUASHES[e][o]=!0),A.tmp.done_vars.push(o))}return t}this.abbrevs={},this.abbrevs.default=new A.sys.AbbreviationSegments,this.getTextSubField=S,this.loadAbbreviation=function(e,t,r,i){var s=(e=e||"default").split(":")[0];return(s=we.getAbbrevsDomain(A,s,i))&&(e+="@"+s),r?A.sys.getAbbreviation&&!(e=A.sys.getAbbreviation(A.opt.styleID,A.transform.abbrevs,e,t,r))&&(e="default",s)&&(e+="@"+s):(A.transform.abbrevs[e]||(A.transform.abbrevs[e]=new A.sys.AbbreviationSegments),A.transform.abbrevs[e][t]||(A.transform.abbrevs[e][t]={})),e},this.quashCheck=j,this.getOutputFunction=function(_,x,e,w){var E=we.LangPrefsMap[_[0]],O=!!E&&A.opt["cite-lang-prefs"][E];return function(e,t,r){var i,s;if(_[0]&&(t[_[0]]||t[w])&&!(!e.tmp.just_looking&&r&&r["suppress-author"]&&!e.tmp.probably_rendered_something&&1<e.tmp.can_substitute.length())){var n={primary:!1,secondary:!1,tertiary:!1};if("_sort"===e.tmp.area.slice(-5))n.primary="locale-sort";else if(O&&1===O.length&&"locale-orig"===O[0])O=!(n.primary="locale-orig");else if(O&&!e.tmp.multi_layout)for(var a=["primary","secondary","tertiary"],o=0,l=a.length;o<l&&!(O.length-1<o);o+=1)O[o]&&(n[a[o]]="locale-"+O[o]);else n.primary="locale-orig";if("title-short"!==_[0]&&("bibliography"===e.tmp.area||"citation"===e.tmp.area&&"note"===e.opt.xclass&&r&&!r.position)||(n.secondary=!1,n.tertiary=!1),e.tmp.multi_layout&&(n.secondary=!1,n.tertiary=!1),e.tmp["publisher-list"])"publisher"===_[0]?e.tmp["publisher-token"]=this:"publisher-place"===_[0]&&(e.tmp["publisher-place-token"]=this);else{var r=e.tmp.lang_array.slice(),u=S.call(this,t,_[0],n.primary,!0,null,x),m=u.name,p=u.locale,c=u.token,h=u.usedOrig;if(x&&!u.found_variant_ok&&(m=T(e,c,t,w,m,x,!0))&&(b=t,(y=(y=m).match(/^#([0-9]+).*>>>/))&&y[1]&&(b["cite-form"]=y[1]),e.tmp.just_looking||(m=j(t.jurisdiction,m))),function(e,t,r,i){var s=e.variables[0];if(A.publisherOutput&&r){if(-1===["publisher","publisher-place"].indexOf(s))return;A.publisherOutput[s+"-token"]=e,A.publisherOutput.varlist.push(s);var n=r.split(/;\s*/);n.length===A.publisherOutput[s+"-list"].length&&(A.publisherOutput[s+"-list"]=n);for(var a=0,o=n.length;a<o;a+=1)n[a]=T(A,e,t,!1,n[a],i,!0);return A.tmp[s+"-token"]=e,1}}(this,t,m,x))e.tmp.lang_array=r;else{var f,d,g,b=!1,y=!1;if(n.secondary&&(b=(u=S.call(this,t,_[0],n.secondary,!1,u.usedOrig,null,x)).name,i=u.locale,f=u.token,x)&&!u.found_variant_ok&&(b=b&&T(e,f,t,!1,b,x,!0)),n.tertiary&&(y=(u=S.call(this,t,_[0],n.tertiary,!1,u.usedOrig,null,x)).name,s=u.locale,d=u.token,x)&&!u.found_variant_ok&&(y=y&&T(e,d,t,!1,y,x,!0)),"<i>"===(g="locale-translit"===n.primary?e.opt.citeAffixes[E][n.primary].prefix:g)&&"title"===_[0]&&!h){for(var v=!1,o=0,l=c.decorations.length;o<l;o+=1)"@font-style"===c.decorations[o][0]&&"italic"===c.decorations[o][1]&&(v=!0);v||c.decorations.push(["@font-style","italic"])}if("en"!==p&&"title"===c.strings["text-case"]&&(c.strings["text-case"]="passthrough"),"title"===_[0]&&(m=we.demoteNoiseWords(e,m,this["leading-noise-words"])),b||y){if(e.output.openLevel("empty"),c.strings.suffix=c.strings.suffix.replace(/[ .,]+$/,""),p&&(e.tmp.lang_array=[p].concat(r)),we.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,c,c.strings.prefix+m),e.output.append(m,c),e.tmp.probably_rendered_something=!0,b=m===b?!1:b){f.strings.prefix=e.opt.citeAffixes[E][n.secondary].prefix,f.strings.suffix=e.opt.citeAffixes[E][n.secondary].suffix,f.strings.prefix||(f.strings.prefix=" ");for(o=f.decorations.length-1;-1<o;o+=-1)-1<["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(f.decorations[o].join("/"))&&(f.decorations=f.decorations.slice(0,o).concat(f.decorations.slice(o+1)));"en"!==i&&"title"===f.strings["text-case"]&&(f.strings["text-case"]="passthrough"),i&&(e.tmp.lang_array=[i].concat(r));u=new we.Token;u.decorations.push(["@font-style","normal"]),u.decorations.push(["@font-weight","normal"]),e.output.openLevel(u),e.output.append(b,f),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}if(y=m===y?!1:y){d.strings.prefix=e.opt.citeAffixes[E][n.tertiary].prefix,d.strings.suffix=e.opt.citeAffixes[E][n.tertiary].suffix,d.strings.prefix||(d.strings.prefix=" ");for(o=d.decorations.length-1;-1<o;o+=-1)-1<["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(d.decorations[o].join("/"))&&(d.decorations=d.decorations.slice(0,o).concat(d.decorations.slice(o+1)));"en"!==s&&"title"===d.strings["text-case"]&&(d.strings["text-case"]="passthrough"),s&&(e.tmp.lang_array=[s].concat(r));t=new we.Token;t.decorations.push(["@font-style","normal"]),t.decorations.push(["@font-weight","normal"]),e.output.openLevel(t),e.output.append(y,d),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}e.output.closeLevel()}else p&&(e.tmp.lang_array=[p].concat(r)),we.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,c,c.strings.prefix+m),e.output.append(m,c),e.tmp.probably_rendered_something=!0;e.tmp.lang_array=r,e.tmp.can_block_substitute&&e.tmp.name_node.children.push(e.output.current.value())}}}return null}}},we.Token=function(e,t,r){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t},we.Util.cloneToken=function(e){var t,r,i,s;if("string"==typeof e)return e;for(s in t=new we.Token(e.name,e.tokentype),e.strings)e.strings.hasOwnProperty(s)&&(t.strings[s]=e.strings[s]);if(e.decorations)for(t.decorations=[],r=0,i=e.decorations.length;r<i;r+=1)t.decorations.push(e.decorations[r].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests)&&(t.tests=e.tests.slice()),t},we.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},we.Blob=function(e,t,r){var i,s;if(this.levelname=r,t){for(var n in this.strings={prefix:"",suffix:""},t.strings)t.strings.hasOwnProperty(n)&&(this.strings[n]=t.strings[n]);for(this.decorations=[],i=void 0===t.decorations?0:t.decorations.length,s=0;s<i;s+=1)this.decorations.push(t.decorations[s].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof e?e:e?[e]:[],this.alldecor=[this.decorations]},we.Blob.prototype.push=function(e){"string"==typeof this.blobs?we.error("Attempt to push blob onto string object"):!1!==e&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))},we.NumericBlob=function(e,t,r,i,s){this.id=s,this.alldecor=[],this.num=r,this.particle=t,this.blobs=r.toString(),this.status=we.START,this.strings={},i?(i.strings["text-case"]&&(s=i.strings["text-case"],this.particle=we.Output.Formatters[s](e,this.particle),this.blobs=we.Output.Formatters[s](e,this.blobs)),this.gender=i.gender,this.decorations=i.decorations,this.strings.prefix=i.strings.prefix,this.strings.suffix=i.strings.suffix,this.strings["text-case"]=i.strings["text-case"],this.successor_prefix=i.successor_prefix,this.range_prefix=i.range_prefix,this.splice_prefix=i.splice_prefix,this.formatter=i.formatter,this.formatter||(this.formatter=new we.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))):(this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new we.Output.DefaultFormatter)},we.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)},we.Output.DefaultFormatter=function(){},we.Output.DefaultFormatter.prototype.format=function(e){return e.toString()},we.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=we.START,"object"==typeof e&&(e.num===this.num+1?e.status=we.SUCCESSOR:e.status=we.SEEN)):e&&e.num&&this.type===e.type&&e.num===this.num+1?this.status===we.START||this.status===we.SEEN?e.status=we.SUCCESSOR:this.status!==we.SUCCESSOR&&this.status!==we.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(e.status=we.SUCCESSOR_OF_SUCCESSOR,this.status=we.SUPPRESS):e.status=we.SUCCESSOR):(this.status===we.SUCCESSOR_OF_SUCCESSOR&&(this.status=we.END),"object"==typeof e&&(e.status=we.SEEN))},we.NumericBlob.prototype.checkLast=function(e){return(this.status===we.SEEN||e.num!==this.num-1&&this.status===we.SUCCESSOR)&&(this.status=we.SUCCESSOR,!0)},we.Util.fixDateNode=function(e,t,r){var i,s,n,a,o,l,u,m=this.cslXml.getAttributeValue(r,"lingo"),p=this.cslXml.getAttributeValue(r,"default-locale");if(this.build.date_key=!0,i=this.cslXml.getAttributeValue(r,"form"),m=p?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(r,"lingo"),!this.getDate(i,p))return e;var c,h=this.cslXml.getAttributeValue(r,"date-parts"),f=this.cslXml.getAttributeValue(r,"variable"),d=this.cslXml.getAttributeValue(r,"prefix"),g=this.cslXml.getAttributeValue(r,"suffix"),b=this.cslXml.getAttributeValue(r,"display"),y=this.cslXml.getAttributeValue(r,"cslid"),v=this.cslXml.nodeCopy(this.getDate(i,p));for(c in this.cslXml.setAttribute(v,"lingo",this.opt.lang),this.cslXml.setAttribute(v,"form",i),this.cslXml.setAttribute(v,"date-parts",h),this.cslXml.setAttribute(v,"cslid",y),this.cslXml.setAttribute(v,"variable",f),this.cslXml.setAttribute(v,"default-locale",p),d&&this.cslXml.setAttribute(v,"prefix",d),g&&this.cslXml.setAttribute(v,"suffix",g),b&&this.cslXml.setAttribute(v,"display",b),l=this.cslXml.children(v))s=l[c],"date-part"===this.cslXml.nodename(s)&&(n=this.cslXml.getAttributeValue(s,"name"),p)&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(v,"date-part",n,"@default-locale","true");for(c in l=this.cslXml.children(r))if(s=l[c],"date-part"===this.cslXml.nodename(s))for(a in n=this.cslXml.getAttributeValue(s,"name"),u=this.cslXml.attributes(s))"@name"===a||m&&m!==this.opt.lang&&-1<["@suffix","@prefix","@form"].indexOf(a)||(o=u[a],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(v,"date-part",n,a,o));if("year"===this.cslXml.getAttributeValue(r,"date-parts"))this.cslXml.deleteNodeByNameAttribute(v,"month"),this.cslXml.deleteNodeByNameAttribute(v,"day");else if("year-month"===this.cslXml.getAttributeValue(r,"date-parts"))this.cslXml.deleteNodeByNameAttribute(v,"day");else if("month-day"===this.cslXml.getAttributeValue(r,"date-parts")){for(var _=this.cslXml.children(v),x=1,w=this.cslXml.numberofnodes(_);x<w;x++)if("year"===this.cslXml.getAttributeValue(_[x],"name")){this.cslXml.setAttribute(_[x-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(v,"year")}return this.cslXml.insertChildNodeAfter(e,r,t,v)},we.dateMacroAsSortKey=function(e,t){we.dateAsSortKey.call(this,e,t,!0)},we.dateAsSortKey=function(e,t,r){var i,s,n,a=this.variables[0],o="empty";if(r&&e.tmp.extension&&(o="macro-with-date"),void 0===(i=t[a])&&(i={"date-parts":[[0]]}),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),i.raw?i=e.fun.dateparser.parseDateToArray(i.raw):i["date-parts"]&&(i=e.dateParseArray(i)),(i=void 0===i?{}:i).year)for(s=0,n=we.DATE_PARTS_INTERNAL.length;s<n;s+=1){var l,u,m,p,c=0;"_end"===(p=m=we.DATE_PARTS_INTERNAL[s]).slice(-4)&&(p=p.slice(0,-4)),i[m]&&-1<this.dateparts.indexOf(p)&&(c=i[m]),"year"===m.slice(0,4)?(u="1","-"===(l=we.Util.Dates[p].numeric(e,c))[0]&&(u="0",l=l.slice(1),l=9999-parseInt(l,10)),e.output.append(we.Util.Dates[m.slice(0,4)].numeric(e,u+l),o)):(c=we.Util.Dates[p]["numeric-leading-zeros"](e,c),e.output.append(c=c||"00",o))}},we.Engine.prototype.dateParseArray=function(e){var t,r,i={};for(t in e)if("date-parts"===t){1<(r=e["date-parts"]).length&&r[0].length!==r[1].length&&we.error("CSL data error: element mismatch in date range input.");for(var s=["","_end"],n=0,a=r.length;n<a;n+=1)for(var o=0,l=we.DATE_PARTS.length;o<l;o+=1)isNaN(parseInt(r[n][o],10))?i[we.DATE_PARTS[o]+s[n]]=void 0:i[we.DATE_PARTS[o]+s[n]]=parseInt(r[n][o],10)}else e.hasOwnProperty(t)&&("literal"===t&&"object"==typeof e.literal&&"string"==typeof e.literal.part?(we.debug("Warning: fixing up weird literal date value"),i.literal=e.literal.part):i[t]=e[t]);return i},we.Util.Names={},we.Util.Names.compareNamesets=we.NameOutput.prototype._compareNamesets,we.Util.Names.unInitialize=function(e,t){var r,i,s,n,a;if(!t)return"";for(s=t.split(/(?:\-|\s+)/),n=t.match(/(\-|\s+)/g),a="",r=0,i=s.length;r<i;r+=1)a+=s[r],r<i-1&&(a+=n[r]);return a},we.Util.Names.initializeWith=function(e,t,r,i){var s;if(!t)return"";if(r=r||"",-1<["Lord","Lady"].indexOf(t)||!t.replace(/^(?:<[^>]+>)*/,"").match(we.STARTSWITH_ROMANESQUE_REGEXP)&&!r.match("%s"))return t;for(var n=(t=(t=(t=!1===e.opt["initialize-with-hyphen"]?t.replace(/\-/g," "):t).replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"–$1")).length-2;-1<n;n+=-1)"."===t.slice(n,n+1)&&" "!==t.slice(n+1,n+2)&&(t=t.slice(0,n)+". "+t.slice(n+1));var a,o=we.Output.Formatters.nameDoppel.split(t),l=[],l=[o.strings[0]];for(0===o.tags.length&&(a=l[0].match(/[^\.]+$/))&&1===a[0].length&&a[0]!==a[0].toLowerCase()&&(l[0]+="."),n=1,s=o.strings.length;n<s;n+=1)l.push(o.tags[n-1]),l.push(o.strings[n]);return(i?this.doNormalize(e,l,r):this.doInitialize(e,l,r)).replace(/\u2013([a-z])/g,"-$1")},we.Util.Names.notag=function(e){return e.replace(/^(?:<[^>]+>)*/,"")},we.Util.Names.mergetag=function(e,t,r){var i=t.match(/(?:-*<[^>]+>-*)/g);return i&&(t=i.join(""),(i=r.match(/^(.*[^\s])*(\s+)$/))?(i[1]=i[1]||"",r=i[1]+t+i[2]):r+=t),r},we.Util.Names.tagonly=function(e,t){var r=t.match(/(?:<[^>]+>)+/);return r?r.join(""):t},we.Util.Names.doNormalize=function(e,t,r){r=r||"";for(var i=[],s=0,n=t.length;s<n;s+=1)1<this.notag(t[s]).length&&"."===this.notag(t[s]).slice(-1)?(t[s]=t[s].replace(/^(.*)\.(.*)$/,"$1$2"),i.push(!0)):1===t[s].length&&t[s].toUpperCase()===t[s]?i.push(!0):i.push(!1);for(s=0,n=t.length;s<n;s+=2)i[s]&&(s<t.length-2&&(t[s+1]=this.tagonly(e,t[s+1]),i[s+2]||(t[s+1]=this.tagonly(e,t[s+1])+" "),1<t[s+2].length?t[s+1]=r.replace(/\ufeff$/,"")+t[s+1]:t[s+1]=this.mergetag(e,t[s+1],r)),s===t.length-1)&&(t[s]=t[s]+r);return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},we.Util.Names.doInitialize=function(e,t,r){for(var i,s,n=0,a=t.length;n<a;n+=2)if(s=t[n])if((i=!(i=s.match(we.NAME_INITIAL_REGEXP))&&!s.match(we.STARTSWITH_ROMANESQUE_REGEXP)&&1<s.length&&r.match("%s")?s.match(/(.)(.*)/):i)&&i[2]&&i[3]&&(i[1]=i[1]+i[2],i[2]=""),i&&i[1].slice(0,1)===i[1].slice(0,1).toUpperCase()){var o="";if(i[2]){for(var l,u="",m=0,p=(l=i[2].split("")).length;m<p;m+=1){var c=l[m];if(c!==c.toUpperCase())break;u+=c}u.length<i[2].length&&(o=we.toLocaleLowerCase.call(e,u))}t[n]=i[1]+o,n<a-1?r.match("%s")?t[n]=r.replace("%s",t[n]):-1<t[n+1].indexOf("-")?t[n+1]=this.mergetag(e,t[n+1].replace("-",""),r)+"-":t[n+1]=this.mergetag(e,t[n+1],r):r.match("%s")?t[n]=r.replace("%s",t[n]):t.push(r)}else!s.match(we.ROMANESQUE_REGEXP)||i&&i[3]||(t[n]=" "+s);return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},we.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")},we.Util.Dates={},we.Util.Dates.year={},we.Util.Dates.year.long=function(e,t){return(t=t||("boolean"==typeof t?"":0)).toString()},we.Util.Dates.year.imperial=function(e,t,r){var i="";t=t||("boolean"==typeof t?"":0);for(var s=(s=e.tmp.date_object["month"+(r=r?"_end":"")])?""+s:"1";s.length<2;)s="0"+s;for(var n=(n=e.tmp.date_object["day"+r])?""+n:"1";n.length<2;)n="0"+n;var a,o,r=parseInt(t+s+n,10);return 18680908<=r&&r<19120730?(a="明治",o=1867):19120730<=r&&r<19261225?(a="大正",o=1911):19261225<=r&&r<19890108?(a="昭和",o=1925):19890108<=r&&(a="平成",o=1988),a&&o&&(r=a,e.sys.normalizeAbbrevsKey&&(r=e.sys.normalizeAbbrevsKey("number",a)),e.transform.abbrevs.default.number[r]||e.transform.loadAbbreviation("default","number",r,null),i=(a=e.transform.abbrevs.default.number[r]?e.transform.abbrevs.default.number[r]:a)+(t-o)),i},we.Util.Dates.year.short=function(e,t){if((t=t.toString())&&4===t.length)return t.substr(2)},we.Util.Dates.year.numeric=function(e,t){var r,i=(t=""+t).match(/([0-9]*)$/);for(t=i?(r=t.slice(0,-1*i[1].length),i[1]):(r=t,"");t.length<4;)t="0"+t;return r+t},we.Util.Dates.normalizeMonth=function(e,t){var r;if((e=""+(e=e||0)).match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var i={stub:"month-",num:e};if(i.num<1||24<i.num)i.num=0;else{for(;16<i.num;)i.num=i.num-4;12<i.num&&(i.stub="season-",i.num=i.num-12)}r=i}else r=e=e<1||12<e?0:e;return r},we.Util.Dates.month={},we.Util.Dates.month.numeric=function(e,t){return t=(t=we.Util.Dates.normalizeMonth(t))||""},we.Util.Dates.month["numeric-leading-zeros"]=function(e,t){if(t=we.Util.Dates.normalizeMonth(t))for(t=""+t;t.length<2;)t="0"+t;else t="";return t},we.Util.Dates.month.long=function(e,t,r,i){var s=we.Util.Dates.normalizeMonth(t,!0);if(t=s.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(s.stub+t,"long",0,0,!1,i)}else t="";return t},we.Util.Dates.month.short=function(e,t,r,i){var s=we.Util.Dates.normalizeMonth(t,!0);if(t=s.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(s.stub+t,"short",0,0,!1,i)}else t="";return t},we.Util.Dates.day={},we.Util.Dates.day.numeric=function(e,t){return t.toString()},we.Util.Dates.day.long=we.Util.Dates.day.numeric,we.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t=(t=t||0).toString();t.length<2;)t="0"+t;return t.toString()},we.Util.Dates.day.ordinal=function(e,t,r){return e.fun.ordinalizer.format(t,r)},we.Util.Sort={},we.Util.Sort.strip_prepositions=function(e){var t;return e=(t="string"==typeof e?e.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/):t)?e.substr(t[1].length):e},we.Util.substituteStart=function(e,t){var r,i,s=function(e,t,r){for(var i=0,s=this.decorations.length;i<s;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){e.tmp.strip_periods+=1;break}};this.execs.push(s),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),("text"===this.name&&!this.postponed_macro||-1<["number","date","names"].indexOf(this.name))&&this.execs.push(function(e,t,r){"author"===e.tmp.element_trace.value()||"names"===this.name?(!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"),!e.tmp.just_looking&&r&&r["suppress-author"]&&!e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me")):"date"===this.name?!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"):!e.tmp.just_looking&&r&&r["author-only"]&&"intext"!==e.tmp.area?!e.tmp.probably_rendered_something&&e.tmp.can_block_substitute||e.tmp.element_trace.push("suppress-me"):r&&r["suppress-author"]&&e.tmp.element_trace.push("do-not-suppress-me")}),i=this.strings.cls,this.strings.cls=!1,0===e.build.render_nesting_level&&("bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]?((r=new we.Token("group",we.START)).decorations=[["@display","left-margin"]],r.execs.push(s=function(e,t){e.tmp.render_seen||(r.strings.first_blob=t.id,e.output.startTag("bib_first",r))}),t.push(r)):-1<we.DISPLAY_CLASSES.indexOf(i)&&((r=new we.Token("group",we.START)).decorations=[["@display",i]],r.execs.push(s=function(e,t){r.strings.first_blob=t.id,e.output.startTag("bib_first",r)}),t.push(r)),e.build.cls=i),e.build.render_nesting_level+=1,1===e.build.substitute_level.value()&&(i=new we.Token("choose",we.START),we.Node.choose.build.call(i,e,t),s=function(){return!!e.tmp.can_substitute.value()},(i=new we.Token("if",we.START)).tests||(i.tests=[]),i.tests.push(s),i.test=e.fun.match.any(this,e,i.tests),t.push(i)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&this.execs.push(s=function(e,t,r){var i,s,n,a,o,l;e.tmp.just_looking||e.tmp.suppress_decorations||((i=new we.Token("text",we.START)).decorations=[["@showid","true"]],e.output.startTag("variable_entry",i),i=null,r&&(i=r.position),s=0,r&&r.noteIndex&&(s=r.noteIndex),n=0,r&&r["first-reference-note-number"]&&(n=r["first-reference-note-number"]),a=0,r&&r["first-container-reference-note-number"]&&(a=r["first-container-reference-note-number"]),o=0,r&&r["citation-number"]&&(o=r["citation-number"]),l=0,r&&r.index&&(l=r.index),r={itemData:t,variableNames:this.variables,context:e.tmp.area,xclass:e.opt.xclass,position:["first","container-subsequent","subsequent","ibid","ibid-with-locator"][i=i||0],"note-number":s,"first-reference-note-number":n,"first-container-reference-note-number":a,"citation-number":o,index:l,mode:e.opt.mode},e.output.current.value().params=r)})},we.Util.substituteEnd=function(e,t){var r,i,l,u;e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&this.execs.push(function(e){e.tmp.just_looking||e.tmp.suppress_decorations||e.output.endTag("variable_entry")}),this.execs.push(function(e){for(var t=0,r=this.decorations.length;t<r;t+=1)if("@strip-periods"===this.decorations[t][0]&&"true"===this.decorations[t][1]){e.tmp.strip_periods+=-1;break}}),e.build.render_nesting_level+=-1,0===e.build.render_nesting_level&&(e.build.cls?(this.execs.push(function(e){e.output.endTag("bib_first")}),e.build.cls=!1):"bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]&&((i=new we.Token("group",we.END)).execs.push(function(e){e.tmp.render_seen||e.output.endTag("bib_first")}),t.push(i),(r=new we.Token("group",we.START)).decorations=[["@display","right-inline"]],r.execs.push(function(e){e.tmp.render_seen||(e.tmp.render_seen=!0,e.output.startTag("bib_other",r))}),t.push(r))),1===e.build.substitute_level.value()&&(i=new we.Token("if",we.END),t.push(i),i=new we.Token("choose",we.END),we.Node.choose.build.call(i,e,t)),("names"===this.name||"text"===this.name&&"title"!==this.variables_real)&&(new we.Token("text",we.SINGLETON),u=this.name,this.execs.push(function(e,t){if("bibliography"===e.tmp.area&&"string"==typeof e.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||t[this.variables_real])&&(!this.variables_real||"names"!==u)){var r=e.bibliography.opt["subsequent-author-substitute-rule"],t=!e.tmp.suppress_decorations;if(t&&e.tmp.subsequent_author_substitute_ok&&e.tmp.rendered_name){if("partial-each"===r||"partial-first"===r){for(var i=!0,s=[],n=0,a=e.tmp.name_node.children.length;n<a;n+=1){var o=e.tmp.rendered_name[n];(!(i&&e.tmp.last_rendered_name&&e.tmp.last_rendered_name.length>n-1&&o)||o.localeCompare(e.tmp.last_rendered_name[n])||(l=new we.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[n].blobs=[l],"partial-first"===r))&&(i=!1),s.push(o)}e.tmp.last_rendered_name=s}else if("complete-each"===r){if(s=e.tmp.rendered_name.join(",")){if(e.tmp.last_rendered_name&&!s.localeCompare(e.tmp.last_rendered_name))for(n=0,a=e.tmp.name_node.children.length;n<a;n+=1)l=new we.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[n].blobs=[l];e.tmp.last_rendered_name=s}}else(s=e.tmp.rendered_name.join(","))&&(e.tmp.last_rendered_name&&!s.localeCompare(e.tmp.last_rendered_name)&&(l=new we.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.label_blob?e.tmp.name_node.top.blobs=[l,e.tmp.label_blob]:e.tmp.name_node.top.blobs.length?e.tmp.name_node.top.blobs[0].blobs=[l]:e.tmp.name_node.top.blobs=[l],e.tmp.substituted_variable=u),e.tmp.last_rendered_name=s);e.tmp.subsequent_author_substitute_ok=!1}}})),("text"===this.name&&!this.postponed_macro||-1<["number","date","names"].indexOf(this.name))&&this.execs.push(function(e,t){1<e.tmp.element_trace.mystack.length&&e.tmp.element_trace.pop()})},we.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for(e=""+(e=(e=parseInt(t[1],10))<0?1e20+e:e);e.length<20;)e="0"+e;return e},we.Util.LongOrdinalizer=function(){},we.Util.LongOrdinalizer.prototype.init=function(e){this.state=e},we.Util.LongOrdinalizer.prototype.format=function(e,t){var r=(r=we.Engine.getField(we.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+(e=e<10?"0"+e:e),"long",0,t))||this.state.fun.ordinalizer.format(e,t);return this.state.tmp.cite_renders_content=!0,r},we.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}},we.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0;e<3;e+=1){var t=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][t]=[];for(var r=1;r<5;r+=1){var i=this.state.getTerm("ordinal-0"+r,"long",!1,t);if(void 0===i){delete this.suffixes[this.state.opt.lang][t];break}this.suffixes[this.state.opt.lang][t].push(i)}}}},we.Util.Ordinalizer.prototype.format=function(e,t){r=""+(e=parseInt(e,10));var r,i="",s=[];if(t&&s.push(t),s.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"])for(var i=this.state.getTerm("ordinal",!1,0,t),n=0,a=s.length;n<a;n+=1){var o=s[n],l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][r]&&l["whole-number"][r][o]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][r][o],!1,0,t):l["last-two-digits"][r.slice(r.length-2)]&&l["last-two-digits"][r.slice(r.length-2)][o]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][r.slice(r.length-2)][o],!1,0,t):l["last-digit"][r.slice(r.length-1)]&&l["last-digit"][r.slice(r.length-1)][o]&&(i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][r.slice(r.length-1)][o],!1,0,t)),i)break}else t=t||void 0,this.state.fun.ordinalizer.init(),i=e/10%10==1||10<e&&e<20?this.suffixes[this.state.opt.lang][t][3]:e%10==1&&e%100!=11?this.suffixes[this.state.opt.lang][t][0]:e%10==2&&e%100!=12?this.suffixes[this.state.opt.lang][t][1]:e%10==3&&e%100!=13?this.suffixes[this.state.opt.lang][t][2]:this.suffixes[this.state.opt.lang][t][3];return r+=i},we.Util.Romanizer=function(){},we.Util.Romanizer.prototype.format=function(e){var t,r,i,s,n="";if(e<6e3)for((i=e.toString().split("")).reverse(),s=i.length,t=t=0;t<s;t+=1)r=parseInt(i[t],10),n=we.ROMAN_NUMERALS[t][r]+n;return n},we.Util.Suffixator=function(e){e=e||we.SUFFIX_CHARS,this.slist=e.split(",")},we.Util.Suffixator.prototype.format=function(e){e+=1;var t="";do{var r,t=this.slist[(r=e%26==0?26:e%26)-1]+t}while(0!==(e=(e-r)/26));return t},we.Engine.prototype.processNumber=function(l,v,_){var x=this,o=_,e=(_="page-first"===_?"page":_,",\\s+and\\s+|\\s+and\\s+"),t=("en"!==this.opt.lang.slice(0,2)&&(e+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+"),"\\s*&\\s*"),w=new RegExp("^"+t+"$"),E=new RegExp("("+t+"|"+e+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),O=new RegExp("(?:"+t+"|"+e+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),t=this.getTerm("and"),A=this.getTerm("and","symbol");function T(e,t,r,i,s){i=i||"";var n={},a=((t=t||we.STATUTE_SUBDIV_STRINGS_REVERSE[_]?t:"var:"+_)&&(a=t.match(/(\s*)([^\s]+)(\s*)/),"page"===o&&0===s&&-1===["p.","pp."].indexOf(a[2])?(n.gotosleepability=!0,n.labelVisibility=!0):n.labelVisibility=!1,n.label=a[2],n.origLabel=e,n.labelSuffix=a[3]||"",n.plural=0),r.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/));return a?(n.particle=a[1]||"",n.value=a[2]):(n.particle="",n.value=r),n.joiningSuffix=i.replace(/\s*-\s*/,"-"),n}function r(e,t){var r,i,s;if(t=t||"",e=r=(i=(r=(r=e).trim()).match(/^([^ ]+)/))&&!we.STATUTE_SUBDIV_STRINGS[i[1]]&&(i=null,i=-1<["locator","locator-extra","page"].indexOf(_)?v.label?we.STATUTE_SUBDIV_STRINGS_REVERSE[v.label]:"p.":we.STATUTE_SUBDIV_STRINGS_REVERSE[_])?i+" "+r:r,-1<(e="page"===_&&-1<e.indexOf("–")?e.replace(/\u2013/g,"-"):e).indexOf("\\-")){for(var n=new RegExp(E.source.replace("\\-","")),a=new RegExp(O.source.replace("\\-","")),o=0,l=(p=e.split("\\-")).length;o<l;o++)p[o]=p[o].replace(/\-/g,"–");s=(s=p.join("\\-")).replace(/\\/g,"")}else n=E,a=O,s=e;var u=[],m=s.match(n);if(m){for(var p=s.split(a),o=0,l=m.length;o<l;o++)m[o].match(w)&&(p[o].match(/[a-zA-Z]$/)&&p[o].match(/^[a-zA-Z]/)?m[o]=A:m[o]=" "+A+" ");for(o in p)if((""+p[o]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;for(o=0,l=p.length-1;o<l;o++)u.push(p[o]),u.push(m[o]);u.push(p[p.length-1]),u=function(e){for(var t=e.length-2;-1<t;t-=2)"-"===e[t]&&e[t-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&e[t+1].match(/^[,a-zA-Z]+$/)&&(e[t-1]=e.slice(t-1,t+2).join(""),e=e.slice(0,t).concat(e.slice(t+2)));return e}(u)}else u=[s];for(var c=[],h=t,f="",o=0,l=u.length;o<l;o+=2)if(m=u[o].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g)){for(var d,g=(p=u[o].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/)).length-1;0<g;g--)!p[g-1]||p[g].match(/^[0-9]+([-;,:a-zA-Z]*)$/)&&p[g-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||(p[g-1]=p[g-1]+m[g-1]+p[g],p=p.slice(0,g).concat(p.slice(g+1)),m=m.slice(0,g-1).concat(m.slice(g)));0<m.length&&(d=m[0].trim(),!we.STATUTE_SUBDIV_STRINGS[d]||void 0===x.getTerm(we.STATUTE_SUBDIV_STRINGS[d])||-1===["locator","number","locator-extra","page"].indexOf(_)&&we.STATUTE_SUBDIV_STRINGS[d]!==_?0===o&&(m=m.slice(1),p[0]=p[0]+" "+d+" "+p[1],p=p.slice(0,1).concat(p.slice(2))):f=d);for(var b,g=0,y=p.length;g<y;g++)!p[g]&&g!==p.length-1||(b=f===(h=m[g-1]||h).trim()?"":f,s=p[g]?p[g].trim():"",g===p.length-1?c.push(T(b,h,s,u[o+1],o)):c.push(T(b,h,s,null,o)))}else b=f===h.trim()?"":f,c.push(T(b,h,u[o],u[o+1]));return c}function i(e,t,r){var i=e[r.pos],s=e[t].value,n="\\-"===i.joiningSuffix,a=(s.particle&&s.particle!==i.particle&&(r.collapsible=!1),s.match(/^[0-9]+([-,:a-zA-Z]*)$/)),i=i.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if(s&&a&&i&&!n||(r.collapsible=!1,s&&i||(r.numeric=!1),n&&r.count--),(a&&a[1]||i&&i[1])&&(r.collapsible=!1),void 0===e[t].collapsible){for(var o=t,l=t+r.count;o<l;o++)isNaN(parseInt(e[o].value))&&!e[o].value.match(/^[ivxlcmIVXLCM]+$/)?e[o].collapsible=!1:e[o].collapsible=!0;r.collapsible=e[t].collapsible}for(var u=r.collapsible,o=r.pos,l=r.pos+r.count;o<l;o++)1<r.count&&u&&(e[o].plural=1),e[o].numeric=r.numeric,e[o].collapsible=r.collapsible}function s(e,t,r){"var:"!==r.label.slice(0,4)&&(0===r.pos?(-1<["locator","number","locator-extra","page"].indexOf(_)&&void 0===x.getTerm(we.STATUTE_SUBDIV_STRINGS[r.label])&&(e[r.pos].labelVisibility=!0),-1===["locator","number","locator-extra","page"].indexOf(_)&&we.STATUTE_SUBDIV_STRINGS[r.label]!==_&&(e[0].labelVisibility=!0)):e[r.pos].labelVisibility=!0)}function u(e){return e.replace("\\-","-")}function n(e){var t=we.Util.cloneToken(l),r=new we.Token,i=(x.tmp.just_looking||(r.decorations=t.decorations,t.decorations=[],r.strings.prefix=t.strings.prefix,t.strings.prefix="",r.strings.suffix=t.strings.suffix,t.strings.suffix=""),e.length?e[0].label:null);if(e.length){for(var s=0,n=e.length;s<n;s++){var a=e[s],o=we.Util.cloneToken(t);o.gender=l.gender,i===a.label&&(o.formatter=l.formatter),a.numeric&&(o.successor_prefix=a.successor_prefix),o.strings.suffix=o.strings.suffix+u(a.joiningSuffix),a.styling=o}x.tmp.just_looking||'"'===e[0].value.slice(0,1)&&'"'===e[e.length-1].value.slice(-1)&&(e[0].value=e[0].value.slice(1),e[e.length-1].value=e[e.length-1].value.slice(0,-1),r.decorations.push(["@quotes",!0]))}return r}function m(e,t){return"page"===e||-1<["locator","locator-extra"].indexOf(e)&&(-1<["p."].indexOf(t.label)||-1<["p."].indexOf(t.origLabel))}function a(e,t,r,i){var s,n,a=m(e,t);return t=t,n=!0,-1<["locator","locator-extra","page"].indexOf(s=e)&&(s=t.origLabel||t.label,n=!!x.getTerm(we.STATUTE_SUBDIV_STRINGS[s])),r=n&&"-"===r&&i&&((a||-1<["locator","locator-extra","issue","volume","edition","number"].indexOf(e))&&(r=(r=x.getTerm("page-range-delimiter"))||"–"),"collection-number"===e)?(r=x.getTerm("year-range-delimiter"))||"–":r}function p(e,t,r){var i,s,n;t<1||2===r.count&&e[t-1].particle===e[t].particle&&("-"!==e[t-1].joiningSuffix?r.count=1:!x.opt["page-range-format"]&&parseInt(e[t-1].value,10)>parseInt(e[t].value,10)?e[t-1].joiningSuffix=a(_,e[t],e[t-1].joiningSuffix,!0):(i=e[t],(s=(s=!m(_,i)||isNaN(parseInt(e[t-1].value))||isNaN(parseInt(e[t].value))?((""+e[t-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+e[t].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(e[t-1].joiningSuffix=x.getTerm("page-range-delimiter")),e[t-1].value+u(e[t-1].joiningSuffix)+e[t].value):(s=e[t-1].particle+e[t-1].value+" - "+e[t].particle+e[t].value,x.fun.page_mangler(s))).match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/))&&(n=s[3],n=a(_,i,n,e[t].numeric),e[t-1].particle=s[1],e[t-1].value=s[2],e[t-1].joiningSuffix=n,e[t].particle=s[4],e[t].value=s[5]),r.count=0))}function c(e){if(l&&-1!==["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(_)){for(var t={count:0,label:null,lastHadRangeDelimiter:!1},r=0,i=e.length;r<i;r++){var s,n=e[r];n.collapsible?t.label===n.label&&"-"===n.joiningSuffix?t.count=1:t.label===n.label&&"-"!==n.joiningSuffix?(t.count++,2===t.count&&p(e,r,t)):t.label!==n.label?(t.label=n.label,t.count=1):(t.count=1,t.label=n.label):(t.count=0,t.label=null,s=n.numeric,n.joiningSuffix=a(_,n,n.joiningSuffix,s))}2===t.count&&p(e,e.length-1,t)}}if(t===A&&(A="&"),l&&this.tmp.shadow_numbers[o]&&this.tmp.shadow_numbers[o].values.length)c(f=this.tmp.shadow_numbers[o].values),this.tmp.shadow_numbers[o].masterStyling=n(f);else if(this.tmp.shadow_numbers[o]||(this.tmp.shadow_numbers[o]={values:[]}),v){var h,e=we.LangPrefsMap[_];if((h=(h=e?(t=this.opt["cite-lang-prefs"][e][0],(h=this.transform.getTextSubField(v,o,"locale-"+t,!0)).name):v[o])&&"number"===o&&"legal_case"===v.type?h.replace(/[\\]*-/g,"\\-"):h)&&this.sys.getAbbreviation&&(e=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(o,h):h,t=this.transform.loadAbbreviation(v.jurisdiction,"number",e,v.language),this.transform.abbrevs[t].number)&&(this.transform.abbrevs[t].number[e]?h=this.transform.abbrevs[t].number[e]:void 0!==this.transform.abbrevs[t].number[e]&&delete this.transform.abbrevs[t].number[e]),void 0!==h&&("string"==typeof h||"number"==typeof h)){"number"==typeof h&&(h=""+h);t=we.STATUTE_SUBDIV_STRINGS_REVERSE[_];if(0===this.tmp.shadow_numbers[o].values.length){for(var f,d,g=f=r(h,t),b=0,y=g.length-1;b<y;b++)!g[b].joiningSuffix&&g[b+1].label&&(g[b].joiningSuffix=" ");var k=f;if(0!==k.length){for(var S=0,j=1,I=1,C=k.length;I<C;I++){var N,R=k[I-1],D=k[I];R.label===D.label&&R.particle==R.particle?j++:((N=JSON.parse(JSON.stringify(k[S]))).pos=S,N.count=j,N.numeric=!0,i(k,S,N),R.label!==D.label&&s(k,0,N),S=I,j=1)}(N=JSON.parse(JSON.stringify(k[S]))).pos=S,N.count=j,N.numeric=!0,i(k,S,N),s(k,0,N),k.length&&k[0].numeric&&"number-of-"===_.slice(0,10)&&1<parseInt(v[o],10)&&(k[0].plural=1)}for(d of f)d.numeric||(d.plural=0);this.tmp.shadow_numbers[o].values=f,l&&(c(f),this.tmp.shadow_numbers[o].masterStyling=n(f)),e=this.tmp.shadow_numbers,h=f,e=e[o],h.length&&(e.numeric=h[0].numeric,e.collapsible=h[0].collapsible,e.plural=h[0].plural,e.label=we.STATUTE_SUBDIV_STRINGS[h[0].label],"number"===_)&&"issue"===e.label&&x.getTerm("number")&&(e.label="number")}t=this.tmp.shadow_numbers[o];"number"===_&&1===t.values.length&&-1<t.values[0].value.indexOf("|")&&(t.values[0].value=t.values[0].value.replace(/\|/g,", "),t.values[0].numeric=!0,t.values[0].plural=1,t.values[0].collapsible=!1,t.numeric=!0,t.plural=1,t.collapsible=!1),1===t.values.length&&t.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(t.values[0].numeric=!0,t.values[0].plural=0,t.values[0].collapsible=!1,t.numeric=!0,t.plural=0,t.collapsible=!1),"page"===_&&0<t.values.length&&t.values[0].gotosleepability&&(t.labelForm="short")}}},we.Util.outputNumericField=function(e,t,r){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);for(var i=e.tmp.shadow_numbers[t].masterStyling,s=e.tmp.shadow_numbers[t].values,n=s.length?s[0].label:null,a=e.tmp.shadow_numbers[t].labelForm,o=e.tmp.group_context.tip.label_static,l=a||"short",u=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,m=e.tmp.shadow_numbers[t].labelDecorations,p=null,c=0,h=s.length;c<h;c++){var f,d,g=s[c],b="",y=-1,v=((b=g.label&&(f="var:"===g.label.slice(0,4)?g.label.slice(4):we.STATUTE_SUBDIV_STRINGS[g.label])&&(b=g.label===n?(b=o&&-1===(b=e.getTerm(f,"static",g.plural)).indexOf("%s")?"":b)||e.getTerm(f,a,g.plural):(b=o&&-1===(b=e.getTerm(f,"static",g.plural)).indexOf("%s")?"":b)||e.getTerm(f,l,g.plural),u)?we.Output.Formatters["capitalize-first"](e,b):b)&&(y=b.indexOf("%s")),we.Util.cloneToken(g.styling));v.formatter=g.styling.formatter,v.type=g.styling.type,v.num=g.styling.num,v.gender=g.styling.gender,0<y&&y<b.length-2?(v.strings.prefix+=b.slice(0,y),v.strings.suffix=b.slice(y+2)+v.strings.suffix):g.labelVisibility&&(b||(b=g.label,f=g.label),0<y?((d=new we.Token).decorations=m,e.output.append(b.slice(0,y),d)):y!==b.length-2&&-1!==y||e.output.append(b+g.labelSuffix,"empty")),we.UPDATE_GROUP_CONTEXT_CONDITION(e,i.strings.prefix,null,i,""+g.particle+g.value),g.collapsible?(void 0===(d=g.value.match(/^[1-9][0-9]*$/)&&Number.isSafeInteger(parseInt(g.value,10))?new we.NumericBlob(e,g.particle,parseInt(g.value,10),v,r):new we.NumericBlob(e,g.particle,g.value,v,r)).gender&&(d.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(d,"literal")):e.output.append(g.particle+g.value,v),0===y&&y<b.length-2&&(f===(p=null===p?f:p)&&c!==s.length-1||((g=new we.Token).decorations=m,e.output.append(b.slice(y+2),g))),p=f,e.tmp.term_predecessor=!0}e.output.closeLevel()},we.Util.PageRangeMangler={},we.Util.PageRangeMangler.getFunction=function(t,r){function i(e,t,r,i){return t(b(e=""+e),r,i)}var a,o,s,n,l,u,m,p,c,e,h=t.getTerm(r+"-range-delimiter"),f=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,d=function(e){for(o=e.length,a=1;a<o;a+=2)"object"==typeof e[a]&&(e[a]=e[a].join(""));return e.join("").replace(/([^\\])\-/g,"$1"+t.getTerm(r+"-range-delimiter"))},g=function(e){var t,r="\\s+\\-\\s+",i=new RegExp("([^\\\\])[-"+("-"===h?"":h)+"\\u2013]","g"),i=(e=e.replace(i,"$1 - ").replace(/\s+-\s+/g," - "),new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+r+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g")),r=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+r+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"),s=e.match(i),n=e.split(r);if(0===n.length)t=s;else for(t=[n[0]],a=1,o=n.length;a<o;a+=1)t.push(s[a-1].replace(/\s*\-\s*/g,"-")),t.push(n[a]);return t},b=function(e){for(s=g(e=""+e),o=s.length,a=1;a<o;a+=2)!(n=s[a].match(f))||n[3]&&n[1]!==n[3]||(n[4].length<n[2].length&&(n[4]=n[2].slice(0,n[2].length-n[4].length)+n[4]),parseInt(n[2],10)<parseInt(n[4],10)&&(n[3]=h+(n[1]||""),s[a]=n.slice(1))),"string"==typeof s[a]&&(s[a]=s[a].replace(/\-/g,h));return s},y=function(e,t,r){o=e.length;for(var i=1,s=e.length;i<s;i+=2)"object"==typeof e[i]&&(e[i][3]=v(e[i][1],e[i][3],t,r),e[i][2].slice(1)===e[i][0])&&(e[i][2]=h);return d(e)},v=function(e,t,r,i){if(r=r||0,l=(""+e).split(""),u=(""+t).split(""),(m=u.slice()).reverse(),l.length===u.length)for(var s,n=0,a=l.length;n<a;n+=1){if(!(l[n]===u[n]&&m.length>r)){r&&i&&3===m.length&&((s=l.slice(0,n)).reverse(),m=m.concat(s));break}m.pop()}return m.reverse(),m.join("")},_=function(e){for(o=e.length,a=1;a<o;a+=2)"object"==typeof e[a]&&(n=e[a],p=parseInt(n[1],10),c=parseInt(n[3],10),100<p&&p%100&&parseInt(p/100,10)===parseInt(c/100,10)?n[3]=""+c%100:1e4<=p&&(n[3]=""+c%1e3)),n[2].slice(1)===n[0]&&(n[2]=h);return d(e)},x=function(e){for(o=e.length,a=1;a<o;a+=2){if("object"==typeof e[a]&&(n=e[a],p=parseInt(n[1],10),c=parseInt(n[3],10),u=""+c,100<p)&&p%100)for(var t=2;t<u.length;t++){var r=Math.pow(10,t);if(Math.floor(p/r)===Math.floor(c/r)){n[3]=""+c%r;break}}n[2].slice(1)===n[0]&&(n[2]=h)}return d(e)};return t.opt[r+"-range-format"]?"expanded"===t.opt[r+"-range-format"]?e=function(e){return i(e,d)}:"minimal"===t.opt[r+"-range-format"]?e=function(e){return i(e,y)}:"minimal-two"===t.opt[r+"-range-format"]?e=function(e,t){return i(e,y,2,t)}:"chicago"===t.opt[r+"-range-format"]?e=function(e){return i(e,_)}:"chicago-15"===t.opt[r+"-range-format"]?e=function(e){return i(e,_)}:"chicago-16"===t.opt[r+"-range-format"]&&(e=function(e){return i(e,x)}):e=function(e){return i(e,d)},e},we.Util.FlipFlopper=function(h){var d=[],g={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}},e=(g['("']=g[' "'],g["('"]=g[" '"],h.getTerm("open-quote")),t=h.getTerm("close-quote"),r=h.getTerm("open-inner-quote"),i=h.getTerm("close-inner-quote");e&&t&&-1===[' "'," '",'"',"'"].indexOf(e)&&(g[e]=JSON.parse(JSON.stringify(g[' "'])),g[e].opener=e,g[e].closer=t),r&&i&&-1===[' "'," '",'"',"'"].indexOf(r)&&(g[r]=JSON.parse(JSON.stringify(g[" '"])),g[r].opener=r,g[r].closer=i);var u=function(){for(var e={},t=Object.keys(g),r=0,i=t.length;r<i;r++){var s=t[r];e[s]=function(e){for(var t=[],r=Object.keys(g),i=0,s=r.length;i<s;i++){var n=r[i];"quote"===g[e].type&&g[e]||t.push(n)}var a=g[e];return a.opener=new RegExp("^(?:"+t.map(function(e){return e.replace("(","\\(")}).join("|")+")"),a}(s)}return e}(),b=function(){var e,t=[],r=[],i={};for(e in u)t.push(e),i[u[e].closer]=!0;for(var s=Object.keys(i),n=0,a=s.length;n<a;n++){var o=s[n];r.push(o)}var l=t.concat(r).map(function(e){return e.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+l+"))","g"),splitAll:new RegExp("(?:"+l+")","g"),open:new RegExp("(^(?:"+t.map(function(e){return e.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+r.join("|")+")$)")}}();function y(e,t){return e.match(b.open)?(r=e,i=t,!(s=d[d.length-1])||r.match(s.opener)?(d.push({type:u[r].type,opener:u[r].opener,closer:u[r].closer,pos:i}),!1):(d.pop(),d.push({type:u[r].type,opener:u[r].opener,closer:u[r].closer,pos:i}),{fixtag:s.pos})):(r=e,i=t,(s=d[d.length-1])&&r===s.closer?(d.pop(),"nocase"===s.type&&{nocase:{open:s.pos,close:i}}):s?{fixtag:s.pos}:{fixtag:i});var r,i,s}var m=function(l){var u=[];this.set=function(e){for(var t=g[e].attr,r=null,i=u.length-1;-1<i;i--)if((a=u[i])[0]===t){r=a;break}if(!r){var s=[h[h.tmp.area].opt.layout_decorations].concat(l.alldecor);e:for(i=s.length-1;-1<i;i--){var n=s[i];if(n)for(var a,o=n.length-1;-1<o;o--)if((a=n[o])[0]===t){r=a;break e}}}r=r?[t,g[e].flipflop[r[1]]]:[t,g[e].outer],u.push(r)},this.pair=function(){return u[u.length-1]},this.pop=function(){u.pop()}};function v(e,t,r){var c=!0,i=new m(e);e.blobs=[];var s=new function(e){this.stack=[e],this.latest=e,this.addStyling=function(e,t){if(c&&(" "===(e=" "===e.slice(0,1)?e.slice(1):e).slice(0,1)&&(e=e.slice(1)),c=!1),this.latest=this.stack[this.stack.length-1],t){"string"==typeof this.latest.blobs&&((p=new we.Blob).blobs=this.latest.blobs,p.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[p]);var r=new we.Token,i=new we.Blob(null,r);if(i.alldecor=this.latest.alldecor.slice(),"@class"===t[0]&&"nodecor"===t[1]){for(var s=[],n={},a=[h[h.tmp.area].opt.layout_decorations].concat(i.alldecor),o=a.length-1;-1<o;o--){var l=a[o];if(l)for(var u=l.length-1;-1<u;u--){var m=l[u];-1<["@font-weight","@font-style","@font-variant"].indexOf(m[0])&&!n[m[0]]&&("normal"!==t[1]&&(i.decorations.push([m[0],"normal"]),s.push([m[0],"normal"])),n[m[0]]=!0)}}i.alldecor.push(s)}else i.decorations.push(t),i.alldecor.push([t]);this.latest.blobs.push(i),this.stack.push(i),this.latest=i,e&&(r=new we.Token,(i=new we.Blob(null,r)).blobs=e,i.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(i))}else{var p;e&&((p=new we.Blob).blobs=e,p.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(p))}},this.popStyling=function(){this.stack.pop()}}(e);t.strings.length&&(l=t.strings[0],s.addStyling(l=r?" "+l:l));for(var n=0,a=t.tags.length;n<a;n++){var o=t.tags[n],l=t.strings[n+1];o.match(b.open)?(i.set(o),s.addStyling(l,i.pair())):(i.pop(),s.popStyling(),s.addStyling(l))}}this.processTags=function(e){var t=!1,r=(" "!==(o=e.blobs).slice(0,1)||o.match(/^\s+[\'\"]/)||(t=!0),new RegExp("("+we.ROMANESQUE_REGEXP.source+")’("+we.ROMANESQUE_REGEXP.source+")","g")),i=function(e){var t=[],r=(e=(e=e.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(b.matchAll);if(!r)return{tags:[],strings:[e],forcedSpaces:[]};for(var i=e.split(b.splitAll),s=0,n=r.length-1;s<n;s++)g[r[s]]&&(""===i[s+1]&&-1<['"',"'"].indexOf(r[s+1])?(r[s+1]=" "+r[s+1],t.push(!0)):t.push(!1));return{tags:r,strings:i,forcedSpaces:t}}(o=" "+o.replace(r,"$1'$2"));if(0!==i.tags.length){for(var s=!1,n=0,a=i.tags.length;n<a;n++){var o,l,u,m=function(e,t){if("'"===e){if(t&&t.match(/^[^\,\.\?\:\;\ ]/))return"’"}else if(" '"===e&&t&&t.match(/^[\ ]/))return" ’";return!1}(c=i.tags[n],o=i.strings[n+1]);if(m)i.strings[n+1]=m+i.strings[n+1],i.tags[n]="";else{for(;;){if(!(l=y(c,n)))break;if(!(-1<Object.keys(l).indexOf("fixtag"))){if(l.nocase){i.tags[l.nocase.open]="",i.tags[l.nocase.close]="";break}break}if(c.match(b.close)&&"'"===c?(i.strings[n+1]="’"+i.strings[n+1],i.tags[n]=""):(u=i.tags[l.fixtag],i.forcedSpaces[l.fixtag-1]&&(u=u.slice(1)),i.strings[l.fixtag+1]=u+i.strings[l.fixtag+1],i.tags[l.fixtag]=""),!(0<d.length))break;if("'"===c)break;d.pop()}l&&(l.fixtag||0===l.fixtag)&&(i.strings[n+1]=i.tags[n]+i.strings[n+1],i.tags[n]="")}}for(n=d.length-1;-1<n;n--){var p=d[n].pos,c=i.tags[p];i.strings[p+1]=" '"===c||"'"===c?" ’"+i.strings[p+1]:i.tags[p]+i.strings[p+1],i.tags[p]="",d.pop()}for(n=i.tags.length-1;-1<n;n--)i.tags[n]||(i.tags=i.tags.slice(0,n).concat(i.tags.slice(n+1)),i.strings[n]=i.strings[n]+i.strings[n+1],i.strings=i.strings.slice(0,n+1).concat(i.strings.slice(n+2)));for(var h,n=0,a=i.tags.length;n<a;n++){var c=i.tags[n],f=i.forcedSpaces[n-1];-1<[' "'," '",'("',"('"].indexOf(c)&&(s||(g[h=c].outer="true",g[{" '":' "',' "':" '",'("':"('","('":'("'}[h]].outer="inner",s=!0),f||(i.strings[n]+=c.slice(0,1)))}v(e,i,t)}}},we.Output.Formatters=(p=new we.Doppeler('(?:‘|’|“|”| "| \'|"|\'|[-–—/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',function(e){return e.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),s=new we.Doppeler('(?:[-\\s]*<\\/*(?:spans+class="no(?:case|decor)"|i|sc|b|sub|sup)>[-\\s]*|[-\\s]+)'),c=new we.Doppeler("(?:[    -​ 　]+)"),h={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"},{nameDoppel:s,passthrough:function(e,t){return t},lowercase:function(n,e){return d.call(n,{quoteState:null,capitaliseWords:function(e){for(var t=e.split(" "),r=0,i=t.length;r<i;r++){var s=t[r];s&&(t[r]=we.toLocaleLowerCase.call(n,s))}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)},uppercase:function(n,e){return d.call(n,{quoteState:null,capitaliseWords:function(e){for(var t=e.split(" "),r=0,i=t.length;r<i;r++){var s=t[r];s&&(t[r]=we.toLocaleUpperCase.call(n,s))}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)},sentence:function(n,e){var a={quoteState:[],capitaliseWords:function(e){for(var t=e.split(" "),r=0,i=t.length;r<i;r++){var s=t[r];s&&(a.isFirst?(t[r]=f.call(n,s),a.isFirst=!1):t[r]=we.toLocaleLowerCase.call(n,s))}return t.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return d.call(n,a,e)},title:function(u,e){var m={quoteState:[],capitaliseWords:function(e,t,r){if(e.trim()){for(var i=c.split(e),s=i.strings,n=0,a=s.length;n<a;n++){var o=s[n];if(o){var l=we.toLocaleLowerCase.call(u,o);let e=!1;(e=1<o.length&&!l.match(m.skipWordsRex)||n===s.length-1&&"-"===r||m.isFirst||m.afterPunct?!0:e)&&o===l&&(s[n]=f.call(u,o)),m.afterPunct=!1,m.isFirst=!1,m.lastWordPos={strings:t,words:n}}}e=c.join(i)}return e},skipWordsRex:u.locale[u.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return d.call(u,m,e)},"capitalize-first":function(n,e){var a={quoteState:[],capitaliseWords:function(e){for(var e=c.split(e),t=e.strings,r=0,i=t.length;r<i;r++){var s=t[r];if(s&&a.isFirst){s===we.toLocaleLowerCase.call(n,s)&&(t[r]=f.call(n,s)),a.isFirst=!1;break}}return c.join(e)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return d.call(n,a,e)},"capitalize-all":function(n,e){return d.call(n,{quoteState:[],capitaliseWords:function(e){for(var e=c.split(e),t=e.strings,r=0,i=t.length;r<i;r++){var s=t[r];s&&s===we.toLocaleLowerCase.call(n,s)&&(t[r]=f.call(n,s))}return c.join(e)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)}}),we.Output.Formats=function(){},we.Output.Formats.prototype.html={text_escape:function(e){return(e=e||"").replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"  ").replace(we.SUPERSCRIPTS_REGEXP,function(e){return"<sup>"+we.SUPERSCRIPTS[e]+"</sup>"})},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":we.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="";return'  <div class="csl-entry">'+t+"</div>\n"+(r=e.sys.embedBibliographyEntry?e.sys.embedBibliographyEntry(this.item_id)+"\n":r)},"@display/block":function(e,t){return'\n\n    <div class="csl-block">'+t+"</div>\n"},"@display/left-margin":function(e,t){return'\n    <div class="csl-left-margin">'+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+"</div>\n  "},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+"</div>\n  "},"@showid/true":function(e,t,r){var i;return e.tmp.just_looking||e.tmp.suppress_decorations?t:r?'<span class="'+e.opt.nodenames[r]+'" cslid="'+r+'">'+t+"</span>":this.params&&"string"==typeof t?(r="",t&&(r=(i=t.match(we.VARIABLE_WRAPPER_PREPUNCT_REX))[1],t=i[2]),i="",t&&-1<we.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,i)):t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var r=t;return'<a href="'+(r=t.match(/^https?:\/\//)?r:"https://doi.org/"+t)+'">'+t+"</a>"}},we.Output.Formats.prototype.text={text_escape:function(e){return e=e||""},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":we.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t+" "},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},we.Output.Formats.prototype.rtf={text_escape:function(e){return(e=e||"").replace(/([\\{}])/g,"\\$1").replace(we.SUPERSCRIPTS_REGEXP,function(e){return"\\super "+we.SUPERSCRIPTS[e]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(e){return"\\uc0\\u"+e.charCodeAt(0).toString()+"{}"}).split("\t").join("\\tab{}")},"@passthrough/true":we.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?we.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):we.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+we.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return void 0===t?we.Output.Formats.rtf.text_escape("’"):we.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+we.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+"\r\n"},"@display/indent":function(e,t){return"\n\\tab "+t+"\\line\r\n"},"@showid/true":function(e,t){var r,i;return e.tmp.just_looking||e.tmp.suppress_decorations?t:(r="",t&&(r=(i=t.match(we.VARIABLE_WRAPPER_PREPUNCT_REX))[1],t=i[2]),i="",t&&-1<we.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,i))},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},we.Output.Formats.prototype.asciidoc={text_escape:function(e){return(e=e||"").replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(we.SUPERSCRIPTS_REGEXP,function(e){return"^"+we.SUPERSCRIPTS[e]+"^"})},bibstart:"",bibend:"","@passthrough/true":we.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return void 0===t?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){var r,i;return e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t?t:(r="",t&&(r=(i=t.match(we.VARIABLE_WRAPPER_PREPUNCT_REX))[1],t=i[2]),i="",t&&-1<we.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,i))},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var r=t;return(r=t.match(/^https?:\/\//)?r:"https://doi.org/"+t)+"["+t+"]"}},we.Output.Formats.prototype.fo={text_escape:function(e){return(e=e||"").replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(we.SUPERSCRIPTS_REGEXP,function(e){return'<fo:inline vertical-align="super">'+we.SUPERSCRIPTS[e]+"</fo:inline>"})},bibstart:"",bibend:"","@passthrough/true":we.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="",i=(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent&&(r=' start-indent="'+(i=e.bibliography.opt.hangingindent)+'em" text-indent="-'+i+'em"'),"");return e.sys.embedBibliographyEntry&&(i=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'<fo:block id="'+this.system_id+'"'+r+">"+t+"</fo:block>\n"+i},"@display/block":function(e,t){return"\n  <fo:block>"+t+"</fo:block>\n"},"@display/left-margin":function(e,t){return'\n  <fo:table table-layout="fixed" width="100%">\n    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>\n    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>\n    <fo:table-body>\n      <fo:table-row>\n        <fo:table-cell>\n          <fo:block>'+t+"</fo:block>\n        </fo:table-cell>\n        "},"@display/right-inline":function(e,t){return"<fo:table-cell>\n          <fo:block>"+t+"</fo:block>\n        </fo:table-cell>\n      </fo:table-row>\n    </fo:table-body>\n  </fo:table>\n"},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+"</fo:block>\n"},"@showid/true":function(e,t){var r,i;return e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t?t:(r="",t&&(r=(i=t.match(we.VARIABLE_WRAPPER_PREPUNCT_REX))[1],t=i[2]),i="",t&&-1<we.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))&&(i=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,i))},"@URL/true":function(e,t){return"<fo:basic-link external-destination=\"url('"+t+"')\">"+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var r=t;return"<fo:basic-link external-destination=\"url('"+(r=t.match(/^https?:\/\//)?r:"https://doi.org/"+t)+"')\">"+t+"</fo:basic-link>"}},we.Output.Formats.prototype.latex={text_escape:function(e){return e=e||""},bibstart:"\\begin{thebibliography}{4}",bibend:"\\end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":we.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":we.Output.Formatters.passthrough,"@strip-periods/false":we.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"’":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+"}\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t,r){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},we.Output.Formats=new we.Output.Formats,we.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new we.Registry.NameReg(e),this.citationreg=new we.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new we.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var e=[],t=0,r=this.reflist.length;t<r;t+=1)e.push(""+this.reflist[t].id);return e},this.getSortedRegistryItems=function(){for(var e=[],t=0,r=this.reflist.length;t<r;t+=1)e.push(this.reflist[t]);return e}},we.Registry.prototype.init=function(e,t){if(this.oldseq={},t){this.uncited={};for(var r=0,i=e.length;r<i;r+=1)this.myhash[e[r]]||this.mylist.push(""+e[r]),this.uncited[e[r]]=!0,this.myhash[e[r]]=!0}else{for(var s in this.uncited)e.push(s);var n={};for(r=e.length-1;-1<r;r+=-1)n[e[r]]?e=e.slice(0,r).concat(e.slice(r+1)):n[e[r]]=!0;this.mylist=e,this.myhash=n}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},we.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;-1<t;t+=-1)!this.citationreg.citationsByItemId||this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[this.mylist[t]]||e[this.mylist[t]]||(delete this.myhash[this.mylist[t]],delete this.uncited[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1)));this.dodeletes(this.myhash)},we.Registry.prototype.dodeletes=function(e){var t,r,i,s,n,a;for(a in"string"==typeof e&&(a=e,(e={})[a]=!0),this.registry)if(!e[a]&&!this.uncited[a]){for(s in this.namereg.delitems(a))this.refreshes[s]=!0;for(t=this.registry[a].ambig,-1<(o=this.ambigcites[t].indexOf(a))&&(l=this.ambigcites[t].slice(),this.ambigcites[t]=l.slice(0,o).concat(l.slice(o+1,l.length)),this.ambigresets[t]=this.ambigcites[t].length),i=this.ambigcites[t].length,r=0;r<i;r+=1)n=""+this.ambigcites[t][r],this.refreshes[n]=!0;if(this.registry[a].siblings)if(1==this.registry[a].siblings.length){var o=this.registry[a].siblings[0];this.registry[o].siblings&&(this.registry[o].siblings.pop(),this.registry[o].master=!0)}else if(1<this.registry[a].siblings.length){for(var l,u=[a],m=(this.registry[a].master&&(l=this.registry[a].siblings[0],this.registry[l].master=!0,u.push(l)),[]),p=this.registry[a].siblings.length-1;-1<p;p+=-1){var c=this.registry[a].siblings.pop();-1===u.indexOf(c)&&m.push(c)}for(p=m.length-1;-1<p;p+=-1)this.registry[a].siblings.push(m[p])}for(var h=this.reflist.length-1;-1<h;h--)this.reflist[h].id===a&&(this.reflist=this.reflist.slice(0,h).concat(this.reflist.slice(h+1)));delete this.registry[a],delete this.refhash[a],this.return_data.bibchange=!0}},we.Registry.prototype.doinserts=function(e){for(var t,r,i,s=0,n=(e="string"==typeof e?[e]:e).length;s<n;s+=1)t=e[s],this.registry[t]||(i=this.state.retrieveItem(t),r=we.getAmbiguousCite.call(this.state,i),this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),this.registry[t]={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:i,newItem:!0},this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),i=we.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,i),this.touched[t]=!0,this.return_data.bibchange=!0)},we.Registry.prototype.rebuildlist=function(e){var t,r,i,s;if(e)for(this.reflist=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],s=this.registry[i],this.reflist.push(s),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1;else for(this.reflist_inserts=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],(s=this.registry[i]).newItem&&this.reflist_inserts.push(s),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1},we.Registry.prototype.dorefreshes=function(){var e,t,r,i,s,n,a;for(t in this.refreshes)if(e=this.registry[t]){for(r in e.sortkeys=void 0,s=this.state.refetchItem(t),void 0===(n=e.ambig)&&(this.state.tmp.disambig_settings=!1,n=we.getAmbiguousCite.call(this.state,s),a=we.getAmbigConfig.call(this.state),this.registerAmbigToken(n,t,a)),this.ambigresets)1===this.ambigresets[r]&&(i=this.ambigcites[n][0],s=this.state.refetchItem(i),this.registry[i].disambig=new we.AmbigConfig,this.state.tmp.disambig_settings=!1,n=we.getAmbiguousCite.call(this.state,s),a=we.getAmbigConfig.call(this.state),this.registerAmbigToken(n,i,a));this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[n]=!0,s.legislation_id||(this.akeys[n]=!0),this.touched[t]=!0}},we.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}},we.Registry.prototype.renumber=function(){var e,t,r;for(this.state.bibliography_sort.opt.citation_number_sort_direction===we.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)(r=this.reflist[t]).seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===we.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[r.seq]=this.reflist.length-r.seq+1),this.state.opt.update_mode===we.NUMERIC&&r.seq!=this.oldseq[r.id]&&(this.state.tmp.taintedItemIDs[r.id]=!0),r.seq!=this.oldseq[r.id]&&(this.return_data.bibchange=!0)},we.Registry.prototype.setsortkeys=function(){for(var e=0,t=this.mylist.length;e<t;e+=1){var r=this.mylist[e];!this.touched[r]&&!this.state.tmp.taintedItemIDs[r]&&this.registry[r].sortkeys||(this.registry[r].sortkeys=we.getSortKeys.call(this.state,this.state.retrieveItem(r),"bibliography_sort"))}},we.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t},we.Registry.prototype._locationOf=function(e,t,r,i){if(0===t.length)return-1;var s=(r=r||0)+(i=i||t.length)>>1,n=this.sorter.compareKeys(e,t[s]);if(i-r<=1)return-1==n?s-1:s;switch(n){case-1:return this._locationOf(e,t,r,s);case 0:return s;case 1:return this._locationOf(e,t,s,i)}},we.Registry.prototype.sorttokens=function(e){var t,r,i;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],(a=this.registry[r]).newItem&&this.reflist_inserts.push(a);for(var s in this.state.tmp.taintedItemIDs)if(this.registry[s]&&!this.registry[s].newItem)for(var n=this.reflist.length-1;-1<n;n--)this.reflist[n].id===s&&(this.reflist_inserts.push(this.reflist[n]),this.reflist=this.reflist.slice(0,n).concat(this.reflist.slice(n+1)));for(var a,n=0,o=this.reflist_inserts.length;n<o;n++)delete(a=this.reflist_inserts[n]).newItem,this.reflist=this._insertItem(a,this.reflist);for(i=0;i<t;i+=1)r=this.mylist[i],a=this.registry[r],this.registry[r].seq=i+1}},we.Registry.Comparifier=function(e,t){var i,s,r,n=we.getSortCompare.call(e,e.opt["default-locale-sort"]),a=e[t].opt.sort_directions;this.compareKeys=function(e,t){for(i=e.sortkeys?e.sortkeys.length:0,s=0;s<i;s+=1){var r=0;if(0<(r=e.sortkeys[s]===t.sortkeys[s]?0:void 0===e.sortkeys[s]?a[s][1]:void 0===t.sortkeys[s]?a[s][0]:n(e.sortkeys[s],t.sortkeys[s])))return a[s][1];if(r<0)return a[s][0]}return e.seq>t.seq?1:e.seq<t.seq?-1:0},r=this.compareKeys,this.compareCompositeKeys=function(e,t){return r(e[1],t[1])}},we.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0},we.Registry.prototype.registerAmbigToken=function(e,t,r){if(this.registry[t]||we.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var i=0,s=r.names.length;i<s;i+=1)if(r.names[i]!==this.registry[t].disambig.names[i])this.state.tmp.taintedItemIDs[t]=!0;else if(r.givens[i])for(var n=0,a=r.givens[i].length;n<a;n+=1)r.givens[i][n]!==this.registry[t].disambig.givens[i][n]&&(this.state.tmp.taintedItemIDs[t]=!0);this.ambigcites[e]||(this.ambigcites[e]=[]),-1===this.ambigcites[e].indexOf(""+t)&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=we.cloneAmbigConfig(r)},we.getSortKeys=function(e,t){var r,i,s=this.tmp.area,n=this.tmp.root,a=this.tmp.extension,o=we.Util.Sort.strip_prepositions;for(this.tmp.area=t,this.tmp.root=-1<t.indexOf("_")?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,we.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,r=this[t].keys.length,i=0;i<r;i+=1)this[t].keys[i]=o(this[t].keys[i]);return this.tmp.area=s,this.tmp.root=n,this.tmp.extension=a,this[t].keys},we.Registry.NameReg=function(u){var m,p,c,o,l,h,i,f,e,t,d;this.state=u,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},i=function(e){return(e=e||"").replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},f=function(e,t,r){m=i(r.family),"never"===e.opt["demote-non-dropping-particle"]&&r["non-dropping-particle"]&&r.family&&(m=m+" "+r["non-dropping-particle"]);r=(c=i(r.given)).match(/[,\!]* ([^,]+)$/);r&&r[1]===r[1].toLowerCase()&&(c=c.replace(/[,\!]* [^,]+$/,"")),p=we.Util.Names.initializeWith(e,c,"%s"),"by-cite"===e.citation.opt["givenname-disambiguation-rule"]&&(m=""+t+m)},e=function(e,t,r,i,s,n){var a;return"bibliography"!==u.tmp.area.slice(0,12)||s?(t=u.nameOutput.getName(t,"locale-translit",!0).name,f(this.state,""+e,t),t=2,o=u.opt["disambiguate-add-givenname"],a=l=u.citation.opt["givenname-disambiguation-rule"],"by-cite"===l&&(l="all-names"),"short"===s?t=0:"string"==typeof n&&(t=1),void 0===this.namereg[m]||void 0===this.namereg[m].ikey[p]?t:"by-cite"===a&&t<=i?i:!o||"string"==typeof l&&"primary-name"===l.slice(0,12)&&0<r||(l&&"all-names"!==l&&"primary-name"!==l?"all-names-with-initials"!==l&&"primary-name-with-initials"!==l||(t=1<this.namereg[m].count?1:0):(1<this.namereg[m].count&&(t=1),(this.namereg[m].ikey&&1<this.namereg[m].ikey[p].count||1<this.namereg[m].count&&"string"!=typeof n)&&(t=2)),u.registry.registry[e])?t:"short"==s?0:"string"==typeof n?1:void 0):"string"==typeof n?1:2},t=function(e){for(var t,r,i,s=(e="string"!=typeof e&&"number"!=typeof e?e:[""+e]).length,n=0;n<s;n+=1)if(r=""+e[n],this.nameind[r]){for(i in this.nameind[r])if(this.nameind[r].hasOwnProperty(i)){var a=i.split("::");if(m=a[0],p=a[1],c=a[2],void 0!==this.namereg[m]){if(h=this.namereg[m].items,c&&this.namereg[m].ikey[p]&&this.namereg[m].ikey[p].skey[c]&&(-1<(t=(d=this.namereg[m].ikey[p].skey[c].items).indexOf(r))&&(this.namereg[m].ikey[p].skey[c].items=d.slice(0,t).concat(d.slice([t+1]))),0===this.namereg[m].ikey[p].skey[c].items.length)&&(delete this.namereg[m].ikey[p].skey[c],this.namereg[m].ikey[p].count+=-1,this.namereg[m].ikey[p].count<2))for(var o=0,l=this.namereg[m].ikey[p].items.length;o<l;o+=1)u.tmp.taintedItemIDs[this.namereg[m].ikey[p].items[o]]=!0;if(p&&this.namereg[m].ikey[p]&&(-1<(t=this.namereg[m].ikey[p].items.indexOf(r))&&(h=this.namereg[m].ikey[p].items.slice(),this.namereg[m].ikey[p].items=h.slice(0,t).concat(h.slice([t+1]))),0===this.namereg[m].ikey[p].items.length)&&(delete this.namereg[m].ikey[p],this.namereg[m].count+=-1,this.namereg[m].count<2))for(o=0,l=this.namereg[m].items.length;o<l;o+=1)u.tmp.taintedItemIDs[this.namereg[m].items[o]]=!0;m&&(-1<(t=this.namereg[m].items.indexOf(r))&&(h=this.namereg[m].items.slice(),this.namereg[m].items=h.slice(0,t).concat(h.slice([t+1],h.length))),this.namereg[m].items.length<2)&&delete this.namereg[m],delete this.nameind[r][i]}}delete this.nameind[r],delete this.nameindpkeys[r]}return{}},this.addname=function(e,t,r){var i=u.nameOutput.getName(t,"locale-translit",!0);if(t=i.name,!u.citation.opt["givenname-disambiguation-rule"]||"primary-"!==u.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===r){if(f(this.state,""+e,t),m&&(void 0===this.namereg[m]?(this.namereg[m]={},this.namereg[m].count=0,this.namereg[m].ikey={},this.namereg[m].items=[e]):-1===this.namereg[m].items.indexOf(e)&&this.namereg[m].items.push(e)),m&&p)if(void 0===this.namereg[m].ikey[p]){if(this.namereg[m].ikey[p]={},this.namereg[m].ikey[p].count=0,this.namereg[m].ikey[p].skey={},this.namereg[m].ikey[p].items=[e],this.namereg[m].count+=1,2===this.namereg[m].count)for(var s=0,n=this.namereg[m].items.length;s<n;s+=1)u.tmp.taintedItemIDs[this.namereg[m].items[s]]=!0}else-1===this.namereg[m].ikey[p].items.indexOf(e)&&this.namereg[m].ikey[p].items.push(e);if(m&&p&&c)if(void 0===this.namereg[m].ikey[p].skey[c]){if(this.namereg[m].ikey[p].skey[c]={},this.namereg[m].ikey[p].skey[c].items=[e],this.namereg[m].ikey[p].count+=1,2===this.namereg[m].ikey[p].count)for(s=0,n=this.namereg[m].ikey[p].items.length;s<n;s+=1)u.tmp.taintedItemIDs[this.namereg[m].ikey[p].items[s]]=!0}else-1===this.namereg[m].ikey[p].skey[c].items.indexOf(e)&&this.namereg[m].ikey[p].skey[c].items.push(e);void 0===this.nameind[e]&&(this.nameind[e]={},this.nameindpkeys[e]={}),m&&(this.nameind[e][m+"::"+p+"::"+c]=!0,this.nameindpkeys[e][m]=this.namereg[m])}},this.delitems=t,this.evalname=e},we.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]},we.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1},we.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&this.state.sys.print("[A] === RUN ==="),this.akey=e,this.initVars(e))&&this.runDisambig()},we.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&this.state.sys.print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}},we.Disambiguation.prototype.scanItems=function(e){this.debug&&this.state.sys.print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=we.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var t=0,r=1,i=e[1].length;r<i;r+=1){var s=e[1][r],n=we.getAmbiguousCite.call(this.state,s,this.base,!0);this.debug&&1<r&&this.state.sys.print("  -----------"),(this.ItemCite===n?(this.debug&&(this.state.sys.print("  [CLASH]--\x3e "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+s.id+": "+n)),t+=1,this.partners):(this.debug&&(this.state.sys.print("  [clear]--\x3e "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+s.id+": "+n)),this.nonpartners)).push(s)}this.clashes[0]=this.clashes[1],this.clashes[1]=t},we.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},we.Disambiguation.prototype.disNames=function(e){if(this.debug&&this.state.sys.print("[3] == disNames() =="),0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [a]: lone partner, one nonpartner"),this.state.sys.print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),this.state.sys.print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),this.state.sys.print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&this.state.sys.print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&this.state.sys.print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&this.state.sys.print("     (registering clashing entries because we've run out of options)");for(var t=0,r=this.partners.length;t<r;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},we.Disambiguation.prototype.disExtraText=function(){this.debug&&this.state.sys.print("[3] === disExtraText ==");var e=!1;if((e=0===this.clashes[1]&&this.nonpartners.length<2?!0:e)||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){for(var t=this.lists[this.listpos][0],r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][r].id,t);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1,(t=this.lists[this.listpos][0]).disambiguate=!0;for(r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][r].id,t)}}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var r=0,i=this.lists[this.listpos][1].length;r<i;r+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][r].id]=!0}},we.Disambiguation.prototype.disYears=function(){this.debug&&this.state.sys.print("[3] === disYears =="),e=[];var e,t=this.lists[this.listpos][0];if(this.clashes[1])for(var r=0,i=this.state.registry.mylist.length;r<i;r+=1)for(var s,n=this.state.registry.mylist[r],a=0,o=this.lists[this.listpos][1].length;a<o;a+=1)if((s=this.lists[this.listpos][1][a]).id==n){e.push(this.registry[s.id]);break}e.sort(this.state.registry.sorter.compareKeys);for(var l=0,u=e.length;l<u;l+=1){t.year_suffix=""+l;var m=this.state.registry.registry[e[l].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+e[l].id,t),we.ambigConfigDiff(m,t)&&(this.state.tmp.taintedItemIDs[e[l].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},we.Disambiguation.prototype.incrementDisambig=function(){var e,t,r;return this.debug&&this.state.sys.print("\n[1] === incrementDisambig() ==="),this.initGivens?this.initGivens=!1:(t=!(e=!1),"disNames"===this.modes[this.modeindex]?(t=!1,"number"!=typeof this.givensMax&&(t=!0),r=!1,"number"!=typeof this.namesMax&&(r=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),"number"==typeof this.namesMax&&t&&(this.state.opt["disambiguate-add-names"]&&(r=!1,this.gname<this.namesMax)?(this.base.names[this.gnameset]+=1,this.gname+=1):r=!0),"number"==typeof this.namesetsMax&&r&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(this.state.sys.print("    ------------------"),this.state.sys.print("    incremented values"),this.state.sys.print("    ------------------"),this.state.sys.print("    | gnameset: "+this.gnameset),this.state.sys.print("    | gname: "+this.gname),this.state.sys.print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?this.state.sys.print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):this.state.sys.print("    | givens value: nil"),this.state.sys.print("    | namesetsMax: "+this.namesetsMax),this.state.sys.print("    | namesMax: "+this.namesMax),this.state.sys.print("    | givensMax: "+this.givensMax)),"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&void 0!==this.base.givens[this.gnameset]&&void 0!==this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(e=!0,this.debug&&this.state.sys.print("    MAXED"))):"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1),e)},we.Disambiguation.prototype.initVars=function(e){var t,r;if(this.debug&&this.state.sys.print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},r=[],!(t=this.ambigcites[e])||!t.length)return!1;var i=this.state.refetchItem(""+t[0]);if(this.getCiteData(i),this.base=we.getAmbigConfig.call(this.state),t&&1<t.length){r.push([this.maxNamesByItemId[i.id],i]);for(var s=1,n=t.length;s<n;s+=1)i=this.state.refetchItem(""+t[s]),this.getCiteData(i,this.base),r.push([this.maxNamesByItemId[i.id],i]);r.sort(function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1].id>t[1].id?1:e[1].id<t[1].id?-1:0});for(var a=[],s=0,n=r.length;s<n;s+=1)a.push(r[s][1]);this.lists.push([this.base,a]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+t[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},we.Disambiguation.prototype.padBase=function(e){for(var t=0,r=e.names.length;t<r;t+=1){e.givens[t]||(e.givens[t]=[]);for(var i=0,s=e.names[t];i<s;i+=1)e.givens[t][i]||(e.givens[t][i]=0)}},we.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&"by-cite"===t)&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))},we.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){we.getAmbiguousCite.call(this.state,e,t),t=we.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=we.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var r=0,i=this.state.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.state.registry.registry[e.id].disambig.givens[r]=this.state.tmp.disambig_settings.givens[r].slice();this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=we.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t);for(r=0,i=t.names.length;r<i;r+=1)t.names[r]>this.base.names[r]&&(this.base.givens[r]=t.givens[r].slice(),this.base.names[r]=t.names[r],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var s=0,n=this.base.givens.length;s<n;s+=1)this.betterbase.givens[s]=this.base.givens[s].slice()}},we.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},we.Engine.prototype.getJurisdictionList=function(e){for(var t=[],r=e.split(":"),i=r.length;0<i;i--){var s=r.slice(0,i).join(":");t.push(s),this.opt.jurisdiction_fallbacks[s]&&(s=this.opt.jurisdiction_fallbacks[s],t.push(s))}return-1===t.indexOf("us")&&t.push("us"),t},we.Engine.prototype.loadStyleModule=function(e,t,r){for(var i=null,s=(this.juris[e]={},we.setupXml(t)),n=(s.addMissingNameNodes(s.dataObj),s.addInstitutionNodes(s.dataObj),s.insertPublisherAndPlace(s.dataObj),s.flagDateMacros(s.dataObj),s.getNodesByName(s.dataObj,"law-module")),a=0,o=n.length;a<o;a++){if(l=s.getAttributeValue(n[a],"types")){this.juris[e].types={};for(var l,u=0,m=(l=l.split(/\s+/)).length;u<m;u++)this.juris[e].types[l[u]]=!0}r||(i=s.getAttributeValue(n[a],"fallback"))&&"us"!==e&&(this.opt.jurisdiction_fallbacks[e]=i)}t=this.opt.lang||this.opt["default-locale"][0];we.SET_COURT_CLASSES(this,t,s,s.dataObj),this.juris[e].types||(this.juris[e].types=we.MODULE_TYPES);for(a=0,o=(n=s.getNodesByName(s.dataObj,"macro")).length;a<o;a++){var p=s.getAttributeValue(n[a],"name");we.MODULE_MACROS[p]?(this.juris[e][p]=[],this.buildTokenLists(n[a],this.juris[e][p]),this.configureTokenList(this.juris[e][p])):we.debug('CSL: skipping non-modular macro name "'+p+'" in module context')}return i},we.Engine.prototype.retrieveAllStyleModules=function(e){for(var t={},r=this.locale[this.opt.lang].opts["jurisdiction-preference"],i=(r=[""].concat(r||[])).length-1;-1<i;i--)for(var s=r[i],n=0,a=e.length;n<a;n++){var o,l=e[n];this.opt.jurisdictions_seen[l]||(((o=this.sys.retrieveStyleModule(l,s))||s)&&!o||(this.opt.jurisdictions_seen[l]=!0),o&&(t[l]=o))}return t},we.ParticleList=[["'s",s=[[null,[0,1]]]],["'s-",s],["'t",s],["a",s],["aan 't",n=[[null,[0,2]]]],["aan de",n],["aan den",n],["aan der",n],["aan het",n],["aan t",n],["aan",s],["ad-",o=[[null,[0,1]],[[0,1],null]]],["adh-",o],["af",o],["al",o],["al-",o],["am de",n],["am",s],["an-",o],["ar-",o],["as-",o],["ash-",o],["at-",o],["ath-",o],["auf dem",u=[[[0,2],null],[null,[0,2]]]],["auf den",u],["auf der",u],["auf ter",n],["auf",l=[[[0,1],null],[null,[0,1]]]],["aus 'm",u],["aus dem",u],["aus den",u],["aus der",u],["aus m",u],["aus",l],["aus'm",u],["az-",o],["aš-",o],["aḍ-",o],["aḏ-",o],["aṣ-",o],["aṭ-",o],["aṯ-",o],["aẓ-",o],["ben",s],["bij 't",n],["bij de",n],["bij den",n],["bij het",n],["bij t",n],["bij",s],["bin",s],["boven d",n],["boven d'",n],["d",s],["d'",o],["da",o],["dal",s],["dal'",s],["dall'",s],["dalla",s],["das",o],["de die le",a=[[null,[0,3]]]],["de die",n],["de l",n],["de l'",n],["de la",m=[[null,[0,2]],[[0,1],[1,2]]]],["de las",m],["de le",n],["de li",m=[[null,[0,2]],[[0,2],null]]],["de van der",a],["de",o],["de'",o],["deca",s],["degli",o],["dei",o],["del",o],["dela",i=[[[0,1],null]]],["dell'",o],["della",o],["delle",o],["dello",o],["den",o],["der",o],["des",o],["di",o],["die le",n],["do",s],["don",s],["dos",o],["du",o],["ed-",o],["edh-",o],["el",o],["el-",o],["en-",o],["er-",o],["es-",o],["esh-",o],["et-",o],["eth-",o],["ez-",o],["eš-",o],["eḍ-",o],["eḏ-",o],["eṣ-",o],["eṭ-",o],["eṯ-",o],["eẓ-",o],["het",s],["i",s],["il",i],["im",s],["in 't",n],["in de",n],["in den",n],["in der",m],["in het",n],["in t",n],["in",s],["l",s],["l'",s],["la",s],["las",s],["le",s],["les",o],["lo",o],["los",s],["lou",s],["of",s],["onder 't",n],["onder de",n],["onder den",n],["onder het",n],["onder t",n],["onder",s],["op 't",n],["op de",m],["op den",n],["op der",n],["op gen",n],["op het",n],["op t",n],["op ten",n],["op",s],["over 't",n],["over de",n],["over den",n],["over het",n],["over t",n],["over",s],["s",s],["s'",s],["sen",i],["t",s],["te",s],["ten",s],["ter",s],["tho",s],["thoe",s],["thor",s],["to",s],["toe",s],["tot",s],["uijt 't",n],["uijt de",n],["uijt den",n],["uijt te de",a],["uijt ten",n],["uijt",s],["uit 't",n],["uit de",n],["uit den",n],["uit het",n],["uit t",n],["uit te de",a],["uit ten",n],["uit",s],["unter",s],["v",s],["v.",s],["v.d.",s],["van 't",n],["van de l",a],["van de l'",a],["van de",n],["van de",n],["van den",n],["van der",n],["van gen",n],["van het",n],["van la",n],["van t",n],["van ter",n],["van van de",a],["van",o],["vander",s],["vd",s],["ver",s],["vom und zum",[[[0,3],null]]],["vom",o],["von 't",n],["von dem",u],["von den",u],["von der",u],["von t",n],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",u],["von",l],["voor 't",n],["voor de",n],["voor den",n],["voor in 't",a],["voor in t",a],["voor",s],["vor der",u],["vor",l],["z",i],["ze",i],["zu",l],["zum",o],["zur",o]],we.parseParticles=function(e){var t,r=g(e.family),i=r[1],s=r[2],s=(e.family=i,i=s.join(""),s=i.slice(-1),i=i.trim()," "===s&&-1<["'","’"].indexOf(i.slice(-1))&&(i+=" "),i);s&&(e["non-dropping-particle"]=s),!(i=e).suffix&&i.given&&(s=i.given.match(/(\s*,!*\s*)/))&&(t=i.given.indexOf(s[1]),n=i.given.slice(t+s[1].length),s=i.given.slice(t,t+s[1].length).replace(/\s*/g,""),"et al"!==n.replace(/\./g,"")||i["dropping-particle"]?(2===s.length&&(i["comma-suffix"]=!0),i.suffix=n):(i["dropping-particle"]=n,i["comma-dropping-particle"]=","),i.given=i.given.slice(0,t));var s=(r=g(e.given,!0))[1],n=r[2],i=(e.given=s,n.join("").trim());i&&(e["dropping-particle"]=i)},t.exports=we},{}],85:[function(e,i,s){!function(e){!function(){!function(r){"use strict";function e(e){var x=e&&e.Promise||r.Promise,w=e&&e.XMLHttpRequest||r.XMLHttpRequest;return function(){var e,t,_=Object.create(r,{fetch:{value:void 0,writable:!0}});return e=this,t=function(o){var t,r,l=void 0!==_&&_||"undefined"!=typeof self&&self||void 0!==l&&l,u={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function m(e){return e="string"!=typeof e?String(e):e}function e(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return u.iterable&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(e){if(e.bodyUsed)return x.reject(new TypeError("Already read"));e.bodyUsed=!0}function n(r){return new x(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function a(e){var t=new FileReader,r=n(t);return t.readAsArrayBuffer(e),r}function c(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function h(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:u.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u.arrayBuffer&&u.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=c(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return x.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return x.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return x.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?x.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):x.resolve(this._bodyArrayBuffer)):this.blob().then(a)}),this.text=function(){var e,t,r=s(this);if(r)return r;if(this._bodyBlob)return r=this._bodyBlob,e=new FileReader,t=n(e),e.readAsText(r),t;if(this._bodyArrayBuffer)return x.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return x.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}u.arrayBuffer&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),p.prototype.append=function(e,t){e=i(e),t=m(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[i(e)]},p.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},p.prototype.set=function(e,t){this.map[i(e)]=m(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),e(r)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e(t)},p.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),e(r)},u.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function d(e,t){if(!(this instanceof d))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i=(t=t||{}).body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(e=t.method||this.method||"GET",r=e.toUpperCase(),-1<f.indexOf(r)?r:e),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((r=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(r,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function g(e){var r=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(t=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),r.append(decodeURIComponent(t),decodeURIComponent(e)))}),r}function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},h.call(d.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];b.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},o.DOMException=l.DOMException;try{new o.DOMException}catch(e){o.DOMException=function(e,t){this.message=e,this.name=t;t=Error(e);this.stack=t.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(i,a){return new x(function(s,e){var t=new d(i,a);if(t.signal&&t.signal.aborted)return e(new o.DOMException("Aborted","AbortError"));var n=new w;function r(){n.abort()}n.onload=function(){var e,r,t={status:n.status,statusText:n.statusText,headers:(e=n.getAllResponseHeaders()||"",r=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var e=e.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),r.append(t,e))}),r)},i=(t.url="responseURL"in n?n.responseURL:t.headers.get("X-Request-URL"),"response"in n?n.response:n.responseText);setTimeout(function(){s(new b(i,t))},0)},n.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},n.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},n.onabort=function(){setTimeout(function(){e(new o.DOMException("Aborted","AbortError"))},0)},n.open(t.method,function(t){try{return""===t&&l.location.href?l.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?n.withCredentials=!0:"omit"===t.credentials&&(n.withCredentials=!1),"responseType"in n&&(u.blob?n.responseType="blob":u.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(n.responseType="arraybuffer")),!a||"object"!=typeof a.headers||a.headers instanceof p?t.headers.forEach(function(e,t){n.setRequestHeader(t,e)}):Object.getOwnPropertyNames(a.headers).forEach(function(e){n.setRequestHeader(e,m(a.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",r),n.onreadystatechange=function(){4===n.readyState&&t.signal.removeEventListener("abort",r)}),n.send(void 0===t._bodyInit?null:t._bodyInit)})}v.polyfill=!0,l.fetch||(l.fetch=v,l.Headers=p,l.Request=d,l.Response=b),o.Headers=p,o.Request=d,o.Response=b,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0})},"object"==typeof s&&void 0!==i?t(s):"function"==typeof define&&define.amd?define(["exports"],t):t(e.WHATWGFetch={}),{fetch:_.fetch,Headers:_.Headers,Request:_.Request,Response:_.Response,DOMException:_.DOMException}}()}"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof s?i.exports=e:r.fetchPonyfill=e}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==e?e:this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],86:[function(e,t,r){r.read=function(e,t,r,i,s){var n,a,o=8*s-i-1,l=(1<<o)-1,u=l>>1,m=-7,p=r?s-1:0,c=r?-1:1,s=e[t+p];for(p+=c,n=s&(1<<-m)-1,s>>=-m,m+=o;0<m;n=256*n+e[t+p],p+=c,m-=8);for(a=n&(1<<-m)-1,n>>=-m,m+=i;0<m;a=256*a+e[t+p],p+=c,m-=8);if(0===n)n=1-u;else{if(n===l)return a?NaN:1/0*(s?-1:1);a+=Math.pow(2,i),n-=u}return(s?-1:1)*a*Math.pow(2,n-i)},r.write=function(e,t,r,i,s,n){var a,o,l=8*n-s-1,u=(1<<l)-1,m=u>>1,p=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:n-1,h=i?1:-1,n=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-a))<1&&(a--,i*=2),2<=(t+=1<=a+m?p/i:p*Math.pow(2,1-m))*i&&(a++,i/=2),u<=a+m?(o=0,a=u):1<=a+m?(o=(t*i-1)*Math.pow(2,s),a+=m):(o=t*Math.pow(2,m-1)*Math.pow(2,s),a=0));8<=s;e[r+c]=255&o,c+=h,o/=256,s-=8);for(a=a<<s|o,l+=s;0<l;e[r+c]=255&a,c+=h,a/=256,l-=8);e[r+c-h]|=128*n}},{}],87:[function(e,t,r){var i,s;i=this,s=function(){"use strict";var s=Object.prototype.hasOwnProperty,t=Object.prototype.toString,b="boolean"==typeof(new RegExp).sticky;function y(e){return e&&"[object RegExp]"===t.call(e)}function u(e){return e&&"object"==typeof e&&!y(e)&&!Array.isArray(e)}function v(e){return e.length?"(?:"+e.map(function(e){return"(?:"+e+")"}).join("|")+")":"(?!)"}function _(e){if("string"==typeof e)return"(?:"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(y(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function m(e,t){return e.length>t?e:Array(t-e.length+1).join(" ")+e}function p(e,t){if((t=u(t)?t:{match:t}).include)throw new Error("Matching rules cannot also include states");var r,i={defaultType:e,lineBreaks:!!t.error||!!t.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(r in t)s.call(t,r)&&(i[r]=t[r]);if("string"==typeof i.type&&e!==i.type)throw new Error("Type transform cannot be a string (type '"+i.type+"' for token '"+e+"')");e=i.match;return i.match=Array.isArray(e)?e:e?[e]:[],i.match.sort(function(e,t){return y(e)&&y(t)?0:y(t)?-1:y(e)?1:t.length-e.length}),i}function x(e){return(Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(i.include)for(var s=[].concat(i.include),n=0;n<s.length;n++)t.push({include:s[n]});else{if(!i.type)throw new Error("Rule has no type: "+JSON.stringify(i));t.push(p(i.type,i))}}return t}:function(e){for(var t=Object.getOwnPropertyNames(e),r=[],i=0;i<t.length;i++){var s=t[i],n=e[s],a=[].concat(n);if("include"===s)for(var o=0;o<a.length;o++)r.push({include:a[o]});else{var l=[];a.forEach(function(e){u(e)?(l.length&&r.push(p(s,l)),r.push(p(s,e)),l=[]):l.push(e)}),l.length&&r.push(p(s,l))}}return r})(e)}var w=p("error",{lineBreaks:!0,shouldThrow:!0});function E(e,t){for(var r=null,i=Object.create(null),s=!0,n=null,a=[],o=[],l=0;l<e.length;l++)e[l].fallback&&(s=!1);for(l=0;l<e.length;l++){var u=e[l];if(u.include)throw new Error("Inheritance is not allowed in stateless lexers");if(u.error||u.fallback){if(r)throw!u.fallback==!r.fallback?new Error("Multiple "+(u.fallback?"fallback":"error")+" rules not allowed (for token '"+u.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+u.defaultType+"')");r=u}var m=u.match.slice();if(s)for(;m.length&&"string"==typeof m[0]&&1===m[0].length;)i[m.shift().charCodeAt(0)]=u;if(u.pop||u.push||u.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+u.defaultType+"')");if(u.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+u.defaultType+"')")}if(0!==m.length){s=!1,a.push(u);for(var p=0;p<m.length;p++){var c=m[p];if(y(c))if(null===n)n=c.unicode;else if(n!==c.unicode&&!1===u.fallback)throw new Error("If one rule is /u then all must be")}var h=v(m.map(_)),f=new RegExp(h);if(f.test(""))throw new Error("RegExp matches empty string: "+f);if(0<new RegExp("|"+h).exec("").length-1)throw new Error("RegExp has capture groups: "+f+"\nUse (?: … ) instead");if(!u.lineBreaks&&f.test("\n"))throw new Error("Rule should declare lineBreaks: "+f);o.push("("+h+")")}}var d=r&&r.fallback,g=b&&!d?"ym":"gm",d=b||d?"":"|";return!0===n&&(g+="u"),{regexp:new RegExp(v(o)+d,g),groups:a,fast:i,error:r||w}}function O(e,t,r){var i=e&&(e.push||e.next);if(i&&!r[i])throw new Error("Missing state '"+i+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}function A(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()}A.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedText=t?t.queuedText:"",this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},A.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},A.prototype.setState=function(e){e&&this.state!==e&&(this.state=e,e=this.states[e],this.groups=e.groups,this.error=e.error,this.re=e.regexp,this.fast=e.fast)},A.prototype.popState=function(){this.setState(this.stack.pop())},A.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var e,a=b?function(e,t){return e.exec(t)}:function(e,t){e=e.exec(t);return 0===e[0].length?null:e};function o(){return this.value}return A.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},A.prototype.next=function(){var e,t,r,i,s,n=this.index;return this.queuedGroup?(e=this._token(this.queuedGroup,this.queuedText,n),this.queuedGroup=null,this.queuedText="",e):n!==(e=this.buffer).length?(i=this.fast[e.charCodeAt(n)])?this._token(i,e.charAt(n),n):((t=this.re).lastIndex=n,t=a(t,e),r=this.error,null==t?this._token(r,e.slice(n,e.length),n):(i=this._getGroup(t),s=t[0],r.fallback&&t.index!==n?(this.queuedGroup=i,this.queuedText=s,this._token(r,e.slice(n,t.index),n)):this._token(i,s,n))):void 0},A.prototype._token=function(e,t,r){var i=0;if(e.lineBreaks){var s=/\n/g,n=1;if("\n"===t)i=1;else for(;s.exec(t);)i++,n=s.lastIndex}var r={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:o,offset:r,lineBreaks:i,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=i,0!==i?this.col=a-n+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(r,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),r},"undefined"!=typeof Symbol&&Symbol.iterator&&((e=function(e){this.lexer=e}).prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},e.prototype[Symbol.iterator]=function(){return this},A.prototype[Symbol.iterator]=function(){return new e(this)}),A.prototype.formatError=function(e,t){null==e&&(e={text:i=this.buffer.slice(this.index),offset:this.index,lineBreaks:-1===i.indexOf("\n")?0:1,line:this.line,col:this.col});var r=Math.max(e.line-2,1),i=e.line+2,s=String(i).length,n=function(e,t){for(var r=e.length,i=0;;){var s=e.lastIndexOf("\n",r-1);if(-1===s)break;if(r=s,++i===t)break;if(0===r)break}return e.substring(i<t?0:r+1).split("\n")}(this.buffer,this.line-e.line+2+1).slice(0,5),a=[];a.push(t+" at line "+e.line+" col "+e.col+":"),a.push("");for(var o=0;o<n.length;o++){var l=n[o],u=r+o;a.push(m(String(u),s)+"  "+l),u===e.line&&a.push(m("",s+e.col+1)+"^")}return a.join("\n")},A.prototype.clone=function(){return new A(this.states,this.state)},A.prototype.has=function(e){return!0},{compile:function(e){return e=E(x(e)),new A({start:e},"start")},states:function(e,t){for(var r=e.$all?x(e.$all):[],i=(delete e.$all,Object.getOwnPropertyNames(e)),s=(t=t||i[0],Object.create(null)),n=0;n<i.length;n++)s[f=i[n]]=x(e[f]).concat(r);for(n=0;n<i.length;n++)for(var a=s[f=i[n]],o=Object.create(null),l=0;l<a.length;l++){var u=a[l];if(u.include){var m=[l,1];if(u.include!==f&&!o[u.include]){o[u.include]=!0;var p=s[u.include];if(!p)throw new Error("Cannot include nonexistent state '"+u.include+"' (in state '"+f+"')");for(var c=0;c<p.length;c++){var h=p[c];-1===a.indexOf(h)&&m.push(h)}}a.splice.apply(a,m),l--}}for(var f,d=Object.create(null),n=0;n<i.length;n++)d[f=i[n]]=E(s[f],!0);for(n=0;n<i.length;n++){for(var g=i[n],b=d[g],y=b.groups,l=0;l<y.length;l++)O(y[l],g,d);for(var v=Object.getOwnPropertyNames(b.fast),l=0;l<v.length;l++)O(b.fast[v[l]],g,d)}return new A(d,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t="undefined"!=typeof Map,r=t?new Map:Object.create(null),i=Object.getOwnPropertyNames(e),s=0;s<i.length;s++){var n=i[s],a=e[n];(Array.isArray(a)?a:[a]).forEach(function(e){if("string"!=typeof e)throw new Error("keyword must be string (in keyword '"+n+"')");t?r.set(e,n):r[e]=n})}return function(e){return t?r.get(e):r[e]}}}},"function"==typeof define&&define.amd?define([],s):"object"==typeof t&&t.exports?t.exports=s():i.moo=s()},{}],88:[function(e,t,r){var i,s,t=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:n}catch(e){i=n}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===n||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,u=[],m=!1,p=-1;function c(){m&&l&&(m=!1,l.length?u=l.concat(u):p=-1,u.length)&&h()}function h(){if(!m){for(var e=o(c),t=(m=!0,u.length);t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,m=!1,!function(t){if(s===clearTimeout)return clearTimeout(t);if((s===a||!s)&&clearTimeout)return(s=clearTimeout)(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function d(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||m||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],89:[function(e,t,r){const l=e("buffer/")["Buffer"];function u(...e){var e=new u.Request(...e),t=new XMLHttpRequest;t.withCredentials="include"===e.credentials,t.timeout=e[m].timeout,t.open(e.method,e.url,!1);let r=!1;try{t.responseType="arraybuffer"}catch(e){t.overrideMimeType("text/plain; charset=x-user-defined"),r=!0}for(const o of e.headers)t.setRequestHeader(...o);t.send(e.body||null);let i=t.getAllResponseHeaders(),s=(i=i&&i.split("\r\n").filter(Boolean).map(e=>e.split(": ",2)),t.response);if(r){var n=l.alloc(s.length);for(let e=0;e<s.length;e++)n[e]=255&s.charCodeAt(e);s=n}var a=new u.Response(s,{headers:i,status:t.status,statusText:t.statusText});return a[m].url=t.responseURL,a[m].redirected=t.responseURL!==e.url,a}const m=Symbol("SyncFetch Internals"),i=["mode","cache","redirect","referrer","integrity"],s={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};class n{constructor(e,t={}){for(const r of i)if(r in t)throw new TypeError(`option ${r} not supported`);if("same-origin"===t.credentials)throw new TypeError("option credentials with value 'same-origin' not supported");if(this[m]={method:t.method||"GET",headers:new u.Headers(t.headers),body:t.body?l.from(t.body):null,credentials:t.credentials||"omit",timeout:t.timeout||0},"string"==typeof e)this[m].url=e;else{if(!(e instanceof n))throw new TypeError("Request input should be a URL string or a Request object");this[m].url=e.url,t.method||(this[m].method=e.method),t.headers||(this[m].headers=e.headers),t.body||(this[m].body=e[m].body),t.credentials||(this[m].credentials=e.credentials)}}get cache(){return"default"}get credentials(){return this[m].credentials}get destination(){return""}get headers(){return this[m].headers}get integrity(){return""}get method(){return this[m].method}get mode(){return"cors"}get priority(){return"auto"}get redirect(){return"follow"}get referrer(){return"about:client"}get referrerPolicy(){return""}get url(){return this[m].url}clone(){return p(this),new n(this.url,this[m])}}class a{constructor(e,t={}){this[m]={body:e?l.from(e):null,bodyUsed:!1,headers:new u.Headers(t.headers),status:t.status,statusText:t.statusText}}get headers(){return this[m].headers}get ok(){var e=this[m].status;return 200<=e&&e<300}get redirected(){return this[m].redirected}get status(){return this[m].status}get statusText(){return this[m].statusText}get url(){return this[m].url}clone(){return this.redirect(this[m].url,this[m].status)}redirect(e,t){p(this);t=new a(this[m].body,{headers:this[m].headers,status:t||this[m].status,statusText:s[t]||this[m].statusText});return t[m].url=e||this[m].url,t[m].redirected=this[m].redirected,t}}class o{constructor(e){this[m]={body:l.from(e),bodyUsed:!1}}get bodyUsed(){return this[m].bodyUsed}static mixin(e){for(const r of Object.getOwnPropertyNames(o.prototype)){var t;"constructor"!==r&&(t=Object.getOwnPropertyDescriptor(o.prototype,r),Object.defineProperty(e,r,{...t,enumerable:!0}))}}arrayBuffer(){var e=c(this);return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}blob(){var e=this.headers&&this.headers.get("content-type");return new Blob([c(this)],e&&{type:e})}text(){return c(this).toString()}json(){try{return JSON.parse(c(this).toString())}catch(e){throw new TypeError(`invalid json response body at ${this.url} reason: `+e.message,"invalid-json")}}buffer(){return c(this).clone()}}function p(e){if(e.bodyUsed)throw new TypeError("body used already for: "+e.url)}function c(e){return p(e),e[m].bodyUsed=!0,e[m].body||l.alloc(0)}o.mixin(n.prototype),o.mixin(a.prototype);class h{constructor(e){if(e instanceof u.Headers)this[m]={...e[m]};else if(this[m]={},Array.isArray(e))for(var[t,r]of e)this.append(t,r);else if("object"==typeof e)for(const i in e)this.set(i,e[i])}append(e,t){e=e.toLowerCase(),this[m][e]||(this[m][e]=[]),this[m][e].push(t)}delete(e){delete this[m][e.toLowerCase()]}set(e,t){this[m][e.toLowerCase()]=[t]}entries(){var e=[];for(const t in this[m])for(const r of this[m][t])e.push([t,r]);return e}get(e){return(e=e.toLowerCase())in this[m]?this[m][e].join(", "):null}keys(){return Object.keys(this[m])}has(e){return e.toLowerCase()in this[m]}values(){var e=[];for(const t in this[m])for(const r of this[m][t])e.push(r);return e}*[Symbol.iterator](){for(const e in this[m])for(const t of this[m][e])yield[e,t]}}u.Headers=h,u.Request=n,u.Response=a,t.exports=u},{"buffer/":90}],90:[function(R,e,D){!function(e){!function(){"use strict";var O=R("base64-js"),n=R("ieee754"),e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,t=(D.Buffer=p,D.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},D.INSPECT_MAX_BYTES=50,2147483647);function o(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,p.prototype),e}function p(e,t,r){if("number"!=typeof e)return i(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function i(e,t,r){if("string"==typeof e){var i=e,s=t;if(p.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))return n=0|c(i,s),a=o(n),a=(i=a.write(i,s))!==n?a.slice(0,i):a;throw new TypeError("Unknown encoding: "+s)}var n;if(ArrayBuffer.isView(e))return I(n=e,Uint8Array)?u((i=new Uint8Array(n)).buffer,i.byteOffset,i.byteLength):l(n);if(null!=e){if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer))return u(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(I(e,SharedArrayBuffer)||e&&I(e.buffer,SharedArrayBuffer)))return u(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return p.from(a,t,r);s=function(e){{var t,r;if(p.isBuffer(e))return t=0|m(e.length),0!==(r=o(t)).length&&e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||C(e.length)?o(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return s(e),o(e<0?0:0|m(e))}function l(e){for(var t=e.length<0?0:0|m(e.length),r=o(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function u(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return Object.setPrototypeOf(e,p.prototype),e}function m(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function c(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return S(e).length;default:if(s)return i?-1:k(e).length;t=(""+t).toLowerCase(),s=!0}}function r(e,t,r){var i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var n=this,a=t,o=r,l=n.length;(!o||o<0||l<o)&&(o=l);for(var u="",m=a=!a||a<0?0:a;m<o;++m)u+=N[n[m]];return u;case"utf8":case"utf-8":return A(this,t,r);case"ascii":var p=this,l=t,c=r,h="";c=Math.min(p.length,c);for(var f=l;f<c;++f)h+=String.fromCharCode(127&p[f]);return h;case"latin1":case"binary":var d=this,a=t,g=r,b="";g=Math.min(d.length,g);for(var y=a;y<g;++y)b+=String.fromCharCode(d[y]);return b;case"base64":return v=this,i=r,0===(_=t)&&i===v.length?O.fromByteArray(v):O.fromByteArray(v.slice(_,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,_=r,x=this.slice(v,_),w="",E=0;E<x.length-1;E+=2)w+=String.fromCharCode(x[E]+256*x[E+1]);return w;default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function h(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function f(e,t,r,i,s){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=C(r=+r)?s?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=p.from(t,i)),p.isBuffer(t))return 0===t.length?-1:d(e,t,r,i,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(s?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):d(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,i,s){var n=1,a=e.length,o=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a/=n=2,o/=2,r/=2}function l(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(s)for(var u=-1,m=r;m<a;m++)if(l(e,m)===l(t,-1===u?0:m-u)){if(m-(u=-1===u?m:u)+1===o)return u*n}else-1!==u&&(m-=m-u),u=-1;else for(m=r=a<r+o?a-o:r;0<=m;m--){for(var p=!0,c=0;c<o;c++)if(l(e,m+c)!==l(t,c)){p=!1;break}if(p)return m}return-1}function g(e,t,r,i){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function b(e,t,r,i){return j(function(e,t){for(var r,i,s=[],n=0;n<e.length&&!((t-=2)<0);++n)r=e.charCodeAt(n),i=r>>8,s.push(r%256),s.push(i);return s}(t,e.length-r),e,r,i)}function A(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,a,o,l,u=e[s],m=null,p=239<u?4:223<u?3:191<u?2:1;if(s+p<=r)switch(p){case 1:u<128&&(m=u);break;case 2:128==(192&(n=e[s+1]))&&127<(l=(31&u)<<6|63&n)&&(m=l);break;case 3:n=e[s+1],a=e[s+2],128==(192&n)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&n)<<6|63&a)&&(l<55296||57343<l)&&(m=l);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],128==(192&n)&&128==(192&a)&&128==(192&o)&&65535<(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)&&l<1114112&&(m=l)}null===m?(m=65533,p=1):65535<m&&(i.push((m-=65536)>>>10&1023|55296),m=56320|1023&m),i.push(m),s+=p}var c=i,h=c.length;if(h<=y)return String.fromCharCode.apply(String,c);for(var f="",d=0;d<h;)f+=String.fromCharCode.apply(String,c.slice(d,d+=y));return f}D.kMaxLength=t,(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=i,Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,r){return t=t,r=r,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},p.allocUnsafe=a,p.allocUnsafeSlow=a,p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(I(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);if(void 0===t)for(s=t=0;s<e.length;++s)t+=e[s].length;for(var r=p.allocUnsafe(t),i=0,s=0;s<e.length;++s){var n=e[s];if(I(n,Uint8Array))i+n.length>r.length?p.from(n).copy(r,i):Uint8Array.prototype.set.call(r,n,i);else{if(!p.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(r,i)}i+=n.length}return r},p.byteLength=c,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):r.apply(this,arguments)},p.prototype.equals=function(e){if(p.isBuffer(e))return this===e||0===p.compare(this,e);throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var e="",t=D.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(p.prototype[e]=p.prototype.inspect),p.prototype.compare=function(e,t,r,i,s){if(I(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),(t=void 0===t?0:t)<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(s<=i&&r<=t)return 0;if(s<=i)return-1;if(r<=t)return 1;if(this===e)return 0;for(var n=(s>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(n,a),l=this.slice(i,s),u=e.slice(t,r),m=0;m<o;++m)if(l[m]!==u[m]){n=l[m],a=u[m];break}return n<a?-1:a<n?1:0},p.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},p.prototype.indexOf=function(e,t,r){return f(this,e,t,r,!0)},p.prototype.lastIndexOf=function(e,t,r){return f(this,e,t,r,!1)},p.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var s=this.length-t;if((void 0===r||s<r)&&(r=s),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var n,a,o,l=!1;;)switch(i){case"hex":var u=this,m=e,p=t,c=r,h=(p=Number(p)||0,u.length-p);(!c||h<(c=Number(c)))&&(c=h),(h=m.length)/2<c&&(c=h/2);for(var f=0;f<c;++f){var d=parseInt(m.substr(2*f,2),16);if(C(d))return f;u[p+f]=d}return f;case"utf8":case"utf-8":return h=t,o=r,j(k(e,(a=this).length-h),a,h,o);case"ascii":case"latin1":case"binary":return g(this,e,t,r);case"base64":return a=this,o=t,n=r,j(S(e),a,o,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function v(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,r,i,s,n){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(s<t||t<n)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function x(e,t,r,i){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,i,s){return t=+t,r>>>=0,s||x(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function E(e,t,r,i,s){return t=+t,r>>>=0,s||x(e,0,r,8),n.write(e,t,r,i,52,8),r+8}p.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e+--t],s=1;0<t&&(s*=256);)i+=this[e+--t]*s;return i},p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return(s*=128)<=i&&(i-=Math.pow(2,8*t)),i},p.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=t,s=1,n=this[e+--i];0<i&&(s*=256);)n+=this[e+--i]*s;return(s*=128)<=n&&(n-=Math.pow(2,8*t)),n},p.prototype.readInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||_(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,n=0;for(this[t]=255&e;++n<r&&(s*=256);)this[t+n]=e/s&255;return t+r},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||_(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,n=1;for(this[t+s]=255&e;0<=--s&&(n*=256);)this[t+s]=e/n&255;return t+r},p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeIntLE=function(e,t,r,i){e=+e,t>>>=0,i||_(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var s=0,n=1,a=0;for(this[t]=255&e;++s<r&&(n*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/n>>0)-a&255;return t+r},p.prototype.writeIntBE=function(e,t,r,i){e=+e,t>>>=0,i||_(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var s=r-1,n=1,a=0;for(this[t+s]=255&e;0<=--s&&(n*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/n>>0)-a&255;return t+r},p.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},p.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},p.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},p.prototype.writeDoubleLE=function(e,t,r){return E(this,e,t,!0,r)},p.prototype.writeDoubleBE=function(e,t,r){return E(this,e,t,!1,r)},p.prototype.copy=function(e,t,r,i){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<r?r:i)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var s=(i=e.length-t<i-r?e.length-t+r:i)-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),s},p.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s;1===e.length&&(s=e.charCodeAt(0),"utf8"===i&&s<128||"latin1"===i)&&(e=s)}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");var n;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(n=t;n<r;++n)this[n]=e;else{var a=p.isBuffer(e)?e:p.from(e,i),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=a[n%o]}return this};var T=/[^+/0-9A-Za-z-_]/g;function k(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],a=0;a<i;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!s){if(56319<r){-1<(t-=3)&&n.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&n.push(239,191,189);continue}s=r;continue}if(r<56320){-1<(t-=3)&&n.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&-1<(t-=3)&&n.push(239,191,189);if(s=null,r<128){if(--t<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function S(e){return O.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function C(e){return e!=e}var N=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var i=16*r,s=0;s<16;++s)t[i+s]=e[r]+e[s];return t}()}.call(this)}.call(this,R("buffer").Buffer)},{"base64-js":82,buffer:83,ieee754:86}],"citation-js":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Cite",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"logger",{enumerable:!0,get:function(){return n.default}}),r.version=r.util=r.plugins=void 0;var i=l(e("./Cite/index.js")),s=o(e("./plugins/index.js")),s=(r.plugins=s,o(e("./util/index.js"))),n=(r.util=s,l(e("./logger.js"))),s=l(e("../package.json"));function a(e){var t,r;return"function"!=typeof WeakMap?null:(t=new WeakMap,r=new WeakMap,(a=function(e){return e?r:t})(e))}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var r,i,s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&((i=n?Object.getOwnPropertyDescriptor(e,r):null)&&(i.get||i.set)?Object.defineProperty(s,r,i):s[r]=e[r]);return s.default=e,t&&t.set(e,s),s}function l(e){return e&&e.__esModule?e:{default:e}}e("./plugin-common/index.js");r.version=s.default.version},{"../package.json":42,"./Cite/index.js":3,"./logger.js":10,"./plugin-common/index.js":11,"./plugins/index.js":22,"./util/index.js":38}]},{},[50,77]);
